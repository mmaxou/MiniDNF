const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CharacterList-CwNjEGsI.js","./CharacterList-D-iL8qYG.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function pm(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const mt={},Va=[],ni=()=>{},bP=()=>!1,Gd=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),_m=n=>n.startsWith("onUpdate:"),En=Object.assign,mm=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},IP=Object.prototype.hasOwnProperty,at=(n,e)=>IP.call(n,e),Ne=Array.isArray,Fa=n=>du(n)==="[object Map]",Qd=n=>du(n)==="[object Set]",uy=n=>du(n)==="[object Date]",Fe=n=>typeof n=="function",Ht=n=>typeof n=="string",ci=n=>typeof n=="symbol",bt=n=>n!==null&&typeof n=="object",Xw=n=>(bt(n)||Fe(n))&&Fe(n.then)&&Fe(n.catch),Jw=Object.prototype.toString,du=n=>Jw.call(n),AP=n=>du(n).slice(8,-1),Zw=n=>du(n)==="[object Object]",gm=n=>Ht(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,yc=pm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yd=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},CP=/-(\w)/g,fs=Yd(n=>n.replace(CP,(e,t)=>t?t.toUpperCase():"")),SP=/\B([A-Z])/g,Ko=Yd(n=>n.replace(SP,"-$1").toLowerCase()),Xd=Yd(n=>n.charAt(0).toUpperCase()+n.slice(1)),_p=Yd(n=>n?`on${Xd(n)}`:""),Tr=(n,e)=>!Object.is(n,e),Dh=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},eb=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},ed=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let hy;const Jd=()=>hy||(hy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vm(n){if(Ne(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],i=Ht(s)?OP(s):vm(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(Ht(n)||bt(n))return n}const RP=/;(?![^(]*\))/g,PP=/:([^]+)/,NP=/\/\*[^]*?\*\//g;function OP(n){const e={};return n.replace(NP,"").split(RP).forEach(t=>{if(t){const s=t.split(PP);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Zd(n){let e="";if(Ht(n))e=n;else if(Ne(n))for(let t=0;t<n.length;t++){const s=Zd(n[t]);s&&(e+=s+" ")}else if(bt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const kP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",DP=pm(kP);function tb(n){return!!n||n===""}function xP(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=ef(n[s],e[s]);return t}function ef(n,e){if(n===e)return!0;let t=uy(n),s=uy(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=ci(n),s=ci(e),t||s)return n===e;if(t=Ne(n),s=Ne(e),t||s)return t&&s?xP(n,e):!1;if(t=bt(n),s=bt(e),t||s){if(!t||!s)return!1;const i=Object.keys(n).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!ef(n[o],e[o]))return!1}}return String(n)===String(e)}function LP(n,e){return n.findIndex(t=>ef(t,e))}const nb=n=>!!(n&&n.__v_isRef===!0),As=n=>Ht(n)?n:n==null?"":Ne(n)||bt(n)&&(n.toString===Jw||!Fe(n.toString))?nb(n)?As(n.value):JSON.stringify(n,sb,2):String(n),sb=(n,e)=>nb(e)?sb(n,e.value):Fa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,i],r)=>(t[mp(s,r)+" =>"]=i,t),{})}:Qd(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>mp(t))}:ci(e)?mp(e):bt(e)&&!Ne(e)&&!Zw(e)?String(e):e,mp=(n,e="")=>{var t;return ci(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kn;class MP{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Kn,!e&&Kn&&(this.index=(Kn.scopes||(Kn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Kn;try{return Kn=this,e()}finally{Kn=t}}}on(){Kn=this}off(){Kn=this.parent}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function VP(){return Kn}let Tt;const gp=new WeakSet;class ib{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Kn&&Kn.active&&Kn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gp.has(this)&&(gp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ob(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,dy(this),ab(this);const e=Tt,t=ks;Tt=this,ks=!0;try{return this.fn()}finally{lb(this),Tt=e,ks=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Tm(e);this.deps=this.depsTail=void 0,dy(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){l_(this)&&this.run()}get dirty(){return l_(this)}}let rb=0,Ec,Tc;function ob(n,e=!1){if(n.flags|=8,e){n.next=Tc,Tc=n;return}n.next=Ec,Ec=n}function ym(){rb++}function Em(){if(--rb>0)return;if(Tc){let e=Tc;for(Tc=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Ec;){let e=Ec;for(Ec=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function ab(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function lb(n){let e,t=n.depsTail,s=t;for(;s;){const i=s.prevDep;s.version===-1?(s===t&&(t=i),Tm(s),FP(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=e,n.depsTail=t}function l_(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(cb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function cb(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===$c))return;n.globalVersion=$c;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!l_(n)){n.flags&=-3;return}const t=Tt,s=ks;Tt=n,ks=!0;try{ab(n);const i=n.fn(n._value);(e.version===0||Tr(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{Tt=t,ks=s,lb(n),n.flags&=-3}}function Tm(n,e=!1){const{dep:t,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Tm(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function FP(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let ks=!0;const ub=[];function Br(){ub.push(ks),ks=!1}function Hr(){const n=ub.pop();ks=n===void 0?!0:n}function dy(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Tt;Tt=void 0;try{e()}finally{Tt=t}}}let $c=0;class $P{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wm{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Tt||!ks||Tt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Tt)t=this.activeLink=new $P(Tt,this),Tt.deps?(t.prevDep=Tt.depsTail,Tt.depsTail.nextDep=t,Tt.depsTail=t):Tt.deps=Tt.depsTail=t,hb(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Tt.depsTail,t.nextDep=void 0,Tt.depsTail.nextDep=t,Tt.depsTail=t,Tt.deps===t&&(Tt.deps=s)}return t}trigger(e){this.version++,$c++,this.notify(e)}notify(e){ym();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Em()}}}function hb(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)hb(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const c_=new WeakMap,Po=Symbol(""),u_=Symbol(""),Uc=Symbol("");function pn(n,e,t){if(ks&&Tt){let s=c_.get(n);s||c_.set(n,s=new Map);let i=s.get(t);i||(s.set(t,i=new wm),i.map=s,i.key=t),i.track()}}function Ri(n,e,t,s,i,r){const o=c_.get(n);if(!o){$c++;return}const a=c=>{c&&c.trigger()};if(ym(),e==="clear")o.forEach(a);else{const c=Ne(n),h=c&&gm(t);if(c&&t==="length"){const d=Number(s);o.forEach((p,g)=>{(g==="length"||g===Uc||!ci(g)&&g>=d)&&a(p)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),h&&a(o.get(Uc)),e){case"add":c?h&&a(o.get("length")):(a(o.get(Po)),Fa(n)&&a(o.get(u_)));break;case"delete":c||(a(o.get(Po)),Fa(n)&&a(o.get(u_)));break;case"set":Fa(n)&&a(o.get(Po));break}}Em()}function Ta(n){const e=ot(n);return e===n?e:(pn(e,"iterate",Uc),hs(n)?e:e.map(_n))}function tf(n){return pn(n=ot(n),"iterate",Uc),n}const UP={__proto__:null,[Symbol.iterator](){return vp(this,Symbol.iterator,_n)},concat(...n){return Ta(this).concat(...n.map(e=>Ne(e)?Ta(e):e))},entries(){return vp(this,"entries",n=>(n[1]=_n(n[1]),n))},every(n,e){return Ai(this,"every",n,e,void 0,arguments)},filter(n,e){return Ai(this,"filter",n,e,t=>t.map(_n),arguments)},find(n,e){return Ai(this,"find",n,e,_n,arguments)},findIndex(n,e){return Ai(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Ai(this,"findLast",n,e,_n,arguments)},findLastIndex(n,e){return Ai(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Ai(this,"forEach",n,e,void 0,arguments)},includes(...n){return yp(this,"includes",n)},indexOf(...n){return yp(this,"indexOf",n)},join(n){return Ta(this).join(n)},lastIndexOf(...n){return yp(this,"lastIndexOf",n)},map(n,e){return Ai(this,"map",n,e,void 0,arguments)},pop(){return ec(this,"pop")},push(...n){return ec(this,"push",n)},reduce(n,...e){return fy(this,"reduce",n,e)},reduceRight(n,...e){return fy(this,"reduceRight",n,e)},shift(){return ec(this,"shift")},some(n,e){return Ai(this,"some",n,e,void 0,arguments)},splice(...n){return ec(this,"splice",n)},toReversed(){return Ta(this).toReversed()},toSorted(n){return Ta(this).toSorted(n)},toSpliced(...n){return Ta(this).toSpliced(...n)},unshift(...n){return ec(this,"unshift",n)},values(){return vp(this,"values",_n)}};function vp(n,e,t){const s=tf(n),i=s[e]();return s!==n&&!hs(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=t(r.value)),r}),i}const jP=Array.prototype;function Ai(n,e,t,s,i,r){const o=tf(n),a=o!==n&&!hs(n),c=o[e];if(c!==jP[e]){const p=c.apply(n,r);return a?_n(p):p}let h=t;o!==n&&(a?h=function(p,g){return t.call(this,_n(p),g,n)}:t.length>2&&(h=function(p,g){return t.call(this,p,g,n)}));const d=c.call(o,h,s);return a&&i?i(d):d}function fy(n,e,t,s){const i=tf(n);let r=t;return i!==n&&(hs(n)?t.length>3&&(r=function(o,a,c){return t.call(this,o,a,c,n)}):r=function(o,a,c){return t.call(this,o,_n(a),c,n)}),i[e](r,...s)}function yp(n,e,t){const s=ot(n);pn(s,"iterate",Uc);const i=s[e](...t);return(i===-1||i===!1)&&Am(t[0])?(t[0]=ot(t[0]),s[e](...t)):i}function ec(n,e,t=[]){Br(),ym();const s=ot(n)[e].apply(n,t);return Em(),Hr(),s}const BP=pm("__proto__,__v_isRef,__isVue"),db=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ci));function HP(n){ci(n)||(n=String(n));const e=ot(this);return pn(e,"has",n),e.hasOwnProperty(n)}class fb{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw")return s===(i?r?ZP:gb:r?mb:_b).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Ne(e);if(!i){let c;if(o&&(c=UP[t]))return c;if(t==="hasOwnProperty")return HP}const a=Reflect.get(e,t,yn(e)?e:s);return(ci(t)?db.has(t):BP(t))||(i||pn(e,"get",t),r)?a:yn(a)?o&&gm(t)?a:a.value:bt(a)?i?yb(a):nf(a):a}}class pb extends fb{constructor(e=!1){super(!1,e)}set(e,t,s,i){let r=e[t];if(!this._isShallow){const c=Oo(r);if(!hs(s)&&!Oo(s)&&(r=ot(r),s=ot(s)),!Ne(e)&&yn(r)&&!yn(s))return c?!1:(r.value=s,!0)}const o=Ne(e)&&gm(t)?Number(t)<e.length:at(e,t),a=Reflect.set(e,t,s,yn(e)?e:i);return e===ot(i)&&(o?Tr(s,r)&&Ri(e,"set",t,s):Ri(e,"add",t,s)),a}deleteProperty(e,t){const s=at(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&s&&Ri(e,"delete",t,void 0),i}has(e,t){const s=Reflect.has(e,t);return(!ci(t)||!db.has(t))&&pn(e,"has",t),s}ownKeys(e){return pn(e,"iterate",Ne(e)?"length":Po),Reflect.ownKeys(e)}}class WP extends fb{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const qP=new pb,KP=new WP,zP=new pb(!0);const h_=n=>n,ph=n=>Reflect.getPrototypeOf(n);function GP(n,e,t){return function(...s){const i=this.__v_raw,r=ot(i),o=Fa(r),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,h=i[n](...s),d=t?h_:e?d_:_n;return!e&&pn(r,"iterate",c?u_:Po),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:a?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function _h(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function QP(n,e){const t={get(i){const r=this.__v_raw,o=ot(r),a=ot(i);n||(Tr(i,a)&&pn(o,"get",i),pn(o,"get",a));const{has:c}=ph(o),h=e?h_:n?d_:_n;if(c.call(o,i))return h(r.get(i));if(c.call(o,a))return h(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&pn(ot(i),"iterate",Po),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=ot(r),a=ot(i);return n||(Tr(i,a)&&pn(o,"has",i),pn(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,c=ot(a),h=e?h_:n?d_:_n;return!n&&pn(c,"iterate",Po),a.forEach((d,p)=>i.call(r,h(d),h(p),o))}};return En(t,n?{add:_h("add"),set:_h("set"),delete:_h("delete"),clear:_h("clear")}:{add(i){!e&&!hs(i)&&!Oo(i)&&(i=ot(i));const r=ot(this);return ph(r).has.call(r,i)||(r.add(i),Ri(r,"add",i,i)),this},set(i,r){!e&&!hs(r)&&!Oo(r)&&(r=ot(r));const o=ot(this),{has:a,get:c}=ph(o);let h=a.call(o,i);h||(i=ot(i),h=a.call(o,i));const d=c.call(o,i);return o.set(i,r),h?Tr(r,d)&&Ri(o,"set",i,r):Ri(o,"add",i,r),this},delete(i){const r=ot(this),{has:o,get:a}=ph(r);let c=o.call(r,i);c||(i=ot(i),c=o.call(r,i)),a&&a.call(r,i);const h=r.delete(i);return c&&Ri(r,"delete",i,void 0),h},clear(){const i=ot(this),r=i.size!==0,o=i.clear();return r&&Ri(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=GP(i,n,e)}),t}function bm(n,e){const t=QP(n,e);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(at(t,i)&&i in s?t:s,i,r)}const YP={get:bm(!1,!1)},XP={get:bm(!1,!0)},JP={get:bm(!0,!1)};const _b=new WeakMap,mb=new WeakMap,gb=new WeakMap,ZP=new WeakMap;function eN(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function tN(n){return n.__v_skip||!Object.isExtensible(n)?0:eN(AP(n))}function nf(n){return Oo(n)?n:Im(n,!1,qP,YP,_b)}function vb(n){return Im(n,!1,zP,XP,mb)}function yb(n){return Im(n,!0,KP,JP,gb)}function Im(n,e,t,s,i){if(!bt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=i.get(n);if(r)return r;const o=tN(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return i.set(n,a),a}function $a(n){return Oo(n)?$a(n.__v_raw):!!(n&&n.__v_isReactive)}function Oo(n){return!!(n&&n.__v_isReadonly)}function hs(n){return!!(n&&n.__v_isShallow)}function Am(n){return n?!!n.__v_raw:!1}function ot(n){const e=n&&n.__v_raw;return e?ot(e):n}function nN(n){return!at(n,"__v_skip")&&Object.isExtensible(n)&&eb(n,"__v_skip",!0),n}const _n=n=>bt(n)?nf(n):n,d_=n=>bt(n)?yb(n):n;function yn(n){return n?n.__v_isRef===!0:!1}function dn(n){return Eb(n,!1)}function sN(n){return Eb(n,!0)}function Eb(n,e){return yn(n)?n:new iN(n,e)}class iN{constructor(e,t){this.dep=new wm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ot(e),this._value=t?e:_n(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||hs(e)||Oo(e);e=s?e:ot(e),Tr(e,t)&&(this._rawValue=e,this._value=s?e:_n(e),this.dep.trigger())}}function Ua(n){return yn(n)?n.value:n}const rN={get:(n,e,t)=>e==="__v_raw"?n:Ua(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const i=n[e];return yn(i)&&!yn(t)?(i.value=t,!0):Reflect.set(n,e,t,s)}};function Tb(n){return $a(n)?n:new Proxy(n,rN)}class oN{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new wm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$c-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return ob(this,!0),!0}get value(){const e=this.dep.track();return cb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function aN(n,e,t=!1){let s,i;return Fe(n)?s=n:(s=n.get,i=n.set),new oN(s,i,t)}const mh={},td=new WeakMap;let yo;function lN(n,e=!1,t=yo){if(t){let s=td.get(t);s||td.set(t,s=[]),s.push(n)}}function cN(n,e,t=mt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:c}=t,h=H=>i?H:hs(H)||i===!1||i===0?Pi(H,1):Pi(H);let d,p,g,y,w=!1,N=!1;if(yn(n)?(p=()=>n.value,w=hs(n)):$a(n)?(p=()=>h(n),w=!0):Ne(n)?(N=!0,w=n.some(H=>$a(H)||hs(H)),p=()=>n.map(H=>{if(yn(H))return H.value;if($a(H))return h(H);if(Fe(H))return c?c(H,2):H()})):Fe(n)?e?p=c?()=>c(n,2):n:p=()=>{if(g){Br();try{g()}finally{Hr()}}const H=yo;yo=d;try{return c?c(n,3,[y]):n(y)}finally{yo=H}}:p=ni,e&&i){const H=p,ce=i===!0?1/0:i;p=()=>Pi(H(),ce)}const k=VP(),F=()=>{d.stop(),k&&k.active&&mm(k.effects,d)};if(r&&e){const H=e;e=(...ce)=>{H(...ce),F()}}let $=N?new Array(n.length).fill(mh):mh;const K=H=>{if(!(!(d.flags&1)||!d.dirty&&!H))if(e){const ce=d.run();if(i||w||(N?ce.some((ae,R)=>Tr(ae,$[R])):Tr(ce,$))){g&&g();const ae=yo;yo=d;try{const R=[ce,$===mh?void 0:N&&$[0]===mh?[]:$,y];c?c(e,3,R):e(...R),$=ce}finally{yo=ae}}}else d.run()};return a&&a(K),d=new ib(p),d.scheduler=o?()=>o(K,!1):K,y=H=>lN(H,!1,d),g=d.onStop=()=>{const H=td.get(d);if(H){if(c)c(H,4);else for(const ce of H)ce();td.delete(d)}},e?s?K(!0):$=d.run():o?o(K.bind(null,!0),!0):d.run(),F.pause=d.pause.bind(d),F.resume=d.resume.bind(d),F.stop=F,F}function Pi(n,e=1/0,t){if(e<=0||!bt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,yn(n))Pi(n.value,e,t);else if(Ne(n))for(let s=0;s<n.length;s++)Pi(n[s],e,t);else if(Qd(n)||Fa(n))n.forEach(s=>{Pi(s,e,t)});else if(Zw(n)){for(const s in n)Pi(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Pi(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fu(n,e,t,s){try{return s?n(...s):n()}catch(i){sf(i,e,t)}}function ui(n,e,t,s){if(Fe(n)){const i=fu(n,e,t,s);return i&&Xw(i)&&i.catch(r=>{sf(r,e,t)}),i}if(Ne(n)){const i=[];for(let r=0;r<n.length;r++)i.push(ui(n[r],e,t,s));return i}}function sf(n,e,t,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||mt;if(e){let a=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](n,c,h)===!1)return}a=a.parent}if(r){Br(),fu(r,null,10,[n,c,h]),Hr();return}}uN(n,t,i,s,o)}function uN(n,e,t,s=!0,i=!1){if(i)throw n;console.error(n)}const Cn=[];let Js=-1;const ja=[];let fr=null,Aa=0;const wb=Promise.resolve();let nd=null;function Cm(n){const e=nd||wb;return n?e.then(this?n.bind(this):n):e}function hN(n){let e=Js+1,t=Cn.length;for(;e<t;){const s=e+t>>>1,i=Cn[s],r=jc(i);r<n||r===n&&i.flags&2?e=s+1:t=s}return e}function Sm(n){if(!(n.flags&1)){const e=jc(n),t=Cn[Cn.length-1];!t||!(n.flags&2)&&e>=jc(t)?Cn.push(n):Cn.splice(hN(e),0,n),n.flags|=1,bb()}}function bb(){nd||(nd=wb.then(Ab))}function dN(n){Ne(n)?ja.push(...n):fr&&n.id===-1?fr.splice(Aa+1,0,n):n.flags&1||(ja.push(n),n.flags|=1),bb()}function py(n,e,t=Js+1){for(;t<Cn.length;t++){const s=Cn[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;Cn.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Ib(n){if(ja.length){const e=[...new Set(ja)].sort((t,s)=>jc(t)-jc(s));if(ja.length=0,fr){fr.push(...e);return}for(fr=e,Aa=0;Aa<fr.length;Aa++){const t=fr[Aa];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}fr=null,Aa=0}}const jc=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Ab(n){try{for(Js=0;Js<Cn.length;Js++){const e=Cn[Js];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Js<Cn.length;Js++){const e=Cn[Js];e&&(e.flags&=-2)}Js=-1,Cn.length=0,Ib(),nd=null,(Cn.length||ja.length)&&Ab()}}let Qn=null,Cb=null;function sd(n){const e=Qn;return Qn=n,Cb=n&&n.type.__scopeId||null,e}function fN(n,e=Qn,t){if(!e||n._n)return n;const s=(...i)=>{s._d&&Ay(-1);const r=sd(e);let o;try{o=n(...i)}finally{sd(r),s._d&&Ay(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function tc(n,e){if(Qn===null)return n;const t=cf(Qn),s=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,c=mt]=e[i];r&&(Fe(r)&&(r={mounted:r,updated:r}),r.deep&&Pi(o),s.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:c}))}return n}function go(n,e,t,s){const i=n.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(Br(),ui(c,t,8,[n.el,a,n,e]),Hr())}}const pN=Symbol("_vte"),_N=n=>n.__isTeleport;function Rm(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Rm(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Sb(n,e){return Fe(n)?En({name:n.name},e,{setup:n}):n}function Rb(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function id(n,e,t,s,i=!1){if(Ne(n)){n.forEach((w,N)=>id(w,e&&(Ne(e)?e[N]:e),t,s,i));return}if(wc(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&id(n,e,t,s.component.subTree);return}const r=s.shapeFlag&4?cf(s.component):s.el,o=i?null:r,{i:a,r:c}=n,h=e&&e.r,d=a.refs===mt?a.refs={}:a.refs,p=a.setupState,g=ot(p),y=p===mt?()=>!1:w=>at(g,w);if(h!=null&&h!==c&&(Ht(h)?(d[h]=null,y(h)&&(p[h]=null)):yn(h)&&(h.value=null)),Fe(c))fu(c,a,12,[o,d]);else{const w=Ht(c),N=yn(c);if(w||N){const k=()=>{if(n.f){const F=w?y(c)?p[c]:d[c]:c.value;i?Ne(F)&&mm(F,r):Ne(F)?F.includes(r)||F.push(r):w?(d[c]=[r],y(c)&&(p[c]=d[c])):(c.value=[r],n.k&&(d[n.k]=c.value))}else w?(d[c]=o,y(c)&&(p[c]=o)):N&&(c.value=o,n.k&&(d[n.k]=o))};o?(k.id=-1,qn(k,t)):k()}}}Jd().requestIdleCallback;Jd().cancelIdleCallback;const wc=n=>!!n.type.__asyncLoader,Pb=n=>n.type.__isKeepAlive;function mN(n,e){Nb(n,"a",e)}function gN(n,e){Nb(n,"da",e)}function Nb(n,e,t=vn){const s=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(rf(e,s,t),t){let i=t.parent;for(;i&&i.parent;)Pb(i.parent.vnode)&&vN(s,e,t,i),i=i.parent}}function vN(n,e,t,s){const i=rf(e,n,s,!0);Pm(()=>{mm(s[e],i)},t)}function rf(n,e,t=vn,s=!1){if(t){const i=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{Br();const a=pu(t),c=ui(e,t,n,o);return a(),Hr(),c});return s?i.unshift(r):i.push(r),r}}const qi=n=>(e,t=vn)=>{(!Hc||n==="sp")&&rf(n,(...s)=>e(...s),t)},yN=qi("bm"),of=qi("m"),EN=qi("bu"),TN=qi("u"),wN=qi("bum"),Pm=qi("um"),bN=qi("sp"),IN=qi("rtg"),AN=qi("rtc");function CN(n,e=vn){rf("ec",n,e)}const SN="components";function RN(n,e){return NN(SN,n,!0,e)||n}const PN=Symbol.for("v-ndc");function NN(n,e,t=!0,s=!1){const i=Qn||vn;if(i){const r=i.type;{const a=mO(r,!1);if(a&&(a===e||a===fs(e)||a===Xd(fs(e))))return r}const o=_y(i[n]||r[n],e)||_y(i.appContext[n],e);return!o&&s?r:o}}function _y(n,e){return n&&(n[e]||n[fs(e)]||n[Xd(fs(e))])}function my(n,e,t,s){let i;const r=t,o=Ne(n);if(o||Ht(n)){const a=o&&$a(n);let c=!1;a&&(c=!hs(n),n=tf(n)),i=new Array(n.length);for(let h=0,d=n.length;h<d;h++)i[h]=e(c?_n(n[h]):n[h],h,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,r)}else if(bt(n))if(n[Symbol.iterator])i=Array.from(n,(a,c)=>e(a,c,void 0,r));else{const a=Object.keys(n);i=new Array(a.length);for(let c=0,h=a.length;c<h;c++){const d=a[c];i[c]=e(n[d],d,c,r)}}else i=[];return i}const f_=n=>n?Xb(n)?cf(n):f_(n.parent):null,bc=En(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>f_(n.parent),$root:n=>f_(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>kb(n),$forceUpdate:n=>n.f||(n.f=()=>{Sm(n.update)}),$nextTick:n=>n.n||(n.n=Cm.bind(n.proxy)),$watch:n=>XN.bind(n)}),Ep=(n,e)=>n!==mt&&!n.__isScriptSetup&&at(n,e),ON={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:c}=n;let h;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return s[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(Ep(s,e))return o[e]=1,s[e];if(i!==mt&&at(i,e))return o[e]=2,i[e];if((h=n.propsOptions[0])&&at(h,e))return o[e]=3,r[e];if(t!==mt&&at(t,e))return o[e]=4,t[e];p_&&(o[e]=0)}}const d=bc[e];let p,g;if(d)return e==="$attrs"&&pn(n.attrs,"get",""),d(n);if((p=a.__cssModules)&&(p=p[e]))return p;if(t!==mt&&at(t,e))return o[e]=4,t[e];if(g=c.config.globalProperties,at(g,e))return g[e]},set({_:n},e,t){const{data:s,setupState:i,ctx:r}=n;return Ep(i,e)?(i[e]=t,!0):s!==mt&&at(s,e)?(s[e]=t,!0):at(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!t[o]||n!==mt&&at(n,o)||Ep(e,o)||(a=r[0])&&at(a,o)||at(s,o)||at(bc,o)||at(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:at(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function gy(n){return Ne(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let p_=!0;function kN(n){const e=kb(n),t=n.proxy,s=n.ctx;p_=!1,e.beforeCreate&&vy(e.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:a,provide:c,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:y,updated:w,activated:N,deactivated:k,beforeDestroy:F,beforeUnmount:$,destroyed:K,unmounted:H,render:ce,renderTracked:ae,renderTriggered:R,errorCaptured:b,serverPrefetch:A,expose:P,inheritAttrs:O,components:x,directives:C,filters:vt}=e;if(h&&DN(h,s,null),o)for(const Ae in o){const Ve=o[Ae];Fe(Ve)&&(s[Ae]=Ve.bind(t))}if(i){const Ae=i.call(t,t);bt(Ae)&&(n.data=nf(Ae))}if(p_=!0,r)for(const Ae in r){const Ve=r[Ae],Rt=Fe(Ve)?Ve.bind(t,t):Fe(Ve.get)?Ve.get.bind(t,t):ni,G=!Fe(Ve)&&Fe(Ve.set)?Ve.set.bind(t):ni,$t=Rs({get:Rt,set:G});Object.defineProperty(s,Ae,{enumerable:!0,configurable:!0,get:()=>$t.value,set:Ze=>$t.value=Ze})}if(a)for(const Ae in a)Ob(a[Ae],s,t,Ae);if(c){const Ae=Fe(c)?c.call(t):c;Reflect.ownKeys(Ae).forEach(Ve=>{xh(Ve,Ae[Ve])})}d&&vy(d,n,"c");function qe(Ae,Ve){Ne(Ve)?Ve.forEach(Rt=>Ae(Rt.bind(t))):Ve&&Ae(Ve.bind(t))}if(qe(yN,p),qe(of,g),qe(EN,y),qe(TN,w),qe(mN,N),qe(gN,k),qe(CN,b),qe(AN,ae),qe(IN,R),qe(wN,$),qe(Pm,H),qe(bN,A),Ne(P))if(P.length){const Ae=n.exposed||(n.exposed={});P.forEach(Ve=>{Object.defineProperty(Ae,Ve,{get:()=>t[Ve],set:Rt=>t[Ve]=Rt})})}else n.exposed||(n.exposed={});ce&&n.render===ni&&(n.render=ce),O!=null&&(n.inheritAttrs=O),x&&(n.components=x),C&&(n.directives=C),A&&Rb(n)}function DN(n,e,t=ni){Ne(n)&&(n=__(n));for(const s in n){const i=n[s];let r;bt(i)?"default"in i?r=Ds(i.from||s,i.default,!0):r=Ds(i.from||s):r=Ds(i),yn(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function vy(n,e,t){ui(Ne(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function Ob(n,e,t,s){let i=s.includes(".")?Kb(t,s):()=>t[s];if(Ht(n)){const r=e[n];Fe(r)&&Lh(i,r)}else if(Fe(n))Lh(i,n.bind(t));else if(bt(n))if(Ne(n))n.forEach(r=>Ob(r,e,t,s));else{const r=Fe(n.handler)?n.handler.bind(t):e[n.handler];Fe(r)&&Lh(i,r,n)}}function kb(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let c;return a?c=a:!i.length&&!t&&!s?c=e:(c={},i.length&&i.forEach(h=>rd(c,h,o,!0)),rd(c,e,o)),bt(e)&&r.set(e,c),c}function rd(n,e,t,s=!1){const{mixins:i,extends:r}=e;r&&rd(n,r,t,!0),i&&i.forEach(o=>rd(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=xN[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const xN={data:yy,props:Ey,emits:Ey,methods:hc,computed:hc,beforeCreate:An,created:An,beforeMount:An,mounted:An,beforeUpdate:An,updated:An,beforeDestroy:An,beforeUnmount:An,destroyed:An,unmounted:An,activated:An,deactivated:An,errorCaptured:An,serverPrefetch:An,components:hc,directives:hc,watch:MN,provide:yy,inject:LN};function yy(n,e){return e?n?function(){return En(Fe(n)?n.call(this,this):n,Fe(e)?e.call(this,this):e)}:e:n}function LN(n,e){return hc(__(n),__(e))}function __(n){if(Ne(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function An(n,e){return n?[...new Set([].concat(n,e))]:e}function hc(n,e){return n?En(Object.create(null),n,e):e}function Ey(n,e){return n?Ne(n)&&Ne(e)?[...new Set([...n,...e])]:En(Object.create(null),gy(n),gy(e??{})):e}function MN(n,e){if(!n)return e;if(!e)return n;const t=En(Object.create(null),n);for(const s in e)t[s]=An(n[s],e[s]);return t}function Db(){return{app:null,config:{isNativeTag:bP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VN=0;function FN(n,e){return function(s,i=null){Fe(s)||(s=En({},s)),i!=null&&!bt(i)&&(i=null);const r=Db(),o=new WeakSet,a=[];let c=!1;const h=r.app={_uid:VN++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:vO,get config(){return r.config},set config(d){},use(d,...p){return o.has(d)||(d&&Fe(d.install)?(o.add(d),d.install(h,...p)):Fe(d)&&(o.add(d),d(h,...p))),h},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),h},component(d,p){return p?(r.components[d]=p,h):r.components[d]},directive(d,p){return p?(r.directives[d]=p,h):r.directives[d]},mount(d,p,g){if(!c){const y=h._ceVNode||Xn(s,i);return y.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),n(y,d,g),c=!0,h._container=d,d.__vue_app__=h,cf(y.component)}},onUnmount(d){a.push(d)},unmount(){c&&(ui(a,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(d,p){return r.provides[d]=p,h},runWithContext(d){const p=Ba;Ba=h;try{return d()}finally{Ba=p}}};return h}}let Ba=null;function xh(n,e){if(vn){let t=vn.provides;const s=vn.parent&&vn.parent.provides;s===t&&(t=vn.provides=Object.create(s)),t[n]=e}}function Ds(n,e,t=!1){const s=vn||Qn;if(s||Ba){const i=Ba?Ba._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Fe(e)?e.call(s&&s.proxy):e}}const xb={},Lb=()=>Object.create(xb),Mb=n=>Object.getPrototypeOf(n)===xb;function $N(n,e,t,s=!1){const i={},r=Lb();n.propsDefaults=Object.create(null),Vb(n,e,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=s?i:vb(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function UN(n,e,t,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,a=ot(i),[c]=n.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(af(n.emitsOptions,g))continue;const y=e[g];if(c)if(at(r,g))y!==r[g]&&(r[g]=y,h=!0);else{const w=fs(g);i[w]=m_(c,a,w,y,n,!1)}else y!==r[g]&&(r[g]=y,h=!0)}}}else{Vb(n,e,i,r)&&(h=!0);let d;for(const p in a)(!e||!at(e,p)&&((d=Ko(p))===p||!at(e,d)))&&(c?t&&(t[p]!==void 0||t[d]!==void 0)&&(i[p]=m_(c,a,p,void 0,n,!0)):delete i[p]);if(r!==a)for(const p in r)(!e||!at(e,p))&&(delete r[p],h=!0)}h&&Ri(n.attrs,"set","")}function Vb(n,e,t,s){const[i,r]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(yc(c))continue;const h=e[c];let d;i&&at(i,d=fs(c))?!r||!r.includes(d)?t[d]=h:(a||(a={}))[d]=h:af(n.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=ot(t),h=a||mt;for(let d=0;d<r.length;d++){const p=r[d];t[p]=m_(i,c,p,h[p],n,!at(h,p))}}return o}function m_(n,e,t,s,i,r){const o=n[t];if(o!=null){const a=at(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Fe(c)){const{propsDefaults:h}=i;if(t in h)s=h[t];else{const d=pu(i);s=h[t]=c.call(null,e),d()}}else s=c;i.ce&&i.ce._setProp(t,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Ko(t))&&(s=!0))}return s}const jN=new WeakMap;function Fb(n,e,t=!1){const s=t?jN:e.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},a=[];let c=!1;if(!Fe(n)){const d=p=>{c=!0;const[g,y]=Fb(p,e,!0);En(o,g),y&&a.push(...y)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!r&&!c)return bt(n)&&s.set(n,Va),Va;if(Ne(r))for(let d=0;d<r.length;d++){const p=fs(r[d]);Ty(p)&&(o[p]=mt)}else if(r)for(const d in r){const p=fs(d);if(Ty(p)){const g=r[d],y=o[p]=Ne(g)||Fe(g)?{type:g}:En({},g),w=y.type;let N=!1,k=!0;if(Ne(w))for(let F=0;F<w.length;++F){const $=w[F],K=Fe($)&&$.name;if(K==="Boolean"){N=!0;break}else K==="String"&&(k=!1)}else N=Fe(w)&&w.name==="Boolean";y[0]=N,y[1]=k,(N||at(y,"default"))&&a.push(p)}}const h=[o,a];return bt(n)&&s.set(n,h),h}function Ty(n){return n[0]!=="$"&&!yc(n)}const $b=n=>n[0]==="_"||n==="$stable",Nm=n=>Ne(n)?n.map(ei):[ei(n)],BN=(n,e,t)=>{if(e._n)return e;const s=fN((...i)=>Nm(e(...i)),t);return s._c=!1,s},Ub=(n,e,t)=>{const s=n._ctx;for(const i in n){if($b(i))continue;const r=n[i];if(Fe(r))e[i]=BN(i,r,s);else if(r!=null){const o=Nm(r);e[i]=()=>o}}},jb=(n,e)=>{const t=Nm(e);n.slots.default=()=>t},Bb=(n,e,t)=>{for(const s in e)(t||s!=="_")&&(n[s]=e[s])},HN=(n,e,t)=>{const s=n.slots=Lb();if(n.vnode.shapeFlag&32){const i=e._;i?(Bb(s,e,t),t&&eb(s,"_",i,!0)):Ub(e,s)}else e&&jb(n,e)},WN=(n,e,t)=>{const{vnode:s,slots:i}=n;let r=!0,o=mt;if(s.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:Bb(i,e,t):(r=!e.$stable,Ub(e,i)),o=e}else e&&(jb(n,e),o={default:1});if(r)for(const a in i)!$b(a)&&o[a]==null&&delete i[a]},qn=iO;function qN(n){return KN(n)}function KN(n,e){const t=Jd();t.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:y=ni,insertStaticContent:w}=n,N=(I,S,M,q=null,z=null,Q=null,le=void 0,se=null,te=!!S.dynamicChildren)=>{if(I===S)return;I&&!nc(I,S)&&(q=W(I),Ze(I,z,Q,!0),I=null),S.patchFlag===-2&&(te=!1,S.dynamicChildren=null);const{type:J,ref:Ee,shapeFlag:ue}=S;switch(J){case lf:k(I,S,M,q);break;case ko:F(I,S,M,q);break;case wp:I==null&&$(S,M,q,le);break;case Cs:x(I,S,M,q,z,Q,le,se,te);break;default:ue&1?ce(I,S,M,q,z,Q,le,se,te):ue&6?C(I,S,M,q,z,Q,le,se,te):(ue&64||ue&128)&&J.process(I,S,M,q,z,Q,le,se,te,fe)}Ee!=null&&z&&id(Ee,I&&I.ref,Q,S||I,!S)},k=(I,S,M,q)=>{if(I==null)s(S.el=a(S.children),M,q);else{const z=S.el=I.el;S.children!==I.children&&h(z,S.children)}},F=(I,S,M,q)=>{I==null?s(S.el=c(S.children||""),M,q):S.el=I.el},$=(I,S,M,q)=>{[I.el,I.anchor]=w(I.children,S,M,q,I.el,I.anchor)},K=({el:I,anchor:S},M,q)=>{let z;for(;I&&I!==S;)z=g(I),s(I,M,q),I=z;s(S,M,q)},H=({el:I,anchor:S})=>{let M;for(;I&&I!==S;)M=g(I),i(I),I=M;i(S)},ce=(I,S,M,q,z,Q,le,se,te)=>{S.type==="svg"?le="svg":S.type==="math"&&(le="mathml"),I==null?ae(S,M,q,z,Q,le,se,te):A(I,S,z,Q,le,se,te)},ae=(I,S,M,q,z,Q,le,se)=>{let te,J;const{props:Ee,shapeFlag:ue,transition:_e,dirs:ve}=I;if(te=I.el=o(I.type,Q,Ee&&Ee.is,Ee),ue&8?d(te,I.children):ue&16&&b(I.children,te,null,q,z,Tp(I,Q),le,se),ve&&go(I,null,q,"created"),R(te,I,I.scopeId,le,q),Ee){for(const Ie in Ee)Ie!=="value"&&!yc(Ie)&&r(te,Ie,null,Ee[Ie],Q,q);"value"in Ee&&r(te,"value",null,Ee.value,Q),(J=Ee.onVnodeBeforeMount)&&Xs(J,q,I)}ve&&go(I,null,q,"beforeMount");const ye=zN(z,_e);ye&&_e.beforeEnter(te),s(te,S,M),((J=Ee&&Ee.onVnodeMounted)||ye||ve)&&qn(()=>{J&&Xs(J,q,I),ye&&_e.enter(te),ve&&go(I,null,q,"mounted")},z)},R=(I,S,M,q,z)=>{if(M&&y(I,M),q)for(let Q=0;Q<q.length;Q++)y(I,q[Q]);if(z){let Q=z.subTree;if(S===Q||Gb(Q.type)&&(Q.ssContent===S||Q.ssFallback===S)){const le=z.vnode;R(I,le,le.scopeId,le.slotScopeIds,z.parent)}}},b=(I,S,M,q,z,Q,le,se,te=0)=>{for(let J=te;J<I.length;J++){const Ee=I[J]=se?pr(I[J]):ei(I[J]);N(null,Ee,S,M,q,z,Q,le,se)}},A=(I,S,M,q,z,Q,le)=>{const se=S.el=I.el;let{patchFlag:te,dynamicChildren:J,dirs:Ee}=S;te|=I.patchFlag&16;const ue=I.props||mt,_e=S.props||mt;let ve;if(M&&vo(M,!1),(ve=_e.onVnodeBeforeUpdate)&&Xs(ve,M,S,I),Ee&&go(S,I,M,"beforeUpdate"),M&&vo(M,!0),(ue.innerHTML&&_e.innerHTML==null||ue.textContent&&_e.textContent==null)&&d(se,""),J?P(I.dynamicChildren,J,se,M,q,Tp(S,z),Q):le||Ve(I,S,se,null,M,q,Tp(S,z),Q,!1),te>0){if(te&16)O(se,ue,_e,M,z);else if(te&2&&ue.class!==_e.class&&r(se,"class",null,_e.class,z),te&4&&r(se,"style",ue.style,_e.style,z),te&8){const ye=S.dynamicProps;for(let Ie=0;Ie<ye.length;Ie++){const De=ye[Ie],Ot=ue[De],Dt=_e[De];(Dt!==Ot||De==="value")&&r(se,De,Ot,Dt,z,M)}}te&1&&I.children!==S.children&&d(se,S.children)}else!le&&J==null&&O(se,ue,_e,M,z);((ve=_e.onVnodeUpdated)||Ee)&&qn(()=>{ve&&Xs(ve,M,S,I),Ee&&go(S,I,M,"updated")},q)},P=(I,S,M,q,z,Q,le)=>{for(let se=0;se<S.length;se++){const te=I[se],J=S[se],Ee=te.el&&(te.type===Cs||!nc(te,J)||te.shapeFlag&70)?p(te.el):M;N(te,J,Ee,null,q,z,Q,le,!0)}},O=(I,S,M,q,z)=>{if(S!==M){if(S!==mt)for(const Q in S)!yc(Q)&&!(Q in M)&&r(I,Q,S[Q],null,z,q);for(const Q in M){if(yc(Q))continue;const le=M[Q],se=S[Q];le!==se&&Q!=="value"&&r(I,Q,se,le,z,q)}"value"in M&&r(I,"value",S.value,M.value,z)}},x=(I,S,M,q,z,Q,le,se,te)=>{const J=S.el=I?I.el:a(""),Ee=S.anchor=I?I.anchor:a("");let{patchFlag:ue,dynamicChildren:_e,slotScopeIds:ve}=S;ve&&(se=se?se.concat(ve):ve),I==null?(s(J,M,q),s(Ee,M,q),b(S.children||[],M,Ee,z,Q,le,se,te)):ue>0&&ue&64&&_e&&I.dynamicChildren?(P(I.dynamicChildren,_e,M,z,Q,le,se),(S.key!=null||z&&S===z.subTree)&&Hb(I,S,!0)):Ve(I,S,M,Ee,z,Q,le,se,te)},C=(I,S,M,q,z,Q,le,se,te)=>{S.slotScopeIds=se,I==null?S.shapeFlag&512?z.ctx.activate(S,M,q,le,te):vt(S,M,q,z,Q,le,te):Nt(I,S,te)},vt=(I,S,M,q,z,Q,le)=>{const se=I.component=hO(I,q,z);if(Pb(I)&&(se.ctx.renderer=fe),dO(se,!1,le),se.asyncDep){if(z&&z.registerDep(se,qe,le),!I.el){const te=se.subTree=Xn(ko);F(null,te,S,M)}}else qe(se,I,S,M,z,Q,le)},Nt=(I,S,M)=>{const q=S.component=I.component;if(nO(I,S,M))if(q.asyncDep&&!q.asyncResolved){Ae(q,S,M);return}else q.next=S,q.update();else S.el=I.el,q.vnode=S},qe=(I,S,M,q,z,Q,le)=>{const se=()=>{if(I.isMounted){let{next:ue,bu:_e,u:ve,parent:ye,vnode:Ie}=I;{const Ut=Wb(I);if(Ut){ue&&(ue.el=Ie.el,Ae(I,ue,le)),Ut.asyncDep.then(()=>{I.isUnmounted||se()});return}}let De=ue,Ot;vo(I,!1),ue?(ue.el=Ie.el,Ae(I,ue,le)):ue=Ie,_e&&Dh(_e),(Ot=ue.props&&ue.props.onVnodeBeforeUpdate)&&Xs(Ot,ye,ue,Ie),vo(I,!0);const Dt=by(I),On=I.subTree;I.subTree=Dt,N(On,Dt,p(On.el),W(On),I,z,Q),ue.el=Dt.el,De===null&&sO(I,Dt.el),ve&&qn(ve,z),(Ot=ue.props&&ue.props.onVnodeUpdated)&&qn(()=>Xs(Ot,ye,ue,Ie),z)}else{let ue;const{el:_e,props:ve}=S,{bm:ye,m:Ie,parent:De,root:Ot,type:Dt}=I,On=wc(S);vo(I,!1),ye&&Dh(ye),!On&&(ue=ve&&ve.onVnodeBeforeMount)&&Xs(ue,De,S),vo(I,!0);{Ot.ce&&Ot.ce._injectChildStyle(Dt);const Ut=I.subTree=by(I);N(null,Ut,M,q,I,z,Q),S.el=Ut.el}if(Ie&&qn(Ie,z),!On&&(ue=ve&&ve.onVnodeMounted)){const Ut=S;qn(()=>Xs(ue,De,Ut),z)}(S.shapeFlag&256||De&&wc(De.vnode)&&De.vnode.shapeFlag&256)&&I.a&&qn(I.a,z),I.isMounted=!0,S=M=q=null}};I.scope.on();const te=I.effect=new ib(se);I.scope.off();const J=I.update=te.run.bind(te),Ee=I.job=te.runIfDirty.bind(te);Ee.i=I,Ee.id=I.uid,te.scheduler=()=>Sm(Ee),vo(I,!0),J()},Ae=(I,S,M)=>{S.component=I;const q=I.vnode.props;I.vnode=S,I.next=null,UN(I,S.props,q,M),WN(I,S.children,M),Br(),py(I),Hr()},Ve=(I,S,M,q,z,Q,le,se,te=!1)=>{const J=I&&I.children,Ee=I?I.shapeFlag:0,ue=S.children,{patchFlag:_e,shapeFlag:ve}=S;if(_e>0){if(_e&128){G(J,ue,M,q,z,Q,le,se,te);return}else if(_e&256){Rt(J,ue,M,q,z,Q,le,se,te);return}}ve&8?(Ee&16&&tt(J,z,Q),ue!==J&&d(M,ue)):Ee&16?ve&16?G(J,ue,M,q,z,Q,le,se,te):tt(J,z,Q,!0):(Ee&8&&d(M,""),ve&16&&b(ue,M,q,z,Q,le,se,te))},Rt=(I,S,M,q,z,Q,le,se,te)=>{I=I||Va,S=S||Va;const J=I.length,Ee=S.length,ue=Math.min(J,Ee);let _e;for(_e=0;_e<ue;_e++){const ve=S[_e]=te?pr(S[_e]):ei(S[_e]);N(I[_e],ve,M,null,z,Q,le,se,te)}J>Ee?tt(I,z,Q,!0,!1,ue):b(S,M,q,z,Q,le,se,te,ue)},G=(I,S,M,q,z,Q,le,se,te)=>{let J=0;const Ee=S.length;let ue=I.length-1,_e=Ee-1;for(;J<=ue&&J<=_e;){const ve=I[J],ye=S[J]=te?pr(S[J]):ei(S[J]);if(nc(ve,ye))N(ve,ye,M,null,z,Q,le,se,te);else break;J++}for(;J<=ue&&J<=_e;){const ve=I[ue],ye=S[_e]=te?pr(S[_e]):ei(S[_e]);if(nc(ve,ye))N(ve,ye,M,null,z,Q,le,se,te);else break;ue--,_e--}if(J>ue){if(J<=_e){const ve=_e+1,ye=ve<Ee?S[ve].el:q;for(;J<=_e;)N(null,S[J]=te?pr(S[J]):ei(S[J]),M,ye,z,Q,le,se,te),J++}}else if(J>_e)for(;J<=ue;)Ze(I[J],z,Q,!0),J++;else{const ve=J,ye=J,Ie=new Map;for(J=ye;J<=_e;J++){const Wt=S[J]=te?pr(S[J]):ei(S[J]);Wt.key!=null&&Ie.set(Wt.key,J)}let De,Ot=0;const Dt=_e-ye+1;let On=!1,Ut=0;const js=new Array(Dt);for(J=0;J<Dt;J++)js[J]=0;for(J=ve;J<=ue;J++){const Wt=I[J];if(Ot>=Dt){Ze(Wt,z,Q,!0);continue}let kn;if(Wt.key!=null)kn=Ie.get(Wt.key);else for(De=ye;De<=_e;De++)if(js[De-ye]===0&&nc(Wt,S[De])){kn=De;break}kn===void 0?Ze(Wt,z,Q,!0):(js[kn-ye]=J+1,kn>=Ut?Ut=kn:On=!0,N(Wt,S[kn],M,null,z,Q,le,se,te),Ot++)}const Xr=On?GN(js):Va;for(De=Xr.length-1,J=Dt-1;J>=0;J--){const Wt=ye+J,kn=S[Wt],ta=Wt+1<Ee?S[Wt+1].el:q;js[J]===0?N(null,kn,M,ta,z,Q,le,se,te):On&&(De<0||J!==Xr[De]?$t(kn,M,ta,2):De--)}}},$t=(I,S,M,q,z=null)=>{const{el:Q,type:le,transition:se,children:te,shapeFlag:J}=I;if(J&6){$t(I.component.subTree,S,M,q);return}if(J&128){I.suspense.move(S,M,q);return}if(J&64){le.move(I,S,M,fe);return}if(le===Cs){s(Q,S,M);for(let ue=0;ue<te.length;ue++)$t(te[ue],S,M,q);s(I.anchor,S,M);return}if(le===wp){K(I,S,M);return}if(q!==2&&J&1&&se)if(q===0)se.beforeEnter(Q),s(Q,S,M),qn(()=>se.enter(Q),z);else{const{leave:ue,delayLeave:_e,afterLeave:ve}=se,ye=()=>s(Q,S,M),Ie=()=>{ue(Q,()=>{ye(),ve&&ve()})};_e?_e(Q,ye,Ie):Ie()}else s(Q,S,M)},Ze=(I,S,M,q=!1,z=!1)=>{const{type:Q,props:le,ref:se,children:te,dynamicChildren:J,shapeFlag:Ee,patchFlag:ue,dirs:_e,cacheIndex:ve}=I;if(ue===-2&&(z=!1),se!=null&&id(se,null,M,I,!0),ve!=null&&(S.renderCache[ve]=void 0),Ee&256){S.ctx.deactivate(I);return}const ye=Ee&1&&_e,Ie=!wc(I);let De;if(Ie&&(De=le&&le.onVnodeBeforeUnmount)&&Xs(De,S,I),Ee&6)At(I.component,M,q);else{if(Ee&128){I.suspense.unmount(M,q);return}ye&&go(I,null,S,"beforeUnmount"),Ee&64?I.type.remove(I,S,M,fe,q):J&&!J.hasOnce&&(Q!==Cs||ue>0&&ue&64)?tt(J,S,M,!1,!0):(Q===Cs&&ue&384||!z&&Ee&16)&&tt(te,S,M),q&&et(I)}(Ie&&(De=le&&le.onVnodeUnmounted)||ye)&&qn(()=>{De&&Xs(De,S,I),ye&&go(I,null,S,"unmounted")},M)},et=I=>{const{type:S,el:M,anchor:q,transition:z}=I;if(S===Cs){It(M,q);return}if(S===wp){H(I);return}const Q=()=>{i(M),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(I.shapeFlag&1&&z&&!z.persisted){const{leave:le,delayLeave:se}=z,te=()=>le(M,Q);se?se(I.el,Q,te):te()}else Q()},It=(I,S)=>{let M;for(;I!==S;)M=g(I),i(I),I=M;i(S)},At=(I,S,M)=>{const{bum:q,scope:z,job:Q,subTree:le,um:se,m:te,a:J}=I;wy(te),wy(J),q&&Dh(q),z.stop(),Q&&(Q.flags|=8,Ze(le,I,S,M)),se&&qn(se,S),qn(()=>{I.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},tt=(I,S,M,q=!1,z=!1,Q=0)=>{for(let le=Q;le<I.length;le++)Ze(I[le],S,M,q,z)},W=I=>{if(I.shapeFlag&6)return W(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const S=g(I.anchor||I.el),M=S&&S[pN];return M?g(M):S};let B=!1;const ie=(I,S,M)=>{I==null?S._vnode&&Ze(S._vnode,null,null,!0):N(S._vnode||null,I,S,null,null,null,M),S._vnode=I,B||(B=!0,py(),Ib(),B=!1)},fe={p:N,um:Ze,m:$t,r:et,mt:vt,mc:b,pc:Ve,pbc:P,n:W,o:n};return{render:ie,hydrate:void 0,createApp:FN(ie)}}function Tp({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function vo({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function zN(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Hb(n,e,t=!1){const s=n.children,i=e.children;if(Ne(s)&&Ne(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=pr(i[r]),a.el=o.el),!t&&a.patchFlag!==-2&&Hb(o,a)),a.type===lf&&(a.el=o.el)}}function GN(n){const e=n.slice(),t=[0];let s,i,r,o,a;const c=n.length;for(s=0;s<c;s++){const h=n[s];if(h!==0){if(i=t[t.length-1],n[i]<h){e[s]=i,t.push(s);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<h?r=a+1:o=a;h<n[t[r]]&&(r>0&&(e[s]=t[r-1]),t[r]=s)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function Wb(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Wb(e)}function wy(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const QN=Symbol.for("v-scx"),YN=()=>Ds(QN);function Lh(n,e,t){return qb(n,e,t)}function qb(n,e,t=mt){const{immediate:s,deep:i,flush:r,once:o}=t,a=En({},t),c=e&&s||!e&&r!=="post";let h;if(Hc){if(r==="sync"){const y=YN();h=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=ni,y.resume=ni,y.pause=ni,y}}const d=vn;a.call=(y,w,N)=>ui(y,d,w,N);let p=!1;r==="post"?a.scheduler=y=>{qn(y,d&&d.suspense)}:r!=="sync"&&(p=!0,a.scheduler=(y,w)=>{w?y():Sm(y)}),a.augmentJob=y=>{e&&(y.flags|=4),p&&(y.flags|=2,d&&(y.id=d.uid,y.i=d))};const g=cN(n,e,a);return Hc&&(h?h.push(g):c&&g()),g}function XN(n,e,t){const s=this.proxy,i=Ht(n)?n.includes(".")?Kb(s,n):()=>s[n]:n.bind(s,s);let r;Fe(e)?r=e:(r=e.handler,t=e);const o=pu(this),a=qb(i,r.bind(s),t);return o(),a}function Kb(n,e){const t=e.split(".");return()=>{let s=n;for(let i=0;i<t.length&&s;i++)s=s[t[i]];return s}}const JN=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${fs(e)}Modifiers`]||n[`${Ko(e)}Modifiers`];function ZN(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||mt;let i=t;const r=e.startsWith("update:"),o=r&&JN(s,e.slice(7));o&&(o.trim&&(i=t.map(d=>Ht(d)?d.trim():d)),o.number&&(i=t.map(ed)));let a,c=s[a=_p(e)]||s[a=_p(fs(e))];!c&&r&&(c=s[a=_p(Ko(e))]),c&&ui(c,n,6,i);const h=s[a+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,ui(h,n,6,i)}}function zb(n,e,t=!1){const s=e.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},a=!1;if(!Fe(n)){const c=h=>{const d=zb(h,e,!0);d&&(a=!0,En(o,d))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!r&&!a?(bt(n)&&s.set(n,null),null):(Ne(r)?r.forEach(c=>o[c]=null):En(o,r),bt(n)&&s.set(n,o),o)}function af(n,e){return!n||!Gd(e)?!1:(e=e.slice(2).replace(/Once$/,""),at(n,e[0].toLowerCase()+e.slice(1))||at(n,Ko(e))||at(n,e))}function by(n){const{type:e,vnode:t,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:c,render:h,renderCache:d,props:p,data:g,setupState:y,ctx:w,inheritAttrs:N}=n,k=sd(n);let F,$;try{if(t.shapeFlag&4){const H=i||s,ce=H;F=ei(h.call(ce,H,d,p,y,g,w)),$=a}else{const H=e;F=ei(H.length>1?H(p,{attrs:a,slots:o,emit:c}):H(p,null)),$=e.props?a:eO(a)}}catch(H){Ic.length=0,sf(H,n,1),F=Xn(ko)}let K=F;if($&&N!==!1){const H=Object.keys($),{shapeFlag:ce}=K;H.length&&ce&7&&(r&&H.some(_m)&&($=tO($,r)),K=Ya(K,$,!1,!0))}return t.dirs&&(K=Ya(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(t.dirs):t.dirs),t.transition&&Rm(K,t.transition),F=K,sd(k),F}const eO=n=>{let e;for(const t in n)(t==="class"||t==="style"||Gd(t))&&((e||(e={}))[t]=n[t]);return e},tO=(n,e)=>{const t={};for(const s in n)(!_m(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function nO(n,e,t){const{props:s,children:i,component:r}=n,{props:o,children:a,patchFlag:c}=e,h=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?Iy(s,o,h):!!o;if(c&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(o[g]!==s[g]&&!af(h,g))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Iy(s,o,h):!0:!!o;return!1}function Iy(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==n[r]&&!af(t,r))return!0}return!1}function sO({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const Gb=n=>n.__isSuspense;function iO(n,e){e&&e.pendingBranch?Ne(n)?e.effects.push(...n):e.effects.push(n):dN(n)}const Cs=Symbol.for("v-fgt"),lf=Symbol.for("v-txt"),ko=Symbol.for("v-cmt"),wp=Symbol.for("v-stc"),Ic=[];let Yn=null;function Fn(n=!1){Ic.push(Yn=n?null:[])}function rO(){Ic.pop(),Yn=Ic[Ic.length-1]||null}let Bc=1;function Ay(n,e=!1){Bc+=n,n<0&&Yn&&e&&(Yn.hasOnce=!0)}function Qb(n){return n.dynamicChildren=Bc>0?Yn||Va:null,rO(),Bc>0&&Yn&&Yn.push(n),n}function Ss(n,e,t,s,i,r){return Qb(ge(n,e,t,s,i,r,!0))}function g_(n,e,t,s,i){return Qb(Xn(n,e,t,s,i,!0))}function od(n){return n?n.__v_isVNode===!0:!1}function nc(n,e){return n.type===e.type&&n.key===e.key}const Yb=({key:n})=>n??null,Mh=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ht(n)||yn(n)||Fe(n)?{i:Qn,r:n,k:e,f:!!t}:n:null);function ge(n,e=null,t=null,s=0,i=null,r=n===Cs?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Yb(e),ref:e&&Mh(e),scopeId:Cb,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Qn};return a?(Om(c,t),r&128&&n.normalize(c)):t&&(c.shapeFlag|=Ht(t)?8:16),Bc>0&&!o&&Yn&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Yn.push(c),c}const Xn=oO;function oO(n,e=null,t=null,s=0,i=null,r=!1){if((!n||n===PN)&&(n=ko),od(n)){const a=Ya(n,e,!0);return t&&Om(a,t),Bc>0&&!r&&Yn&&(a.shapeFlag&6?Yn[Yn.indexOf(n)]=a:Yn.push(a)),a.patchFlag=-2,a}if(gO(n)&&(n=n.__vccOpts),e){e=aO(e);let{class:a,style:c}=e;a&&!Ht(a)&&(e.class=Zd(a)),bt(c)&&(Am(c)&&!Ne(c)&&(c=En({},c)),e.style=vm(c))}const o=Ht(n)?1:Gb(n)?128:_N(n)?64:bt(n)?4:Fe(n)?2:0;return ge(n,e,t,s,i,o,r,!0)}function aO(n){return n?Am(n)||Mb(n)?En({},n):n:null}function Ya(n,e,t=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:c}=n,h=e?lO(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&Yb(h),ref:e&&e.ref?t&&r?Ne(r)?r.concat(Mh(e)):[r,Mh(e)]:Mh(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Cs?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Ya(n.ssContent),ssFallback:n.ssFallback&&Ya(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&Rm(d,c.clone(d)),d}function bo(n=" ",e=0){return Xn(lf,null,n,e)}function bp(n="",e=!1){return e?(Fn(),g_(ko,null,n)):Xn(ko,null,n)}function ei(n){return n==null||typeof n=="boolean"?Xn(ko):Ne(n)?Xn(Cs,null,n.slice()):od(n)?pr(n):Xn(lf,null,String(n))}function pr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Ya(n)}function Om(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(Ne(e))t=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Om(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!Mb(e)?e._ctx=Qn:i===3&&Qn&&(Qn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Fe(e)?(e={default:e,_ctx:Qn},t=32):(e=String(e),s&64?(t=16,e=[bo(e)]):t=8);n.children=e,n.shapeFlag|=t}function lO(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=Zd([e.class,s.class]));else if(i==="style")e.style=vm([e.style,s.style]);else if(Gd(i)){const r=e[i],o=s[i];o&&r!==o&&!(Ne(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function Xs(n,e,t,s=null){ui(n,e,7,[t,s])}const cO=Db();let uO=0;function hO(n,e,t){const s=n.type,i=(e?e.appContext:n.appContext)||cO,r={uid:uO++,vnode:n,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new MP(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fb(s,i),emitsOptions:zb(s,i),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:s.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=ZN.bind(null,r),n.ce&&n.ce(r),r}let vn=null,ad,v_;{const n=Jd(),e=(t,s)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};ad=e("__VUE_INSTANCE_SETTERS__",t=>vn=t),v_=e("__VUE_SSR_SETTERS__",t=>Hc=t)}const pu=n=>{const e=vn;return ad(n),n.scope.on(),()=>{n.scope.off(),ad(e)}},Cy=()=>{vn&&vn.scope.off(),ad(null)};function Xb(n){return n.vnode.shapeFlag&4}let Hc=!1;function dO(n,e=!1,t=!1){e&&v_(e);const{props:s,children:i}=n.vnode,r=Xb(n);$N(n,s,r,e),HN(n,i,t);const o=r?fO(n,e):void 0;return e&&v_(!1),o}function fO(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,ON);const{setup:s}=t;if(s){Br();const i=n.setupContext=s.length>1?_O(n):null,r=pu(n),o=fu(s,n,0,[n.props,i]),a=Xw(o);if(Hr(),r(),(a||n.sp)&&!wc(n)&&Rb(n),a){if(o.then(Cy,Cy),e)return o.then(c=>{Sy(n,c)}).catch(c=>{sf(c,n,0)});n.asyncDep=o}else Sy(n,o)}else Jb(n)}function Sy(n,e,t){Fe(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:bt(e)&&(n.setupState=Tb(e)),Jb(n)}function Jb(n,e,t){const s=n.type;n.render||(n.render=s.render||ni);{const i=pu(n);Br();try{kN(n)}finally{Hr(),i()}}}const pO={get(n,e){return pn(n,"get",""),n[e]}};function _O(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,pO),slots:n.slots,emit:n.emit,expose:e}}function cf(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Tb(nN(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in bc)return bc[t](n)},has(e,t){return t in e||t in bc}})):n.proxy}function mO(n,e=!0){return Fe(n)?n.displayName||n.name:n.name||e&&n.__name}function gO(n){return Fe(n)&&"__vccOpts"in n}const Rs=(n,e)=>aN(n,e,Hc);function Zb(n,e,t){const s=arguments.length;return s===2?bt(e)&&!Ne(e)?od(e)?Xn(n,null,[e]):Xn(n,e):Xn(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&od(t)&&(t=[t]),Xn(n,e,t))}const vO="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let y_;const Ry=typeof window<"u"&&window.trustedTypes;if(Ry)try{y_=Ry.createPolicy("vue",{createHTML:n=>n})}catch{}const eI=y_?n=>y_.createHTML(n):n=>n,yO="http://www.w3.org/2000/svg",EO="http://www.w3.org/1998/Math/MathML",Si=typeof document<"u"?document:null,Py=Si&&Si.createElement("template"),TO={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const i=e==="svg"?Si.createElementNS(yO,n):e==="mathml"?Si.createElementNS(EO,n):t?Si.createElement(n,{is:t}):Si.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>Si.createTextNode(n),createComment:n=>Si.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Si.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,i,r){const o=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{Py.innerHTML=eI(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=Py.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},wO=Symbol("_vtc");function bO(n,e,t){const s=n[wO];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Ny=Symbol("_vod"),IO=Symbol("_vsh"),AO=Symbol(""),CO=/(^|;)\s*display\s*:/;function SO(n,e,t){const s=n.style,i=Ht(t);let r=!1;if(t&&!i){if(e)if(Ht(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Vh(s,a,"")}else for(const o in e)t[o]==null&&Vh(s,o,"");for(const o in t)o==="display"&&(r=!0),Vh(s,o,t[o])}else if(i){if(e!==t){const o=s[AO];o&&(t+=";"+o),s.cssText=t,r=CO.test(t)}}else e&&n.removeAttribute("style");Ny in n&&(n[Ny]=r?s.display:"",n[IO]&&(s.display="none"))}const Oy=/\s*!important$/;function Vh(n,e,t){if(Ne(t))t.forEach(s=>Vh(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=RO(n,e);Oy.test(t)?n.setProperty(Ko(s),t.replace(Oy,""),"important"):n[s]=t}}const ky=["Webkit","Moz","ms"],Ip={};function RO(n,e){const t=Ip[e];if(t)return t;let s=fs(e);if(s!=="filter"&&s in n)return Ip[e]=s;s=Xd(s);for(let i=0;i<ky.length;i++){const r=ky[i]+s;if(r in n)return Ip[e]=r}return e}const Dy="http://www.w3.org/1999/xlink";function xy(n,e,t,s,i,r=DP(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Dy,e.slice(6,e.length)):n.setAttributeNS(Dy,e,t):t==null||r&&!tb(t)?n.removeAttribute(e):n.setAttribute(e,r?"":ci(t)?String(t):t)}function Ly(n,e,t,s,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?eI(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=tb(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function wo(n,e,t,s){n.addEventListener(e,t,s)}function PO(n,e,t,s){n.removeEventListener(e,t,s)}const My=Symbol("_vei");function NO(n,e,t,s,i=null){const r=n[My]||(n[My]={}),o=r[e];if(s&&o)o.value=s;else{const[a,c]=OO(e);if(s){const h=r[e]=xO(s,i);wo(n,a,h,c)}else o&&(PO(n,a,o,c),r[e]=void 0)}}const Vy=/(?:Once|Passive|Capture)$/;function OO(n){let e;if(Vy.test(n)){e={};let s;for(;s=n.match(Vy);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Ko(n.slice(2)),e]}let Ap=0;const kO=Promise.resolve(),DO=()=>Ap||(kO.then(()=>Ap=0),Ap=Date.now());function xO(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;ui(LO(s,t.value),e,5,[s])};return t.value=n,t.attached=DO(),t}function LO(n,e){if(Ne(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Fy=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,MO=(n,e,t,s,i,r)=>{const o=i==="svg";e==="class"?bO(n,s,o):e==="style"?SO(n,t,s):Gd(e)?_m(e)||NO(n,e,t,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):VO(n,e,s,o))?(Ly(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&xy(n,e,s,o,r,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Ht(s))?Ly(n,fs(e),s,r,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),xy(n,e,s,o))};function VO(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&Fy(e)&&Fe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Fy(e)&&Ht(t)?!1:e in n}const ld=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Ne(e)?t=>Dh(e,t):e};function FO(n){n.target.composing=!0}function $y(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ha=Symbol("_assign"),sc={created(n,{modifiers:{lazy:e,trim:t,number:s}},i){n[Ha]=ld(i);const r=s||i.props&&i.props.type==="number";wo(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),r&&(a=ed(a)),n[Ha](a)}),t&&wo(n,"change",()=>{n.value=n.value.trim()}),e||(wo(n,"compositionstart",FO),wo(n,"compositionend",$y),wo(n,"change",$y))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:i,number:r}},o){if(n[Ha]=ld(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?ed(n.value):n.value,c=e??"";a!==c&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||i&&n.value.trim()===c)||(n.value=c))}},uq={deep:!0,created(n,{value:e,modifiers:{number:t}},s){const i=Qd(e);wo(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?ed(cd(o)):cd(o));n[Ha](n.multiple?i?new Set(r):r:r[0]),n._assigning=!0,Cm(()=>{n._assigning=!1})}),n[Ha]=ld(s)},mounted(n,{value:e}){Uy(n,e)},beforeUpdate(n,e,t){n[Ha]=ld(t)},updated(n,{value:e}){n._assigning||Uy(n,e)}};function Uy(n,e){const t=n.multiple,s=Ne(e);if(!(t&&!s&&!Qd(e))){for(let i=0,r=n.options.length;i<r;i++){const o=n.options[i],a=cd(o);if(t)if(s){const c=typeof a;c==="string"||c==="number"?o.selected=e.some(h=>String(h)===String(a)):o.selected=LP(e,a)>-1}else o.selected=e.has(a);else if(ef(cd(o),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function cd(n){return"_value"in n?n._value:n.value}const $O=["ctrl","shift","alt","meta"],UO={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>$O.some(t=>n[`${t}Key`]&&!e.includes(t))},gh=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=(i,...r)=>{for(let o=0;o<e.length;o++){const a=UO[e[o]];if(a&&a(i,e))return}return n(i,...r)})},jO=En({patchProp:MO},TO);let jy;function BO(){return jy||(jy=qN(jO))}const HO=(...n)=>{const e=BO().createApp(...n),{mount:t}=e;return e.mount=s=>{const i=qO(s);if(!i)return;const r=e._component;!Fe(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,WO(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function WO(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function qO(n){return Ht(n)?document.querySelector(n):n}const KO=()=>{};var By={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(n,e){if(!n)throw ml(e)},ml=function(n){return new Error("Firebase Database ("+tI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},zO=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=n[t++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const r=n[t++],o=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},km={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const r=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,d=r>>2,p=(r&3)<<4|a>>4;let g=(a&15)<<2|h>>6,y=h&63;c||(y=64,o||(g=64)),s.push(t[d],t[p],t[g],t[y])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const r=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,r==null||a==null||h==null||p==null)throw new GO;const g=r<<2|a>>4;if(s.push(g),h!==64){const y=a<<4&240|h>>2;if(s.push(y),p!==64){const w=h<<6&192|p;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class GO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sI=function(n){const e=nI(n);return km.encodeByteArray(e,!0)},ud=function(n){return sI(n).replace(/\./g,"")},hd=function(n){try{return km.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(n){return iI(void 0,n)}function iI(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!YO(t)||(n[t]=iI(n[t],e[t]));return n}function YO(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=()=>XO().__FIREBASE_DEFAULTS__,ZO=()=>{if(typeof process>"u"||typeof By>"u")return;const n=By.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ek=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hd(n[1]);return e&&JSON.parse(e)},uf=()=>{try{return KO()||JO()||ZO()||ek()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rI=n=>{var e,t;return(t=(e=uf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},oI=n=>{const e=rI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},aI=()=>{var n;return(n=uf())===null||n===void 0?void 0:n.config},lI=n=>{var e;return(e=uf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ud(JSON.stringify(t)),ud(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function tk(){var n;const e=(n=uf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ik(){const n=Tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rk(){return tI.NODE_ADMIN===!0}function ok(){return!tk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ak(){try{return typeof indexedDB=="object"}catch{return!1}}function lk(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var r;e(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="FirebaseError";class Ki extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=ck,Object.setPrototypeOf(this,Ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?uk(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ki(i,a,s)}}function uk(n,e){return n.replace(hk,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const hk=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n){return JSON.parse(n)}function zt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=function(n){let e={},t={},s={},i="";try{const r=n.split(".");e=Wc(hd(r[0])||""),t=Wc(hd(r[1])||""),i=r[2],s=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:s,signature:i}},dk=function(n){const e=hI(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},fk=function(n){const e=hI(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Xa(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function E_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function dd(n,e,t){const s={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=e.call(t,n[i],i,n));return s}function Pr(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const r=n[i],o=e[i];if(Hy(r)&&Hy(o)){if(!Pr(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function Hy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function dc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function fc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)s[p]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let p=0;p<16;p++)s[p]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let p=16;p<80;p++){const g=s[p-3]^s[p-8]^s[p-14]^s[p-16];s[p]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],h,d;for(let p=0;p<80;p++){p<40?p<20?(h=a^r&(o^a),d=1518500249):(h=r^o^a,d=1859775393):p<60?(h=r&o|a&(r|o),d=2400959708):(h=r^o^a,d=3395469782);const g=(i<<5|i>>>27)+h+c+d+s[p]&4294967295;c=a,a=o,o=(r<<30|r>>>2)&4294967295,r=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const s=t-this.blockSize;let i=0;const r=this.buf_;let o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=s;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<t;)if(r[o]=e[i],++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let r=24;r>=0;r-=8)e[s]=this.chain_[i]>>r&255,++s;return e}}function _k(n,e){const t=new mk(n,e);return t.subscribe.bind(t)}class mk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let i;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");gk(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:s},i.next===void 0&&(i.next=Cp),i.error===void 0&&(i.error=Cp),i.complete===void 0&&(i.complete=Cp);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cp(){}function xm(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);if(i>=55296&&i<=56319){const r=i-55296;s++,ne(s<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(s)-56320;i=65536+(r<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},df=function(n){let e=0;for(let t=0;t<n.length;t++){const s=n.charCodeAt(t);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}class Nr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new hf;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Tk(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,t){var s;const i=this.normalizeInstanceIdentifier(t),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Ek(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ek(n){return n===Eo?void 0:n}function Tk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const bk={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},Ik=Ke.INFO,Ak={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},Ck=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=Ak[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ff{constructor(e){this.name=e,this._logLevel=Ik,this._logHandler=Ck,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const Sk=(n,e)=>e.some(t=>n instanceof t);let Wy,qy;function Rk(){return Wy||(Wy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pk(){return qy||(qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dI=new WeakMap,T_=new WeakMap,fI=new WeakMap,Sp=new WeakMap,Lm=new WeakMap;function Nk(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(wr(n.result)),i()},o=()=>{s(n.error),i()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&dI.set(t,n)}).catch(()=>{}),Lm.set(e,n),e}function Ok(n){if(T_.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});T_.set(n,e)}let w_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return T_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kk(n){w_=n(w_)}function Dk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Rp(this),e,...t);return fI.set(s,e.sort?e.sort():[e]),wr(s)}:Pk().includes(n)?function(...e){return n.apply(Rp(this),e),wr(dI.get(this))}:function(...e){return wr(n.apply(Rp(this),e))}}function xk(n){return typeof n=="function"?Dk(n):(n instanceof IDBTransaction&&Ok(n),Sk(n,Rk())?new Proxy(n,w_):n)}function wr(n){if(n instanceof IDBRequest)return Nk(n);if(Sp.has(n))return Sp.get(n);const e=xk(n);return e!==n&&(Sp.set(n,e),Lm.set(e,n)),e}const Rp=n=>Lm.get(n);function Lk(n,e,{blocked:t,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(n,e),a=wr(o);return s&&o.addEventListener("upgradeneeded",c=>{s(wr(o.result),c.oldVersion,c.newVersion,wr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const Mk=["get","getKey","getAll","getAllKeys","count"],Vk=["put","add","delete","clear"],Pp=new Map;function Ky(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pp.get(e))return Pp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=Vk.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Mk.includes(t)))return;const r=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(a.shift())),(await Promise.all([h[t](...a),i&&c.done]))[0]};return Pp.set(e,r),r}kk(n=>({...n,get:(e,t,s)=>Ky(e,t)||n.get(e,t,s),has:(e,t)=>!!Ky(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($k(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function $k(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const b_="@firebase/app",zy="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new ff("@firebase/app"),Uk="@firebase/app-compat",jk="@firebase/analytics-compat",Bk="@firebase/analytics",Hk="@firebase/app-check-compat",Wk="@firebase/app-check",qk="@firebase/auth",Kk="@firebase/auth-compat",zk="@firebase/database",Gk="@firebase/data-connect",Qk="@firebase/database-compat",Yk="@firebase/functions",Xk="@firebase/functions-compat",Jk="@firebase/installations",Zk="@firebase/installations-compat",eD="@firebase/messaging",tD="@firebase/messaging-compat",nD="@firebase/performance",sD="@firebase/performance-compat",iD="@firebase/remote-config",rD="@firebase/remote-config-compat",oD="@firebase/storage",aD="@firebase/storage-compat",lD="@firebase/firestore",cD="@firebase/vertexai",uD="@firebase/firestore-compat",hD="firebase",dD="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="[DEFAULT]",fD={[b_]:"fire-core",[Uk]:"fire-core-compat",[Bk]:"fire-analytics",[jk]:"fire-analytics-compat",[Wk]:"fire-app-check",[Hk]:"fire-app-check-compat",[qk]:"fire-auth",[Kk]:"fire-auth-compat",[zk]:"fire-rtdb",[Gk]:"fire-data-connect",[Qk]:"fire-rtdb-compat",[Yk]:"fire-fn",[Xk]:"fire-fn-compat",[Jk]:"fire-iid",[Zk]:"fire-iid-compat",[eD]:"fire-fcm",[tD]:"fire-fcm-compat",[nD]:"fire-perf",[sD]:"fire-perf-compat",[iD]:"fire-rc",[rD]:"fire-rc-compat",[oD]:"fire-gcs",[aD]:"fire-gcs-compat",[lD]:"fire-fst",[uD]:"fire-fst-compat",[cD]:"fire-vertex","fire-js":"fire-js",[hD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Map,pD=new Map,A_=new Map;function Gy(n,e){try{n.container.addComponent(e)}catch(t){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Do(n){const e=n.name;if(A_.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;A_.set(e,n);for(const t of fd.values())Gy(t,n);for(const t of pD.values())Gy(t,n);return!0}function pf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new _u("app","Firebase",_D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=dD;function pI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:I_,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw br.create("bad-app-name",{appName:String(i)});if(t||(t=aI()),!t)throw br.create("no-options");const r=fd.get(i);if(r){if(Pr(t,r.options)&&Pr(s,r.config))return r;throw br.create("duplicate-app",{appName:i})}const o=new wk(i);for(const c of A_.values())o.addComponent(c);const a=new mD(t,s,o);return fd.set(i,a),a}function Mm(n=I_){const e=fd.get(n);if(!e&&n===I_&&aI())return pI();if(!e)throw br.create("no-app",{appName:n});return e}function si(n,e,t){var s;let i=(s=fD[n])!==null&&s!==void 0?s:n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(a.join(" "));return}Do(new Nr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="firebase-heartbeat-database",vD=1,qc="firebase-heartbeat-store";let Np=null;function _I(){return Np||(Np=Lk(gD,vD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qc)}catch(t){console.warn(t)}}}}).catch(n=>{throw br.create("idb-open",{originalErrorMessage:n.message})})),Np}async function yD(n){try{const t=(await _I()).transaction(qc),s=await t.objectStore(qc).get(mI(n));return await t.done,s}catch(e){if(e instanceof Ki)Fi.warn(e.message);else{const t=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fi.warn(t.message)}}}async function Qy(n,e){try{const s=(await _I()).transaction(qc,"readwrite");await s.objectStore(qc).put(e,mI(n)),await s.done}catch(t){if(t instanceof Ki)Fi.warn(t.message);else{const s=br.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fi.warn(s.message)}}}function mI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=1024,TD=30;class wD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ID(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Yy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>TD){const o=AD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Fi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yy(),{heartbeatsToSend:s,unsentEntries:i}=bD(this._heartbeatsCache.heartbeats),r=ud(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Fi.warn(t),""}}}function Yy(){return new Date().toISOString().substring(0,10)}function bD(n,e=ED){const t=[];let s=n.slice();for(const i of n){const r=t.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Xy(t)>e){r.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Xy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class ID{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ak()?lk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xy(n){return ud(JSON.stringify({version:2,heartbeats:n})).length}function AD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(n){Do(new Nr("platform-logger",e=>new Fk(e),"PRIVATE")),Do(new Nr("heartbeat",e=>new wD(e),"PRIVATE")),si(b_,zy,n),si(b_,zy,"esm2017"),si("fire-js","")}CD("");function Vm(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function gI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SD=gI,vI=new _u("auth","Firebase",gI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new ff("@firebase/auth");function RD(n,...e){pd.logLevel<=Ke.WARN&&pd.warn(`Auth (${zo}): ${n}`,...e)}function Fh(n,...e){pd.logLevel<=Ke.ERROR&&pd.error(`Auth (${zo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n,...e){throw Fm(n,...e)}function ii(n,...e){return Fm(n,...e)}function yI(n,e,t){const s=Object.assign(Object.assign({},SD()),{[e]:t});return new _u("auth","Firebase",s).create(e,{appName:n.name})}function xi(n){return yI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return vI.create(n,...e)}function Se(n,e,...t){if(!n)throw Fm(e,...t)}function Ni(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fh(e),new Error(e)}function $i(n,e){n||Ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function PD(){return Jy()==="http:"||Jy()==="https:"}function Jy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PD()||sk()||"connection"in navigator)?navigator.onLine:!0}function OD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=Dm()||uI()}get(){return ND()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n,e){$i(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new mu(3e4,6e4);function Wr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function qr(n,e,t,s,i={}){return TI(n,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const a=gl(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:c},r);return nk()||(h.referrerPolicy="no-referrer"),EI.fetch()(wI(n,n.config.apiHost,t,a),h)})}async function TI(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},kD),e);try{const i=new LD(n),r=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw vh(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[c,h]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw vh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw vh(n,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw yI(n,d,h);Fs(n,d)}}catch(i){if(i instanceof Ki)throw i;Fs(n,"network-request-failed",{message:String(i)})}}async function gu(n,e,t,s,i={}){const r=await qr(n,e,t,s,i);return"mfaPendingCredential"in r&&Fs(n,"multi-factor-auth-required",{_serverResponse:r}),r}function wI(n,e,t,s){const i=`${e}${t}?${s}`;return n.config.emulator?$m(n.config,i):`${n.config.apiScheme}://${i}`}function xD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ii(this.auth,"network-request-failed")),DD.get())})}}function vh(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=ii(n,e,s);return i.customData._tokenResponse=t,i}function Zy(n){return n!==void 0&&n.enterprise!==void 0}class MD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VD(n,e){return qr(n,"GET","/v2/recaptchaConfig",Wr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(n,e){return qr(n,"POST","/v1/accounts:delete",e)}async function bI(n,e){return qr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $D(n,e=!1){const t=St(n),s=await t.getIdToken(e),i=Um(s);Se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Ac(Op(i.auth_time)),issuedAtTime:Ac(Op(i.iat)),expirationTime:Ac(Op(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Op(n){return Number(n)*1e3}function Um(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Fh("JWT malformed, contained fewer than 3 sections"),null;try{const i=hd(t);return i?JSON.parse(i):(Fh("Failed to decode base64 JWT payload"),null)}catch(i){return Fh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eE(n){const e=Um(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ki&&UD(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function UD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _d(n){var e;const t=n.auth,s=await n.getIdToken(),i=await Kc(n,bI(t,{idToken:s}));Se(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?II(r.providerUserInfo):[],a=HD(n.providerData,o),c=n.isAnonymous,h=!(n.email&&r.passwordHash)&&!(a!=null&&a.length),d=c?h:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new S_(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function BD(n){const e=St(n);await _d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HD(n,e){return[...n.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function II(n){return n.map(e=>{var{providerId:t}=e,s=Vm(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(n,e){const t=await TI(n,{},async()=>{const s=gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=n.config,o=wI(n,i,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",EI.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qD(n,e){return qr(n,"POST","/v2/accounts:revokeToken",Wr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=eE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:r}=await WD(e,t);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:r}=t,o=new Wa;return s&&(Se(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(Se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(Se(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Oi{constructor(e){var{uid:t,auth:s,stsTokenManager:i}=e,r=Vm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new S_(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $D(this,e)}reload(){return BD(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await _d(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(xi(this.auth));const e=await this.getIdToken();return await Kc(this,FD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,i,r,o,a,c,h,d;const p=(s=t.displayName)!==null&&s!==void 0?s:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(r=t.phoneNumber)!==null&&r!==void 0?r:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,F=(h=t.createdAt)!==null&&h!==void 0?h:void 0,$=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:K,emailVerified:H,isAnonymous:ce,providerData:ae,stsTokenManager:R}=t;Se(K&&R,e,"internal-error");const b=Wa.fromJSON(this.name,R);Se(typeof K=="string",e,"internal-error"),ur(p,e.name),ur(g,e.name),Se(typeof H=="boolean",e,"internal-error"),Se(typeof ce=="boolean",e,"internal-error"),ur(y,e.name),ur(w,e.name),ur(N,e.name),ur(k,e.name),ur(F,e.name),ur($,e.name);const A=new Oi({uid:K,auth:e,email:g,emailVerified:H,displayName:p,isAnonymous:ce,photoURL:w,phoneNumber:y,tenantId:N,stsTokenManager:b,createdAt:F,lastLoginAt:$});return ae&&Array.isArray(ae)&&(A.providerData=ae.map(P=>Object.assign({},P))),k&&(A._redirectEventId=k),A}static async _fromIdTokenResponse(e,t,s=!1){const i=new Wa;i.updateFromServerResponse(t);const r=new Oi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await _d(r),r}static async _fromGetAccountInfoResponse(e,t,s){const i=t.users[0];Se(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?II(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),a=new Wa;a.updateFromIdToken(s);const c=new Oi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new S_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;function ki(n){$i(n instanceof Function,"Expected a class definition");let e=tE.get(n);return e?($i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AI.type="NONE";const nE=AI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n,e,t){return`firebase:${n}:${e}:${t}`}class qa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=$h(this.userKey,i.apiKey,r),this.fullPersistenceKey=$h("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Oi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new qa(ki(nE),e,s);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=i[0]||ki(nE);const o=$h(s,e.config.apiKey,e.name);let a=null;for(const h of t)try{const d=await h._get(o);if(d){const p=Oi._fromJSON(e,d);h!==r&&(a=p),r=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new qa(r,e,s):(r=c[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async h=>{if(h!==r)try{await h._remove(o)}catch{}})),new qa(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OI(e))return"Blackberry";if(kI(e))return"Webos";if(SI(e))return"Safari";if((e.includes("chrome/")||RI(e))&&!e.includes("edge/"))return"Chrome";if(NI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function CI(n=Tn()){return/firefox\//i.test(n)}function SI(n=Tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RI(n=Tn()){return/crios\//i.test(n)}function PI(n=Tn()){return/iemobile/i.test(n)}function NI(n=Tn()){return/android/i.test(n)}function OI(n=Tn()){return/blackberry/i.test(n)}function kI(n=Tn()){return/webos/i.test(n)}function jm(n=Tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KD(n=Tn()){var e;return jm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zD(){return ik()&&document.documentMode===10}function DI(n=Tn()){return jm(n)||NI(n)||kI(n)||OI(n)||/windows phone/i.test(n)||PI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(n,e=[]){let t;switch(n){case"Browser":t=sE(Tn());break;case"Worker":t=`${sE(Tn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=r=>new Promise((o,a)=>{try{const c=e(r);o(c)}catch(c){a(c)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(n,e={}){return qr(n,"GET","/v2/passwordPolicy",Wr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=6;class XD{constructor(e){var t,s,i,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:YD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,i,r,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsUppercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iE(this),this.idTokenSubscription=new iE(this),this.beforeStateQueue=new GD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ki(t)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bI(this,{idToken:e}),s=await Oi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _d(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(xi(this));const t=e?St(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QD(this),t=new XD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await qD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ki(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,s,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&RD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Go(n){return St(n)}class iE{constructor(e){this.auth=e,this.observer=null,this.addObserver=_k(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZD(n){_f=n}function LI(n){return _f.loadJS(n)}function ex(){return _f.recaptchaEnterpriseScript}function tx(){return _f.gapiScript}function nx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sx{constructor(){this.enterprise=new ix}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ix{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rx="recaptcha-enterprise",MI="NO_RECAPTCHA";class ox{constructor(e){this.type=rx,this.auth=Go(e)}async verify(e="verify",t=!1){async function s(r){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{VD(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const h=new MD(c);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,o(h.siteKey)}}).catch(c=>{a(c)})})}function i(r,o,a){const c=window.grecaptcha;Zy(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(h=>{o(h)}).catch(()=>{o(MI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sx().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!t&&Zy(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=ex();c.length!==0&&(c+=a),LI(c).then(()=>{i(a,r,o)}).catch(h=>{o(h)})}}).catch(a=>{o(a)})})}}async function rE(n,e,t,s=!1,i=!1){const r=new ox(n);let o;if(i)o=MI;else try{o=await r.verify(t)}catch{o=await r.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,h=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function R_(n,e,t,s,i){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await rE(n,e,t,t==="getOobCode");return s(n,o)}else return s(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await rE(n,e,t,t==="getOobCode");return s(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n,e){const t=pf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),r=t.getOptions();if(Pr(r,e??{}))return i;Fs(i,"already-initialized")}return t.initialize({options:e})}function lx(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ki);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function cx(n,e,t){const s=Go(n);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=VI(e),{host:o,port:a}=ux(e),c=a===null?"":`:${a}`,h={url:`${r}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(Pr(h,s.config.emulator)&&Pr(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,hx()}function VI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ux(n){const e=VI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:oE(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:oE(o)}}}function oE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function hx(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,t){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}}async function dx(n,e){return qr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(n,e){return gu(n,"POST","/v1/accounts:signInWithPassword",Wr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(n,e){return gu(n,"POST","/v1/accounts:signInWithEmailLink",Wr(n,e))}async function _x(n,e){return gu(n,"POST","/v1/accounts:signInWithEmailLink",Wr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Bm{constructor(e,t,s,i=null){super("password",s),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new zc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new zc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return R_(e,t,"signInWithPassword",fx);case"emailLink":return px(e,{email:this._email,oobCode:this._password});default:Fs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return R_(e,s,"signUpPassword",dx);case"emailLink":return _x(e,{idToken:t,email:this._email,oobCode:this._password});default:Fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(n,e){return gu(n,"POST","/v1/accounts:signInWithIdp",Wr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="http://localhost";class xo extends Bm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=t,r=Vm(t,["providerId","signInMethod"]);if(!s||!i)return null;const o=new xo(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Ka(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ka(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ka(e,t)}buildRequest(){const e={requestUri:mx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vx(n){const e=dc(fc(n)).link,t=e?dc(fc(e)).deep_link_id:null,s=dc(fc(n)).deep_link_id;return(s?dc(fc(s)).link:null)||s||t||e||n}class Hm{constructor(e){var t,s,i,r,o,a;const c=dc(fc(e)),h=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(s=c.oobCode)!==null&&s!==void 0?s:null,p=gx((i=c.mode)!==null&&i!==void 0?i:null);Se(h&&d&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=d,this.continueUrl=(r=c.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=vx(e);try{return new Hm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.providerId=vl.PROVIDER_ID}static credential(e,t){return zc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Hm.parseLink(t);return Se(s,"argument-error"),zc._fromEmailAndCode(e,s.code,s.tenantId)}}vl.PROVIDER_ID="password";vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends FI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends vu{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return gr.credential(t,s)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends vu{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends vu{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return yr.credential(t,s)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(n,e){return gu(n,"POST","/v1/accounts:signUp",Wr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const r=await Oi._fromIdTokenResponse(e,s,i),o=aE(s);return new Lo({user:r,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=aE(s);return new Lo({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function aE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends Ki{constructor(e,t,s,i){var r;super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,md.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new md(e,t,s,i)}}function $I(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?md._fromErrorAndOperation(n,r,e,s):r})}async function Ex(n,e,t=!1){const s=await Kc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Lo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tx(n,e,t=!1){const{auth:s}=n;if(Gn(s.app))return Promise.reject(xi(s));const i="reauthenticate";try{const r=await Kc(n,$I(s,i,e,n),t);Se(r.idToken,s,"internal-error");const o=Um(r.idToken);Se(o,s,"internal-error");const{sub:a}=o;return Se(n.uid===a,s,"user-mismatch"),Lo._forOperation(n,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Fs(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(n,e,t=!1){if(Gn(n.app))return Promise.reject(xi(n));const s="signIn",i=await $I(n,s,e),r=await Lo._fromIdTokenResponse(n,s,i);return t||await n._updateCurrentUser(r.user),r}async function wx(n,e){return UI(Go(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(n){const e=Go(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bx(n,e,t){if(Gn(n.app))return Promise.reject(xi(n));const s=Go(n),o=await R_(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yx).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&jI(n),c}),a=await Lo._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function Ix(n,e,t){return Gn(n.app)?Promise.reject(xi(n)):wx(St(n),vl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jI(n),s})}function Ax(n,e,t,s){return St(n).onIdTokenChanged(e,t,s)}function Cx(n,e,t){return St(n).beforeAuthStateChanged(e,t)}function Sx(n,e,t,s){return St(n).onAuthStateChanged(e,t,s)}function hq(n){return St(n).signOut()}const gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=1e3,Px=10;class HI extends BI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);zD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Px):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HI.type="LOCAL";const Nx=HI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI extends BI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WI.type="SESSION";const qI=WI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new mf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:r}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async h=>h(t.origin,r)),c=await Ox(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,c)=>{const h=Wm("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(g.data.response);break;default:clearTimeout(d),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return window}function Dx(n){ri().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return typeof ri().WorkerGlobalScope<"u"&&typeof ri().importScripts=="function"}async function xx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lx(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Mx(){return KI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="firebaseLocalStorageDb",Vx=1,vd="firebaseLocalStorage",GI="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gf(n,e){return n.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function Fx(){const n=indexedDB.deleteDatabase(zI);return new yu(n).toPromise()}function P_(){const n=indexedDB.open(zI,Vx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(vd,{keyPath:GI})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(vd)?e(s):(s.close(),await Fx(),e(await P_()))})})}async function lE(n,e,t){const s=gf(n,!0).put({[GI]:e,value:t});return new yu(s).toPromise()}async function $x(n,e){const t=gf(n,!1).get(e),s=await new yu(t).toPromise();return s===void 0?null:s.value}function cE(n,e){const t=gf(n,!0).delete(e);return new yu(t).toPromise()}const Ux=800,jx=3;class QI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>jx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mf._getInstance(Mx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await xx(),!this.activeServiceWorker)return;this.sender=new kx(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P_();return await lE(e,gd,"1"),await cE(e,gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>lE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>$x(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=gf(i,!1).getAll();return new yu(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ux)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QI.type="LOCAL";const Bx=QI;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(n,e){return e?ki(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends Bm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Wx(n){return UI(n.auth,new qm(n),n.bypassAuthState)}function qx(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),Tx(t,new qm(n),n.bypassAuthState)}async function Kx(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),Ex(t,new qm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wx;case"linkViaPopup":case"linkViaRedirect":return Kx;case"reauthViaPopup":case"reauthViaRedirect":return qx;default:Fs(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new mu(2e3,1e4);class xa extends YI{constructor(e,t,s,i,r){super(e,t,i,r),this.provider=s,this.authWindow=null,this.pollId=null,xa.currentPopupAction&&xa.currentPopupAction.cancel(),xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=Wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zx.get())};e()}}xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="pendingRedirect",Uh=new Map;class Qx extends YI{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const s=await Yx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yx(n,e){const t=Zx(e),s=Jx(n);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}function Xx(n,e){Uh.set(n._key(),e)}function Jx(n){return ki(n._redirectPersistence)}function Zx(n){return $h(Gx,n.config.apiKey,n.name)}async function eL(n,e,t=!1){if(Gn(n.app))return Promise.reject(xi(n));const s=Go(n),i=Hx(s,e),o=await new Qx(s,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=10*60*1e3;class nL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!XI(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(ii(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tL&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(e))}saveEventToCache(e){this.cachedEventUids.add(uE(e)),this.lastProcessedEventTime=Date.now()}}function uE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(n,e={}){return qr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oL=/^https?/;async function aL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await iL(n);for(const t of e)try{if(lL(t))return}catch{}Fs(n,"unauthorized-domain")}function lL(n){const e=C_(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!oL.test(t))return!1;if(rL.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new mu(3e4,6e4);function hE(){const n=ri().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uL(n){return new Promise((e,t)=>{var s,i,r;function o(){hE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hE(),t(ii(n,"network-request-failed"))},timeout:cL.get()})}if(!((i=(s=ri().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((r=ri().gapi)===null||r===void 0)&&r.load)o();else{const a=nx("iframefcb");return ri()[a]=()=>{gapi.load?o():t(ii(n,"network-request-failed"))},LI(`${tx()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw jh=null,e})}let jh=null;function hL(n){return jh=jh||uL(n),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=new mu(5e3,15e3),fL="__/auth/iframe",pL="emulator/auth/iframe",_L={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gL(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$m(e,pL):`https://${n.config.authDomain}/${fL}`,s={apiKey:e.apiKey,appName:n.name,v:zo},i=mL.get(n.config.apiHost);i&&(s.eid=i);const r=n._getFrameworks();return r.length&&(s.fw=r.join(",")),`${t}?${gl(s).slice(1)}`}async function vL(n){const e=await hL(n),t=ri().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:gL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_L,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=ii(n,"network-request-failed"),a=ri().setTimeout(()=>{r(o)},dL.get());function c(){ri().clearTimeout(a),i(s)}s.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EL=500,TL=600,wL="_blank",bL="http://localhost";class dE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IL(n,e,t,s=EL,i=TL){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},yL),{width:s.toString(),height:i.toString(),top:r,left:o}),h=Tn().toLowerCase();t&&(a=RI(h)?wL:t),CI(h)&&(e=e||bL,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(KD(h)&&a!=="_self")return AL(e||"",a),new dE(null);const p=window.open(e||"",a,d);Se(p,n,"popup-blocked");try{p.focus()}catch{}return new dE(p)}function AL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="__/auth/handler",SL="emulator/auth/handler",RL=encodeURIComponent("fac");async function fE(n,e,t,s,i,r){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:zo,eventId:i};if(e instanceof FI){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",E_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof vu){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await n._getAppCheckToken(),h=c?`#${RL}=${encodeURIComponent(c)}`:"";return`${PL(n)}?${gl(a).slice(1)}${h}`}function PL({config:n}){return n.emulator?$m(n,SL):`https://${n.authDomain}/${CL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class NL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qI,this._completeRedirectFn=eL,this._overrideRedirectResult=Xx}async _openPopup(e,t,s,i){var r;$i((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await fE(e,t,s,C_(),i);return IL(e,o,Wm())}async _openRedirect(e,t,s,i){await this._originValidation(e);const r=await fE(e,t,s,C_(),i);return Dx(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:r}=this.eventManagers[t];return i?Promise.resolve(i):($i(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await vL(e),s=new nL(e);return t.register("authEvent",i=>(Se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kp,{type:kp},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[kp];o!==void 0&&t(!!o),Fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DI()||SI()||jm()}}const OL=NL;var pE="@firebase/auth",_E="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xL(n){Do(new Nr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Se(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xI(n)},h=new JD(s,i,r,c);return lx(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Do(new Nr("auth-internal",e=>{const t=Go(e.getProvider("auth").getImmediate());return(s=>new kL(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(pE,_E,DL(n)),si(pE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=5*60,ML=lI("authIdTokenMaxAge")||LL;let mE=null;const VL=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>ML)return;const i=t==null?void 0:t.token;mE!==i&&(mE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Gc(n=Mm()){const e=pf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ax(n,{popupRedirectResolver:OL,persistence:[Bx,Nx,qI]}),s=lI("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=VL(r.toString());Cx(t,o,()=>o(t.currentUser)),Ax(t,a=>o(a))}}const i=rI("auth");return i&&cx(t,`http://${i}`),t}function FL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ZD({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=i=>{const r=ii("internal-error");r.customData=i,t(r)},s.type="text/javascript",s.charset="UTF-8",FL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xL("Browser");/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ca=typeof document<"u";function JI(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function $L(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&JI(n.default)}const rt=Object.assign;function Dp(n,e){const t={};for(const s in e){const i=e[s];t[s]=$s(i)?i.map(n):n(i)}return t}const Cc=()=>{},$s=Array.isArray,ZI=/#/g,UL=/&/g,jL=/\//g,BL=/=/g,HL=/\?/g,eA=/\+/g,WL=/%5B/g,qL=/%5D/g,tA=/%5E/g,KL=/%60/g,nA=/%7B/g,zL=/%7C/g,sA=/%7D/g,GL=/%20/g;function Km(n){return encodeURI(""+n).replace(zL,"|").replace(WL,"[").replace(qL,"]")}function QL(n){return Km(n).replace(nA,"{").replace(sA,"}").replace(tA,"^")}function N_(n){return Km(n).replace(eA,"%2B").replace(GL,"+").replace(ZI,"%23").replace(UL,"%26").replace(KL,"`").replace(nA,"{").replace(sA,"}").replace(tA,"^")}function YL(n){return N_(n).replace(BL,"%3D")}function XL(n){return Km(n).replace(ZI,"%23").replace(HL,"%3F")}function JL(n){return n==null?"":XL(n).replace(jL,"%2F")}function Qc(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const ZL=/\/$/,eM=n=>n.replace(ZL,"");function xp(n,e,t="/"){let s,i={},r="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),r=e.slice(c+1,a>-1?a:e.length),i=n(r)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=iM(s??e,t),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:Qc(o)}}function tM(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function gE(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function nM(n,e,t){const s=e.matched.length-1,i=t.matched.length-1;return s>-1&&s===i&&Ja(e.matched[s],t.matched[i])&&iA(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ja(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function iA(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!sM(n[t],e[t]))return!1;return!0}function sM(n,e){return $s(n)?vE(n,e):$s(e)?vE(e,n):n===e}function vE(n,e){return $s(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function iM(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=t.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const hr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Yc;(function(n){n.pop="pop",n.push="push"})(Yc||(Yc={}));var Sc;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Sc||(Sc={}));function rM(n){if(!n)if(Ca){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),eM(n)}const oM=/^[^#]+#/;function aM(n,e){return n.replace(oM,"#")+e}function lM(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const vf=()=>({left:window.scrollX,top:window.scrollY});function cM(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=lM(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function yE(n,e){return(history.state?history.state.position-e:-1)+n}const O_=new Map;function uM(n,e){O_.set(n,e)}function hM(n){const e=O_.get(n);return O_.delete(n),e}let dM=()=>location.protocol+"//"+location.host;function rA(n,e){const{pathname:t,search:s,hash:i}=e,r=n.indexOf("#");if(r>-1){let a=i.includes(n.slice(r))?n.slice(r).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),gE(c,"")}return gE(t,n)+s+i}function fM(n,e,t,s){let i=[],r=[],o=null;const a=({state:g})=>{const y=rA(n,location),w=t.value,N=e.value;let k=0;if(g){if(t.value=y,e.value=g,o&&o===w){o=null;return}k=N?g.position-N.position:0}else s(y);i.forEach(F=>{F(t.value,w,{delta:k,type:Yc.pop,direction:k?k>0?Sc.forward:Sc.back:Sc.unknown})})};function c(){o=t.value}function h(g){i.push(g);const y=()=>{const w=i.indexOf(g);w>-1&&i.splice(w,1)};return r.push(y),y}function d(){const{history:g}=window;g.state&&g.replaceState(rt({},g.state,{scroll:vf()}),"")}function p(){for(const g of r)g();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:h,destroy:p}}function EE(n,e,t,s=!1,i=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:i?vf():null}}function pM(n){const{history:e,location:t}=window,s={value:rA(n,t)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(c,h,d){const p=n.indexOf("#"),g=p>-1?(t.host&&document.querySelector("base")?n:n.slice(p))+c:dM()+n+c;try{e[d?"replaceState":"pushState"](h,"",g),i.value=h}catch(y){console.error(y),t[d?"replace":"assign"](g)}}function o(c,h){const d=rt({},e.state,EE(i.value.back,c,i.value.forward,!0),h,{position:i.value.position});r(c,d,!0),s.value=c}function a(c,h){const d=rt({},i.value,e.state,{forward:c,scroll:vf()});r(d.current,d,!0);const p=rt({},EE(s.value,c,null),{position:d.position+1},h);r(c,p,!1),s.value=c}return{location:s,state:i,push:a,replace:o}}function _M(n){n=rM(n);const e=pM(n),t=fM(n,e.state,e.location,e.replace);function s(r,o=!0){o||t.pauseListeners(),history.go(r)}const i=rt({location:"",base:n,go:s,createHref:aM.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function mM(n){return typeof n=="string"||n&&typeof n=="object"}function oA(n){return typeof n=="string"||typeof n=="symbol"}const aA=Symbol("");var TE;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(TE||(TE={}));function Za(n,e){return rt(new Error,{type:n,[aA]:!0},e)}function Ci(n,e){return n instanceof Error&&aA in n&&(e==null||!!(n.type&e))}const wE="[^/]+?",gM={sensitive:!1,strict:!1,start:!0,end:!0},vM=/[.+*?^${}()[\]/\\]/g;function yM(n,e){const t=rt({},gM,e),s=[];let i=t.start?"^":"";const r=[];for(const h of n){const d=h.length?[]:[90];t.strict&&!h.length&&(i+="/");for(let p=0;p<h.length;p++){const g=h[p];let y=40+(t.sensitive?.25:0);if(g.type===0)p||(i+="/"),i+=g.value.replace(vM,"\\$&"),y+=40;else if(g.type===1){const{value:w,repeatable:N,optional:k,regexp:F}=g;r.push({name:w,repeatable:N,optional:k});const $=F||wE;if($!==wE){y+=10;try{new RegExp(`(${$})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${w}" (${$}): `+H.message)}}let K=N?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;p||(K=k&&h.length<2?`(?:/${K})`:"/"+K),k&&(K+="?"),i+=K,y+=20,k&&(y+=-8),N&&(y+=-20),$===".*"&&(y+=-50)}d.push(y)}s.push(d)}if(t.strict&&t.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function a(h){const d=h.match(o),p={};if(!d)return null;for(let g=1;g<d.length;g++){const y=d[g]||"",w=r[g-1];p[w.name]=y&&w.repeatable?y.split("/"):y}return p}function c(h){let d="",p=!1;for(const g of n){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const y of g)if(y.type===0)d+=y.value;else if(y.type===1){const{value:w,repeatable:N,optional:k}=y,F=w in h?h[w]:"";if($s(F)&&!N)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const $=$s(F)?F.join("/"):F;if(!$)if(k)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${w}"`);d+=$}}return d||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function EM(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function lA(n,e){let t=0;const s=n.score,i=e.score;for(;t<s.length&&t<i.length;){const r=EM(s[t],i[t]);if(r)return r;t++}if(Math.abs(i.length-s.length)===1){if(bE(s))return 1;if(bE(i))return-1}return i.length-s.length}function bE(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const TM={type:0,value:""},wM=/[a-zA-Z0-9_]/;function bM(n){if(!n)return[[]];if(n==="/")return[[TM]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(y){throw new Error(`ERR (${t})/"${h}": ${y}`)}let t=0,s=t;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,c,h="",d="";function p(){h&&(t===0?r.push({type:0,value:h}):t===1||t===2||t===3?(r.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;a<n.length;){if(c=n[a++],c==="\\"&&t!==2){s=t,t=4;continue}switch(t){case 0:c==="/"?(h&&p(),o()):c===":"?(p(),t=1):g();break;case 4:g(),t=s;break;case 1:c==="("?t=2:wM.test(c)?g():(p(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:t=3:d+=c;break;case 3:p(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,d="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),i}function IM(n,e,t){const s=yM(bM(n.path),t),i=rt(s,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function AM(n,e){const t=[],s=new Map;e=SE({strict:!1,end:!0,sensitive:!1},e);function i(p){return s.get(p)}function r(p,g,y){const w=!y,N=AE(p);N.aliasOf=y&&y.record;const k=SE(e,p),F=[N];if("alias"in p){const H=typeof p.alias=="string"?[p.alias]:p.alias;for(const ce of H)F.push(AE(rt({},N,{components:y?y.record.components:N.components,path:ce,aliasOf:y?y.record:N})))}let $,K;for(const H of F){const{path:ce}=H;if(g&&ce[0]!=="/"){const ae=g.record.path,R=ae[ae.length-1]==="/"?"":"/";H.path=g.record.path+(ce&&R+ce)}if($=IM(H,g,k),y?y.alias.push($):(K=K||$,K!==$&&K.alias.push($),w&&p.name&&!CE($)&&o(p.name)),cA($)&&c($),N.children){const ae=N.children;for(let R=0;R<ae.length;R++)r(ae[R],$,y&&y.children[R])}y=y||$}return K?()=>{o(K)}:Cc}function o(p){if(oA(p)){const g=s.get(p);g&&(s.delete(p),t.splice(t.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=t.indexOf(p);g>-1&&(t.splice(g,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return t}function c(p){const g=RM(p,t);t.splice(g,0,p),p.record.name&&!CE(p)&&s.set(p.record.name,p)}function h(p,g){let y,w={},N,k;if("name"in p&&p.name){if(y=s.get(p.name),!y)throw Za(1,{location:p});k=y.record.name,w=rt(IE(g.params,y.keys.filter(K=>!K.optional).concat(y.parent?y.parent.keys.filter(K=>K.optional):[]).map(K=>K.name)),p.params&&IE(p.params,y.keys.map(K=>K.name))),N=y.stringify(w)}else if(p.path!=null)N=p.path,y=t.find(K=>K.re.test(N)),y&&(w=y.parse(N),k=y.record.name);else{if(y=g.name?s.get(g.name):t.find(K=>K.re.test(g.path)),!y)throw Za(1,{location:p,currentLocation:g});k=y.record.name,w=rt({},g.params,p.params),N=y.stringify(w)}const F=[];let $=y;for(;$;)F.unshift($.record),$=$.parent;return{name:k,path:N,params:w,matched:F,meta:SM(F)}}n.forEach(p=>r(p));function d(){t.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function IE(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function AE(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:CM(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function CM(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function CE(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function SM(n){return n.reduce((e,t)=>rt(e,t.meta),{})}function SE(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}function RM(n,e){let t=0,s=e.length;for(;t!==s;){const r=t+s>>1;lA(n,e[r])<0?s=r:t=r+1}const i=PM(n);return i&&(s=e.lastIndexOf(i,s-1)),s}function PM(n){let e=n;for(;e=e.parent;)if(cA(e)&&lA(n,e)===0)return e}function cA({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function NM(n){const e={};if(n===""||n==="?")return e;const s=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(eA," "),o=r.indexOf("="),a=Qc(o<0?r:r.slice(0,o)),c=o<0?null:Qc(r.slice(o+1));if(a in e){let h=e[a];$s(h)||(h=e[a]=[h]),h.push(c)}else e[a]=c}return e}function RE(n){let e="";for(let t in n){const s=n[t];if(t=YL(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}($s(s)?s.map(r=>r&&N_(r)):[s&&N_(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function OM(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=$s(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const kM=Symbol(""),PE=Symbol(""),yf=Symbol(""),zm=Symbol(""),k_=Symbol("");function ic(){let n=[];function e(s){return n.push(s),()=>{const i=n.indexOf(s);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function _r(n,e,t,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const h=g=>{g===!1?c(Za(4,{from:t,to:e})):g instanceof Error?c(g):mM(g)?c(Za(2,{from:e,to:g})):(o&&s.enterCallbacks[i]===o&&typeof g=="function"&&o.push(g),a())},d=r(()=>n.call(s&&s.instances[i],e,t,h));let p=Promise.resolve(d);n.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function Lp(n,e,t,s,i=r=>r()){const r=[];for(const o of n)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(JI(c)){const d=(c.__vccOpts||c)[e];d&&r.push(_r(d,t,s,o,a,i))}else{let h=c();r.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=$L(d)?d.default:d;o.mods[a]=d,o.components[a]=p;const y=(p.__vccOpts||p)[e];return y&&_r(y,t,s,o,a,i)()}))}}return r}function NE(n){const e=Ds(yf),t=Ds(zm),s=Rs(()=>{const c=Ua(n.to);return e.resolve(c)}),i=Rs(()=>{const{matched:c}=s.value,{length:h}=c,d=c[h-1],p=t.matched;if(!d||!p.length)return-1;const g=p.findIndex(Ja.bind(null,d));if(g>-1)return g;const y=OE(c[h-2]);return h>1&&OE(d)===y&&p[p.length-1].path!==y?p.findIndex(Ja.bind(null,c[h-2])):g}),r=Rs(()=>i.value>-1&&VM(t.params,s.value.params)),o=Rs(()=>i.value>-1&&i.value===t.matched.length-1&&iA(t.params,s.value.params));function a(c={}){if(MM(c)){const h=e[Ua(n.replace)?"replace":"push"](Ua(n.to)).catch(Cc);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:Rs(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function DM(n){return n.length===1?n[0]:n}const xM=Sb({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:NE,setup(n,{slots:e}){const t=nf(NE(n)),{options:s}=Ds(yf),i=Rs(()=>({[kE(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[kE(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&DM(e.default(t));return n.custom?r:Zb("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},r)}}}),LM=xM;function MM(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function VM(n,e){for(const t in e){const s=e[t],i=n[t];if(typeof s=="string"){if(s!==i)return!1}else if(!$s(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function OE(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const kE=(n,e,t)=>n??e??t,FM=Sb({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=Ds(k_),i=Rs(()=>n.route||s.value),r=Ds(PE,0),o=Rs(()=>{let h=Ua(r);const{matched:d}=i.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),a=Rs(()=>i.value.matched[o.value]);xh(PE,Rs(()=>o.value+1)),xh(kM,a),xh(k_,i);const c=dn();return Lh(()=>[c.value,a.value,n.name],([h,d,p],[g,y,w])=>{d&&(d.instances[p]=h,y&&y!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=y.leaveGuards),d.updateGuards.size||(d.updateGuards=y.updateGuards))),h&&d&&(!y||!Ja(d,y)||!g)&&(d.enterCallbacks[p]||[]).forEach(N=>N(h))},{flush:"post"}),()=>{const h=i.value,d=n.name,p=a.value,g=p&&p.components[d];if(!g)return DE(t.default,{Component:g,route:h});const y=p.props[d],w=y?y===!0?h.params:typeof y=="function"?y(h):y:null,k=Zb(g,rt({},w,e,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return DE(t.default,{Component:k,route:h})||k}}});function DE(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const $M=FM;function UM(n){const e=AM(n.routes,n),t=n.parseQuery||NM,s=n.stringifyQuery||RE,i=n.history,r=ic(),o=ic(),a=ic(),c=sN(hr);let h=hr;Ca&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Dp.bind(null,W=>""+W),p=Dp.bind(null,JL),g=Dp.bind(null,Qc);function y(W,B){let ie,fe;return oA(W)?(ie=e.getRecordMatcher(W),fe=B):fe=W,e.addRoute(fe,ie)}function w(W){const B=e.getRecordMatcher(W);B&&e.removeRoute(B)}function N(){return e.getRoutes().map(W=>W.record)}function k(W){return!!e.getRecordMatcher(W)}function F(W,B){if(B=rt({},B||c.value),typeof W=="string"){const M=xp(t,W,B.path),q=e.resolve({path:M.path},B),z=i.createHref(M.fullPath);return rt(M,q,{params:g(q.params),hash:Qc(M.hash),redirectedFrom:void 0,href:z})}let ie;if(W.path!=null)ie=rt({},W,{path:xp(t,W.path,B.path).path});else{const M=rt({},W.params);for(const q in M)M[q]==null&&delete M[q];ie=rt({},W,{params:p(M)}),B.params=p(B.params)}const fe=e.resolve(ie,B),je=W.hash||"";fe.params=d(g(fe.params));const I=tM(s,rt({},W,{hash:QL(je),path:fe.path})),S=i.createHref(I);return rt({fullPath:I,hash:je,query:s===RE?OM(W.query):W.query||{}},fe,{redirectedFrom:void 0,href:S})}function $(W){return typeof W=="string"?xp(t,W,c.value.path):rt({},W)}function K(W,B){if(h!==W)return Za(8,{from:B,to:W})}function H(W){return R(W)}function ce(W){return H(rt($(W),{replace:!0}))}function ae(W){const B=W.matched[W.matched.length-1];if(B&&B.redirect){const{redirect:ie}=B;let fe=typeof ie=="function"?ie(W):ie;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=$(fe):{path:fe},fe.params={}),rt({query:W.query,hash:W.hash,params:fe.path!=null?{}:W.params},fe)}}function R(W,B){const ie=h=F(W),fe=c.value,je=W.state,I=W.force,S=W.replace===!0,M=ae(ie);if(M)return R(rt($(M),{state:typeof M=="object"?rt({},je,M.state):je,force:I,replace:S}),B||ie);const q=ie;q.redirectedFrom=B;let z;return!I&&nM(s,fe,ie)&&(z=Za(16,{to:q,from:fe}),$t(fe,fe,!0,!1)),(z?Promise.resolve(z):P(q,fe)).catch(Q=>Ci(Q)?Ci(Q,2)?Q:G(Q):Ve(Q,q,fe)).then(Q=>{if(Q){if(Ci(Q,2))return R(rt({replace:S},$(Q.to),{state:typeof Q.to=="object"?rt({},je,Q.to.state):je,force:I}),B||q)}else Q=x(q,fe,!0,S,je);return O(q,fe,Q),Q})}function b(W,B){const ie=K(W,B);return ie?Promise.reject(ie):Promise.resolve()}function A(W){const B=It.values().next().value;return B&&typeof B.runWithContext=="function"?B.runWithContext(W):W()}function P(W,B){let ie;const[fe,je,I]=jM(W,B);ie=Lp(fe.reverse(),"beforeRouteLeave",W,B);for(const M of fe)M.leaveGuards.forEach(q=>{ie.push(_r(q,W,B))});const S=b.bind(null,W,B);return ie.push(S),tt(ie).then(()=>{ie=[];for(const M of r.list())ie.push(_r(M,W,B));return ie.push(S),tt(ie)}).then(()=>{ie=Lp(je,"beforeRouteUpdate",W,B);for(const M of je)M.updateGuards.forEach(q=>{ie.push(_r(q,W,B))});return ie.push(S),tt(ie)}).then(()=>{ie=[];for(const M of I)if(M.beforeEnter)if($s(M.beforeEnter))for(const q of M.beforeEnter)ie.push(_r(q,W,B));else ie.push(_r(M.beforeEnter,W,B));return ie.push(S),tt(ie)}).then(()=>(W.matched.forEach(M=>M.enterCallbacks={}),ie=Lp(I,"beforeRouteEnter",W,B,A),ie.push(S),tt(ie))).then(()=>{ie=[];for(const M of o.list())ie.push(_r(M,W,B));return ie.push(S),tt(ie)}).catch(M=>Ci(M,8)?M:Promise.reject(M))}function O(W,B,ie){a.list().forEach(fe=>A(()=>fe(W,B,ie)))}function x(W,B,ie,fe,je){const I=K(W,B);if(I)return I;const S=B===hr,M=Ca?history.state:{};ie&&(fe||S?i.replace(W.fullPath,rt({scroll:S&&M&&M.scroll},je)):i.push(W.fullPath,je)),c.value=W,$t(W,B,ie,S),G()}let C;function vt(){C||(C=i.listen((W,B,ie)=>{if(!At.listening)return;const fe=F(W),je=ae(fe);if(je){R(rt(je,{replace:!0,force:!0}),fe).catch(Cc);return}h=fe;const I=c.value;Ca&&uM(yE(I.fullPath,ie.delta),vf()),P(fe,I).catch(S=>Ci(S,12)?S:Ci(S,2)?(R(rt($(S.to),{force:!0}),fe).then(M=>{Ci(M,20)&&!ie.delta&&ie.type===Yc.pop&&i.go(-1,!1)}).catch(Cc),Promise.reject()):(ie.delta&&i.go(-ie.delta,!1),Ve(S,fe,I))).then(S=>{S=S||x(fe,I,!1),S&&(ie.delta&&!Ci(S,8)?i.go(-ie.delta,!1):ie.type===Yc.pop&&Ci(S,20)&&i.go(-1,!1)),O(fe,I,S)}).catch(Cc)}))}let Nt=ic(),qe=ic(),Ae;function Ve(W,B,ie){G(W);const fe=qe.list();return fe.length?fe.forEach(je=>je(W,B,ie)):console.error(W),Promise.reject(W)}function Rt(){return Ae&&c.value!==hr?Promise.resolve():new Promise((W,B)=>{Nt.add([W,B])})}function G(W){return Ae||(Ae=!W,vt(),Nt.list().forEach(([B,ie])=>W?ie(W):B()),Nt.reset()),W}function $t(W,B,ie,fe){const{scrollBehavior:je}=n;if(!Ca||!je)return Promise.resolve();const I=!ie&&hM(yE(W.fullPath,0))||(fe||!ie)&&history.state&&history.state.scroll||null;return Cm().then(()=>je(W,B,I)).then(S=>S&&cM(S)).catch(S=>Ve(S,W,B))}const Ze=W=>i.go(W);let et;const It=new Set,At={currentRoute:c,listening:!0,addRoute:y,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:N,resolve:F,options:n,push:H,replace:ce,go:Ze,back:()=>Ze(-1),forward:()=>Ze(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:qe.add,isReady:Rt,install(W){const B=this;W.component("RouterLink",LM),W.component("RouterView",$M),W.config.globalProperties.$router=B,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>Ua(c)}),Ca&&!et&&c.value===hr&&(et=!0,H(i.location).catch(je=>{}));const ie={};for(const je in hr)Object.defineProperty(ie,je,{get:()=>c.value[je],enumerable:!0});W.provide(yf,B),W.provide(zm,vb(ie)),W.provide(k_,c);const fe=W.unmount;It.add(W),W.unmount=function(){It.delete(W),It.size<1&&(h=hr,C&&C(),C=null,c.value=hr,et=!1,Ae=!1),fe()}}};function tt(W){return W.reduce((B,ie)=>B.then(()=>A(ie)),Promise.resolve())}return At}function jM(n,e){const t=[],s=[],i=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(n.matched.find(h=>Ja(h,a))?s.push(a):t.push(a));const c=n.matched[o];c&&(e.matched.find(h=>Ja(h,c))||i.push(c))}return[t,s,i]}function uA(){return Ds(yf)}function BM(n){return Ds(zm)}var Bh={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var HM=Bh.exports,xE;function WM(){return xE||(xE=1,function(n,e){(function(t,s){n.exports=s()})(HM,function(){const t=new Map,s={set(v,u,_){t.has(v)||t.set(v,new Map);const E=t.get(v);E.has(u)||E.size===0?E.set(u,_):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(E.keys())[0]}.`)},get:(v,u)=>t.has(v)&&t.get(v).get(u)||null,remove(v,u){if(!t.has(v))return;const _=t.get(v);_.delete(u),_.size===0&&t.delete(v)}},i="transitionend",r=v=>(v&&window.CSS&&window.CSS.escape&&(v=v.replace(/#([^\s"#']+)/g,(u,_)=>`#${CSS.escape(_)}`)),v),o=v=>{v.dispatchEvent(new Event(i))},a=v=>!(!v||typeof v!="object")&&(v.jquery!==void 0&&(v=v[0]),v.nodeType!==void 0),c=v=>a(v)?v.jquery?v[0]:v:typeof v=="string"&&v.length>0?document.querySelector(r(v)):null,h=v=>{if(!a(v)||v.getClientRects().length===0)return!1;const u=getComputedStyle(v).getPropertyValue("visibility")==="visible",_=v.closest("details:not([open])");if(!_)return u;if(_!==v){const E=v.closest("summary");if(E&&E.parentNode!==_||E===null)return!1}return u},d=v=>!v||v.nodeType!==Node.ELEMENT_NODE||!!v.classList.contains("disabled")||(v.disabled!==void 0?v.disabled:v.hasAttribute("disabled")&&v.getAttribute("disabled")!=="false"),p=v=>{if(!document.documentElement.attachShadow)return null;if(typeof v.getRootNode=="function"){const u=v.getRootNode();return u instanceof ShadowRoot?u:null}return v instanceof ShadowRoot?v:v.parentNode?p(v.parentNode):null},g=()=>{},y=v=>{v.offsetHeight},w=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,N=[],k=()=>document.documentElement.dir==="rtl",F=v=>{var u;u=()=>{const _=w();if(_){const E=v.NAME,D=_.fn[E];_.fn[E]=v.jQueryInterface,_.fn[E].Constructor=v,_.fn[E].noConflict=()=>(_.fn[E]=D,v.jQueryInterface)}},document.readyState==="loading"?(N.length||document.addEventListener("DOMContentLoaded",()=>{for(const _ of N)_()}),N.push(u)):u()},$=(v,u=[],_=v)=>typeof v=="function"?v(...u):_,K=(v,u,_=!0)=>{if(!_)return void $(v);const E=(j=>{if(!j)return 0;let{transitionDuration:X,transitionDelay:oe}=window.getComputedStyle(j);const pe=Number.parseFloat(X),me=Number.parseFloat(oe);return pe||me?(X=X.split(",")[0],oe=oe.split(",")[0],1e3*(Number.parseFloat(X)+Number.parseFloat(oe))):0})(u)+5;let D=!1;const L=({target:j})=>{j===u&&(D=!0,u.removeEventListener(i,L),$(v))};u.addEventListener(i,L),setTimeout(()=>{D||o(u)},E)},H=(v,u,_,E)=>{const D=v.length;let L=v.indexOf(u);return L===-1?!_&&E?v[D-1]:v[0]:(L+=_?1:-1,E&&(L=(L+D)%D),v[Math.max(0,Math.min(L,D-1))])},ce=/[^.]*(?=\..*)\.|.*/,ae=/\..*/,R=/::\d+$/,b={};let A=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"},O=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function x(v,u){return u&&`${u}::${A++}`||v.uidEvent||A++}function C(v){const u=x(v);return v.uidEvent=u,b[u]=b[u]||{},b[u]}function vt(v,u,_=null){return Object.values(v).find(E=>E.callable===u&&E.delegationSelector===_)}function Nt(v,u,_){const E=typeof u=="string",D=E?_:u||_;let L=Rt(v);return O.has(L)||(L=v),[E,D,L]}function qe(v,u,_,E,D){if(typeof u!="string"||!v)return;let[L,j,X]=Nt(u,_,E);u in P&&(j=(xe=>function(Oe){if(!Oe.relatedTarget||Oe.relatedTarget!==Oe.delegateTarget&&!Oe.delegateTarget.contains(Oe.relatedTarget))return xe.call(this,Oe)})(j));const oe=C(v),pe=oe[X]||(oe[X]={}),me=vt(pe,j,L?_:null);if(me)return void(me.oneOff=me.oneOff&&D);const he=x(j,u.replace(ce,"")),$e=L?function(Ce,xe,Oe){return function Le(ft){const Et=Ce.querySelectorAll(xe);for(let{target:Be}=ft;Be&&Be!==this;Be=Be.parentNode)for(const it of Et)if(it===Be)return $t(ft,{delegateTarget:Be}),Le.oneOff&&G.off(Ce,ft.type,xe,Oe),Oe.apply(Be,[ft])}}(v,_,j):function(Ce,xe){return function Oe(Le){return $t(Le,{delegateTarget:Ce}),Oe.oneOff&&G.off(Ce,Le.type,xe),xe.apply(Ce,[Le])}}(v,j);$e.delegationSelector=L?_:null,$e.callable=j,$e.oneOff=D,$e.uidEvent=he,pe[he]=$e,v.addEventListener(X,$e,L)}function Ae(v,u,_,E,D){const L=vt(u[_],E,D);L&&(v.removeEventListener(_,L,!!D),delete u[_][L.uidEvent])}function Ve(v,u,_,E){const D=u[_]||{};for(const[L,j]of Object.entries(D))L.includes(E)&&Ae(v,u,_,j.callable,j.delegationSelector)}function Rt(v){return v=v.replace(ae,""),P[v]||v}const G={on(v,u,_,E){qe(v,u,_,E,!1)},one(v,u,_,E){qe(v,u,_,E,!0)},off(v,u,_,E){if(typeof u!="string"||!v)return;const[D,L,j]=Nt(u,_,E),X=j!==u,oe=C(v),pe=oe[j]||{},me=u.startsWith(".");if(L===void 0){if(me)for(const he of Object.keys(oe))Ve(v,oe,he,u.slice(1));for(const[he,$e]of Object.entries(pe)){const Ce=he.replace(R,"");X&&!u.includes(Ce)||Ae(v,oe,j,$e.callable,$e.delegationSelector)}}else{if(!Object.keys(pe).length)return;Ae(v,oe,j,L,D?_:null)}},trigger(v,u,_){if(typeof u!="string"||!v)return null;const E=w();let D=null,L=!0,j=!0,X=!1;u!==Rt(u)&&E&&(D=E.Event(u,_),E(v).trigger(D),L=!D.isPropagationStopped(),j=!D.isImmediatePropagationStopped(),X=D.isDefaultPrevented());const oe=$t(new Event(u,{bubbles:L,cancelable:!0}),_);return X&&oe.preventDefault(),j&&v.dispatchEvent(oe),oe.defaultPrevented&&D&&D.preventDefault(),oe}};function $t(v,u={}){for(const[_,E]of Object.entries(u))try{v[_]=E}catch{Object.defineProperty(v,_,{configurable:!0,get:()=>E})}return v}function Ze(v){if(v==="true")return!0;if(v==="false")return!1;if(v===Number(v).toString())return Number(v);if(v===""||v==="null")return null;if(typeof v!="string")return v;try{return JSON.parse(decodeURIComponent(v))}catch{return v}}function et(v){return v.replace(/[A-Z]/g,u=>`-${u.toLowerCase()}`)}const It={setDataAttribute(v,u,_){v.setAttribute(`data-bs-${et(u)}`,_)},removeDataAttribute(v,u){v.removeAttribute(`data-bs-${et(u)}`)},getDataAttributes(v){if(!v)return{};const u={},_=Object.keys(v.dataset).filter(E=>E.startsWith("bs")&&!E.startsWith("bsConfig"));for(const E of _){let D=E.replace(/^bs/,"");D=D.charAt(0).toLowerCase()+D.slice(1,D.length),u[D]=Ze(v.dataset[E])}return u},getDataAttribute:(v,u)=>Ze(v.getAttribute(`data-bs-${et(u)}`))};class At{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(u){return u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u}_mergeConfigObj(u,_){const E=a(_)?It.getDataAttribute(_,"config"):{};return{...this.constructor.Default,...typeof E=="object"?E:{},...a(_)?It.getDataAttributes(_):{},...typeof u=="object"?u:{}}}_typeCheckConfig(u,_=this.constructor.DefaultType){for(const[D,L]of Object.entries(_)){const j=u[D],X=a(j)?"element":(E=j)==null?`${E}`:Object.prototype.toString.call(E).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(L).test(X))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${D}" provided type "${X}" but expected type "${L}".`)}var E}}class tt extends At{constructor(u,_){super(),(u=c(u))&&(this._element=u,this._config=this._getConfig(_),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),G.off(this._element,this.constructor.EVENT_KEY);for(const u of Object.getOwnPropertyNames(this))this[u]=null}_queueCallback(u,_,E=!0){K(u,_,E)}_getConfig(u){return u=this._mergeConfigObj(u,this._element),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}static getInstance(u){return s.get(c(u),this.DATA_KEY)}static getOrCreateInstance(u,_={}){return this.getInstance(u)||new this(u,typeof _=="object"?_:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(u){return`${u}${this.EVENT_KEY}`}}const W=v=>{let u=v.getAttribute("data-bs-target");if(!u||u==="#"){let _=v.getAttribute("href");if(!_||!_.includes("#")&&!_.startsWith("."))return null;_.includes("#")&&!_.startsWith("#")&&(_=`#${_.split("#")[1]}`),u=_&&_!=="#"?_.trim():null}return u?u.split(",").map(_=>r(_)).join(","):null},B={find:(v,u=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(u,v)),findOne:(v,u=document.documentElement)=>Element.prototype.querySelector.call(u,v),children:(v,u)=>[].concat(...v.children).filter(_=>_.matches(u)),parents(v,u){const _=[];let E=v.parentNode.closest(u);for(;E;)_.push(E),E=E.parentNode.closest(u);return _},prev(v,u){let _=v.previousElementSibling;for(;_;){if(_.matches(u))return[_];_=_.previousElementSibling}return[]},next(v,u){let _=v.nextElementSibling;for(;_;){if(_.matches(u))return[_];_=_.nextElementSibling}return[]},focusableChildren(v){const u=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(_=>`${_}:not([tabindex^="-"])`).join(",");return this.find(u,v).filter(_=>!d(_)&&h(_))},getSelectorFromElement(v){const u=W(v);return u&&B.findOne(u)?u:null},getElementFromSelector(v){const u=W(v);return u?B.findOne(u):null},getMultipleElementsFromSelector(v){const u=W(v);return u?B.find(u):[]}},ie=(v,u="hide")=>{const _=`click.dismiss${v.EVENT_KEY}`,E=v.NAME;G.on(document,_,`[data-bs-dismiss="${E}"]`,function(D){if(["A","AREA"].includes(this.tagName)&&D.preventDefault(),d(this))return;const L=B.getElementFromSelector(this)||this.closest(`.${E}`);v.getOrCreateInstance(L)[u]()})},fe=".bs.alert",je=`close${fe}`,I=`closed${fe}`;class S extends tt{static get NAME(){return"alert"}close(){if(G.trigger(this._element,je).defaultPrevented)return;this._element.classList.remove("show");const u=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,u)}_destroyElement(){this._element.remove(),G.trigger(this._element,I),this.dispose()}static jQueryInterface(u){return this.each(function(){const _=S.getOrCreateInstance(this);if(typeof u=="string"){if(_[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);_[u](this)}})}}ie(S,"close"),F(S);const M='[data-bs-toggle="button"]';class q extends tt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(u){return this.each(function(){const _=q.getOrCreateInstance(this);u==="toggle"&&_[u]()})}}G.on(document,"click.bs.button.data-api",M,v=>{v.preventDefault();const u=v.target.closest(M);q.getOrCreateInstance(u).toggle()}),F(q);const z=".bs.swipe",Q=`touchstart${z}`,le=`touchmove${z}`,se=`touchend${z}`,te=`pointerdown${z}`,J=`pointerup${z}`,Ee={endCallback:null,leftCallback:null,rightCallback:null},ue={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class _e extends At{constructor(u,_){super(),this._element=u,u&&_e.isSupported()&&(this._config=this._getConfig(_),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ee}static get DefaultType(){return ue}static get NAME(){return"swipe"}dispose(){G.off(this._element,z)}_start(u){this._supportPointerEvents?this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX):this._deltaX=u.touches[0].clientX}_end(u){this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX-this._deltaX),this._handleSwipe(),$(this._config.endCallback)}_move(u){this._deltaX=u.touches&&u.touches.length>1?0:u.touches[0].clientX-this._deltaX}_handleSwipe(){const u=Math.abs(this._deltaX);if(u<=40)return;const _=u/this._deltaX;this._deltaX=0,_&&$(_>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(G.on(this._element,te,u=>this._start(u)),G.on(this._element,J,u=>this._end(u)),this._element.classList.add("pointer-event")):(G.on(this._element,Q,u=>this._start(u)),G.on(this._element,le,u=>this._move(u)),G.on(this._element,se,u=>this._end(u)))}_eventIsPointerPenTouch(u){return this._supportPointerEvents&&(u.pointerType==="pen"||u.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ve=".bs.carousel",ye=".data-api",Ie="next",De="prev",Ot="left",Dt="right",On=`slide${ve}`,Ut=`slid${ve}`,js=`keydown${ve}`,Xr=`mouseenter${ve}`,Wt=`mouseleave${ve}`,kn=`dragstart${ve}`,ta=`load${ve}${ye}`,Nl=`click${ve}${ye}`,Ol="carousel",Jr="active",Yi=".active",na=".carousel-item",kl=Yi+na,_i={ArrowLeft:Dt,ArrowRight:Ot},Fu={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},sa={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class mi extends tt{constructor(u,_){super(u,_),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=B.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ol&&this.cycle()}static get Default(){return Fu}static get DefaultType(){return sa}static get NAME(){return"carousel"}next(){this._slide(Ie)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(De)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?G.one(this._element,Ut,()=>this.cycle()):this.cycle())}to(u){const _=this._getItems();if(u>_.length-1||u<0)return;if(this._isSliding)return void G.one(this._element,Ut,()=>this.to(u));const E=this._getItemIndex(this._getActive());if(E===u)return;const D=u>E?Ie:De;this._slide(D,_[u])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(u){return u.defaultInterval=u.interval,u}_addEventListeners(){this._config.keyboard&&G.on(this._element,js,u=>this._keydown(u)),this._config.pause==="hover"&&(G.on(this._element,Xr,()=>this.pause()),G.on(this._element,Wt,()=>this._maybeEnableCycle())),this._config.touch&&_e.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const _ of B.find(".carousel-item img",this._element))G.on(_,kn,E=>E.preventDefault());const u={leftCallback:()=>this._slide(this._directionToOrder(Ot)),rightCallback:()=>this._slide(this._directionToOrder(Dt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new _e(this._element,u)}_keydown(u){if(/input|textarea/i.test(u.target.tagName))return;const _=_i[u.key];_&&(u.preventDefault(),this._slide(this._directionToOrder(_)))}_getItemIndex(u){return this._getItems().indexOf(u)}_setActiveIndicatorElement(u){if(!this._indicatorsElement)return;const _=B.findOne(Yi,this._indicatorsElement);_.classList.remove(Jr),_.removeAttribute("aria-current");const E=B.findOne(`[data-bs-slide-to="${u}"]`,this._indicatorsElement);E&&(E.classList.add(Jr),E.setAttribute("aria-current","true"))}_updateInterval(){const u=this._activeElement||this._getActive();if(!u)return;const _=Number.parseInt(u.getAttribute("data-bs-interval"),10);this._config.interval=_||this._config.defaultInterval}_slide(u,_=null){if(this._isSliding)return;const E=this._getActive(),D=u===Ie,L=_||H(this._getItems(),E,D,this._config.wrap);if(L===E)return;const j=this._getItemIndex(L),X=he=>G.trigger(this._element,he,{relatedTarget:L,direction:this._orderToDirection(u),from:this._getItemIndex(E),to:j});if(X(On).defaultPrevented||!E||!L)return;const oe=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(j),this._activeElement=L;const pe=D?"carousel-item-start":"carousel-item-end",me=D?"carousel-item-next":"carousel-item-prev";L.classList.add(me),y(L),E.classList.add(pe),L.classList.add(pe),this._queueCallback(()=>{L.classList.remove(pe,me),L.classList.add(Jr),E.classList.remove(Jr,me,pe),this._isSliding=!1,X(Ut)},E,this._isAnimated()),oe&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return B.findOne(kl,this._element)}_getItems(){return B.find(na,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(u){return k()?u===Ot?De:Ie:u===Ot?Ie:De}_orderToDirection(u){return k()?u===De?Ot:Dt:u===De?Dt:Ot}static jQueryInterface(u){return this.each(function(){const _=mi.getOrCreateInstance(this,u);if(typeof u!="number"){if(typeof u=="string"){if(_[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);_[u]()}}else _.to(u)})}}G.on(document,Nl,"[data-bs-slide], [data-bs-slide-to]",function(v){const u=B.getElementFromSelector(this);if(!u||!u.classList.contains(Ol))return;v.preventDefault();const _=mi.getOrCreateInstance(u),E=this.getAttribute("data-bs-slide-to");return E?(_.to(E),void _._maybeEnableCycle()):It.getDataAttribute(this,"slide")==="next"?(_.next(),void _._maybeEnableCycle()):(_.prev(),void _._maybeEnableCycle())}),G.on(window,ta,()=>{const v=B.find('[data-bs-ride="carousel"]');for(const u of v)mi.getOrCreateInstance(u)}),F(mi);const gs=".bs.collapse",$u=`show${gs}`,sn=`shown${gs}`,Uu=`hide${gs}`,Zr=`hidden${gs}`,eo=`click${gs}.data-api`,Dl="show",Xi="collapse",vs="collapsing",Zf=`:scope .${Xi} .${Xi}`,xl='[data-bs-toggle="collapse"]',ia={parent:null,toggle:!0},ju={parent:"(null|element)",toggle:"boolean"};class Bs extends tt{constructor(u,_){super(u,_),this._isTransitioning=!1,this._triggerArray=[];const E=B.find(xl);for(const D of E){const L=B.getSelectorFromElement(D),j=B.find(L).filter(X=>X===this._element);L!==null&&j.length&&this._triggerArray.push(D)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ia}static get DefaultType(){return ju}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let u=[];if(this._config.parent&&(u=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(D=>D!==this._element).map(D=>Bs.getOrCreateInstance(D,{toggle:!1}))),u.length&&u[0]._isTransitioning||G.trigger(this._element,$u).defaultPrevented)return;for(const D of u)D.hide();const _=this._getDimension();this._element.classList.remove(Xi),this._element.classList.add(vs),this._element.style[_]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const E=`scroll${_[0].toUpperCase()+_.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(vs),this._element.classList.add(Xi,Dl),this._element.style[_]="",G.trigger(this._element,sn)},this._element,!0),this._element.style[_]=`${this._element[E]}px`}hide(){if(this._isTransitioning||!this._isShown()||G.trigger(this._element,Uu).defaultPrevented)return;const u=this._getDimension();this._element.style[u]=`${this._element.getBoundingClientRect()[u]}px`,y(this._element),this._element.classList.add(vs),this._element.classList.remove(Xi,Dl);for(const _ of this._triggerArray){const E=B.getElementFromSelector(_);E&&!this._isShown(E)&&this._addAriaAndCollapsedClass([_],!1)}this._isTransitioning=!0,this._element.style[u]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(vs),this._element.classList.add(Xi),G.trigger(this._element,Zr)},this._element,!0)}_isShown(u=this._element){return u.classList.contains(Dl)}_configAfterMerge(u){return u.toggle=!!u.toggle,u.parent=c(u.parent),u}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const u=this._getFirstLevelChildren(xl);for(const _ of u){const E=B.getElementFromSelector(_);E&&this._addAriaAndCollapsedClass([_],this._isShown(E))}}_getFirstLevelChildren(u){const _=B.find(Zf,this._config.parent);return B.find(u,this._config.parent).filter(E=>!_.includes(E))}_addAriaAndCollapsedClass(u,_){if(u.length)for(const E of u)E.classList.toggle("collapsed",!_),E.setAttribute("aria-expanded",_)}static jQueryInterface(u){const _={};return typeof u=="string"&&/show|hide/.test(u)&&(_.toggle=!1),this.each(function(){const E=Bs.getOrCreateInstance(this,_);if(typeof u=="string"){if(E[u]===void 0)throw new TypeError(`No method named "${u}"`);E[u]()}})}}G.on(document,eo,xl,function(v){(v.target.tagName==="A"||v.delegateTarget&&v.delegateTarget.tagName==="A")&&v.preventDefault();for(const u of B.getMultipleElementsFromSelector(this))Bs.getOrCreateInstance(u,{toggle:!1}).toggle()}),F(Bs);var jt="top",xt="bottom",ln="right",Jt="left",Ji="auto",Hs=[jt,xt,ln,Jt],Ws="start",gi="end",Bu="clippingParents",Zi="viewport",vi="popper",ra="reference",yi=Hs.reduce(function(v,u){return v.concat([u+"-"+Ws,u+"-"+gi])},[]),ys=[].concat(Hs,[Ji]).reduce(function(v,u){return v.concat([u,u+"-"+Ws,u+"-"+gi])},[]),oa="beforeRead",Hu="read",Ll="afterRead",Ml="beforeMain",Vl="main",aa="afterMain",la="beforeWrite",Fl="write",$l="afterWrite",Wu=[oa,Hu,Ll,Ml,Vl,aa,la,Fl,$l];function ns(v){return v?(v.nodeName||"").toLowerCase():null}function cn(v){if(v==null)return window;if(v.toString()!=="[object Window]"){var u=v.ownerDocument;return u&&u.defaultView||window}return v}function qs(v){return v instanceof cn(v).Element||v instanceof Element}function Dn(v){return v instanceof cn(v).HTMLElement||v instanceof HTMLElement}function Es(v){return typeof ShadowRoot<"u"&&(v instanceof cn(v).ShadowRoot||v instanceof ShadowRoot)}const Hn={name:"applyStyles",enabled:!0,phase:"write",fn:function(v){var u=v.state;Object.keys(u.elements).forEach(function(_){var E=u.styles[_]||{},D=u.attributes[_]||{},L=u.elements[_];Dn(L)&&ns(L)&&(Object.assign(L.style,E),Object.keys(D).forEach(function(j){var X=D[j];X===!1?L.removeAttribute(j):L.setAttribute(j,X===!0?"":X)}))})},effect:function(v){var u=v.state,_={popper:{position:u.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(u.elements.popper.style,_.popper),u.styles=_,u.elements.arrow&&Object.assign(u.elements.arrow.style,_.arrow),function(){Object.keys(u.elements).forEach(function(E){var D=u.elements[E],L=u.attributes[E]||{},j=Object.keys(u.styles.hasOwnProperty(E)?u.styles[E]:_[E]).reduce(function(X,oe){return X[oe]="",X},{});Dn(D)&&ns(D)&&(Object.assign(D.style,j),Object.keys(L).forEach(function(X){D.removeAttribute(X)}))})}},requires:["computeStyles"]};function wn(v){return v.split("-")[0]}var ss=Math.max,to=Math.min,nt=Math.round;function er(){var v=navigator.userAgentData;return v!=null&&v.brands&&Array.isArray(v.brands)?v.brands.map(function(u){return u.brand+"/"+u.version}).join(" "):navigator.userAgent}function tr(){return!/^((?!chrome|android).)*safari/i.test(er())}function is(v,u,_){u===void 0&&(u=!1),_===void 0&&(_=!1);var E=v.getBoundingClientRect(),D=1,L=1;u&&Dn(v)&&(D=v.offsetWidth>0&&nt(E.width)/v.offsetWidth||1,L=v.offsetHeight>0&&nt(E.height)/v.offsetHeight||1);var j=(qs(v)?cn(v):window).visualViewport,X=!tr()&&_,oe=(E.left+(X&&j?j.offsetLeft:0))/D,pe=(E.top+(X&&j?j.offsetTop:0))/L,me=E.width/D,he=E.height/L;return{width:me,height:he,top:pe,right:oe+me,bottom:pe+he,left:oe,x:oe,y:pe}}function Ul(v){var u=is(v),_=v.offsetWidth,E=v.offsetHeight;return Math.abs(u.width-_)<=1&&(_=u.width),Math.abs(u.height-E)<=1&&(E=u.height),{x:v.offsetLeft,y:v.offsetTop,width:_,height:E}}function jl(v,u){var _=u.getRootNode&&u.getRootNode();if(v.contains(u))return!0;if(_&&Es(_)){var E=u;do{if(E&&v.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function Ts(v){return cn(v).getComputedStyle(v)}function ep(v){return["table","td","th"].indexOf(ns(v))>=0}function Ks(v){return((qs(v)?v.ownerDocument:v.document)||window.document).documentElement}function ca(v){return ns(v)==="html"?v:v.assignedSlot||v.parentNode||(Es(v)?v.host:null)||Ks(v)}function nr(v){return Dn(v)&&Ts(v).position!=="fixed"?v.offsetParent:null}function xn(v){for(var u=cn(v),_=nr(v);_&&ep(_)&&Ts(_).position==="static";)_=nr(_);return _&&(ns(_)==="html"||ns(_)==="body"&&Ts(_).position==="static")?u:_||function(E){var D=/firefox/i.test(er());if(/Trident/i.test(er())&&Dn(E)&&Ts(E).position==="fixed")return null;var L=ca(E);for(Es(L)&&(L=L.host);Dn(L)&&["html","body"].indexOf(ns(L))<0;){var j=Ts(L);if(j.transform!=="none"||j.perspective!=="none"||j.contain==="paint"||["transform","perspective"].indexOf(j.willChange)!==-1||D&&j.willChange==="filter"||D&&j.filter&&j.filter!=="none")return L;L=L.parentNode}return null}(v)||u}function ua(v){return["top","bottom"].indexOf(v)>=0?"x":"y"}function sr(v,u,_){return ss(v,to(u,_))}function Bl(v){return Object.assign({},{top:0,right:0,bottom:0,left:0},v)}function Ei(v,u){return u.reduce(function(_,E){return _[E]=v,_},{})}const qu={name:"arrow",enabled:!0,phase:"main",fn:function(v){var u,_=v.state,E=v.name,D=v.options,L=_.elements.arrow,j=_.modifiersData.popperOffsets,X=wn(_.placement),oe=ua(X),pe=[Jt,ln].indexOf(X)>=0?"height":"width";if(L&&j){var me=function(pt,ht){return Bl(typeof(pt=typeof pt=="function"?pt(Object.assign({},ht.rects,{placement:ht.placement})):pt)!="number"?pt:Ei(pt,Hs))}(D.padding,_),he=Ul(L),$e=oe==="y"?jt:Jt,Ce=oe==="y"?xt:ln,xe=_.rects.reference[pe]+_.rects.reference[oe]-j[oe]-_.rects.popper[pe],Oe=j[oe]-_.rects.reference[oe],Le=xn(L),ft=Le?oe==="y"?Le.clientHeight||0:Le.clientWidth||0:0,Et=xe/2-Oe/2,Be=me[$e],it=ft-he[pe]-me[Ce],Ue=ft/2-he[pe]/2+Et,Qe=sr(Be,Ue,it),ut=oe;_.modifiersData[E]=((u={})[ut]=Qe,u.centerOffset=Qe-Ue,u)}},effect:function(v){var u=v.state,_=v.options.element,E=_===void 0?"[data-popper-arrow]":_;E!=null&&(typeof E!="string"||(E=u.elements.popper.querySelector(E)))&&jl(u.elements.popper,E)&&(u.elements.arrow=E)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ir(v){return v.split("-")[1]}var tp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ws(v){var u,_=v.popper,E=v.popperRect,D=v.placement,L=v.variation,j=v.offsets,X=v.position,oe=v.gpuAcceleration,pe=v.adaptive,me=v.roundOffsets,he=v.isFixed,$e=j.x,Ce=$e===void 0?0:$e,xe=j.y,Oe=xe===void 0?0:xe,Le=typeof me=="function"?me({x:Ce,y:Oe}):{x:Ce,y:Oe};Ce=Le.x,Oe=Le.y;var ft=j.hasOwnProperty("x"),Et=j.hasOwnProperty("y"),Be=Jt,it=jt,Ue=window;if(pe){var Qe=xn(_),ut="clientHeight",pt="clientWidth";Qe===cn(_)&&Ts(Qe=Ks(_)).position!=="static"&&X==="absolute"&&(ut="scrollHeight",pt="scrollWidth"),(D===jt||(D===Jt||D===ln)&&L===gi)&&(it=xt,Oe-=(he&&Qe===Ue&&Ue.visualViewport?Ue.visualViewport.height:Qe[ut])-E.height,Oe*=oe?1:-1),D!==Jt&&(D!==jt&&D!==xt||L!==gi)||(Be=ln,Ce-=(he&&Qe===Ue&&Ue.visualViewport?Ue.visualViewport.width:Qe[pt])-E.width,Ce*=oe?1:-1)}var ht,Vt=Object.assign({position:X},pe&&tp),Wn=me===!0?function(Is,bn){var ls=Is.x,cs=Is.y,Lt=bn.devicePixelRatio||1;return{x:nt(ls*Lt)/Lt||0,y:nt(cs*Lt)/Lt||0}}({x:Ce,y:Oe},cn(_)):{x:Ce,y:Oe};return Ce=Wn.x,Oe=Wn.y,oe?Object.assign({},Vt,((ht={})[it]=Et?"0":"",ht[Be]=ft?"0":"",ht.transform=(Ue.devicePixelRatio||1)<=1?"translate("+Ce+"px, "+Oe+"px)":"translate3d("+Ce+"px, "+Oe+"px, 0)",ht)):Object.assign({},Vt,((u={})[it]=Et?Oe+"px":"",u[Be]=ft?Ce+"px":"",u.transform="",u))}const Hl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(v){var u=v.state,_=v.options,E=_.gpuAcceleration,D=E===void 0||E,L=_.adaptive,j=L===void 0||L,X=_.roundOffsets,oe=X===void 0||X,pe={placement:wn(u.placement),variation:ir(u.placement),popper:u.elements.popper,popperRect:u.rects.popper,gpuAcceleration:D,isFixed:u.options.strategy==="fixed"};u.modifiersData.popperOffsets!=null&&(u.styles.popper=Object.assign({},u.styles.popper,ws(Object.assign({},pe,{offsets:u.modifiersData.popperOffsets,position:u.options.strategy,adaptive:j,roundOffsets:oe})))),u.modifiersData.arrow!=null&&(u.styles.arrow=Object.assign({},u.styles.arrow,ws(Object.assign({},pe,{offsets:u.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:oe})))),u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-placement":u.placement})},data:{}};var ha={passive:!0};const rr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(v){var u=v.state,_=v.instance,E=v.options,D=E.scroll,L=D===void 0||D,j=E.resize,X=j===void 0||j,oe=cn(u.elements.popper),pe=[].concat(u.scrollParents.reference,u.scrollParents.popper);return L&&pe.forEach(function(me){me.addEventListener("scroll",_.update,ha)}),X&&oe.addEventListener("resize",_.update,ha),function(){L&&pe.forEach(function(me){me.removeEventListener("scroll",_.update,ha)}),X&&oe.removeEventListener("resize",_.update,ha)}},data:{}};var da={left:"right",right:"left",bottom:"top",top:"bottom"};function no(v){return v.replace(/left|right|bottom|top/g,function(u){return da[u]})}var so={start:"end",end:"start"};function or(v){return v.replace(/start|end/g,function(u){return so[u]})}function fa(v){var u=cn(v);return{scrollLeft:u.pageXOffset,scrollTop:u.pageYOffset}}function io(v){return is(Ks(v)).left+fa(v).scrollLeft}function yt(v){var u=Ts(v),_=u.overflow,E=u.overflowX,D=u.overflowY;return/auto|scroll|overlay|hidden/.test(_+D+E)}function Ku(v){return["html","body","#document"].indexOf(ns(v))>=0?v.ownerDocument.body:Dn(v)&&yt(v)?v:Ku(ca(v))}function ro(v,u){var _;u===void 0&&(u=[]);var E=Ku(v),D=E===((_=v.ownerDocument)==null?void 0:_.body),L=cn(E),j=D?[L].concat(L.visualViewport||[],yt(E)?E:[]):E,X=u.concat(j);return D?X:X.concat(ro(ca(j)))}function pa(v){return Object.assign({},v,{left:v.x,top:v.y,right:v.x+v.width,bottom:v.y+v.height})}function Wl(v,u,_){return u===Zi?pa(function(E,D){var L=cn(E),j=Ks(E),X=L.visualViewport,oe=j.clientWidth,pe=j.clientHeight,me=0,he=0;if(X){oe=X.width,pe=X.height;var $e=tr();($e||!$e&&D==="fixed")&&(me=X.offsetLeft,he=X.offsetTop)}return{width:oe,height:pe,x:me+io(E),y:he}}(v,_)):qs(u)?function(E,D){var L=is(E,!1,D==="fixed");return L.top=L.top+E.clientTop,L.left=L.left+E.clientLeft,L.bottom=L.top+E.clientHeight,L.right=L.left+E.clientWidth,L.width=E.clientWidth,L.height=E.clientHeight,L.x=L.left,L.y=L.top,L}(u,_):pa(function(E){var D,L=Ks(E),j=fa(E),X=(D=E.ownerDocument)==null?void 0:D.body,oe=ss(L.scrollWidth,L.clientWidth,X?X.scrollWidth:0,X?X.clientWidth:0),pe=ss(L.scrollHeight,L.clientHeight,X?X.scrollHeight:0,X?X.clientHeight:0),me=-j.scrollLeft+io(E),he=-j.scrollTop;return Ts(X||L).direction==="rtl"&&(me+=ss(L.clientWidth,X?X.clientWidth:0)-oe),{width:oe,height:pe,x:me,y:he}}(Ks(v)))}function ql(v){var u,_=v.reference,E=v.element,D=v.placement,L=D?wn(D):null,j=D?ir(D):null,X=_.x+_.width/2-E.width/2,oe=_.y+_.height/2-E.height/2;switch(L){case jt:u={x:X,y:_.y-E.height};break;case xt:u={x:X,y:_.y+_.height};break;case ln:u={x:_.x+_.width,y:oe};break;case Jt:u={x:_.x-E.width,y:oe};break;default:u={x:_.x,y:_.y}}var pe=L?ua(L):null;if(pe!=null){var me=pe==="y"?"height":"width";switch(j){case Ws:u[pe]=u[pe]-(_[me]/2-E[me]/2);break;case gi:u[pe]=u[pe]+(_[me]/2-E[me]/2)}}return u}function bs(v,u){u===void 0&&(u={});var _=u,E=_.placement,D=E===void 0?v.placement:E,L=_.strategy,j=L===void 0?v.strategy:L,X=_.boundary,oe=X===void 0?Bu:X,pe=_.rootBoundary,me=pe===void 0?Zi:pe,he=_.elementContext,$e=he===void 0?vi:he,Ce=_.altBoundary,xe=Ce!==void 0&&Ce,Oe=_.padding,Le=Oe===void 0?0:Oe,ft=Bl(typeof Le!="number"?Le:Ei(Le,Hs)),Et=$e===vi?ra:vi,Be=v.rects.popper,it=v.elements[xe?Et:$e],Ue=function(bn,ls,cs,Lt){var Qs=ls==="clippingParents"?function(_t){var In=ro(ca(_t)),us=["absolute","fixed"].indexOf(Ts(_t).position)>=0&&Dn(_t)?xn(_t):_t;return qs(us)?In.filter(function(cr){return qs(cr)&&jl(cr,us)&&ns(cr)!=="body"}):[]}(bn):[].concat(ls),Ys=[].concat(Qs,[cs]),Ea=Ys[0],Zt=Ys.reduce(function(_t,In){var us=Wl(bn,In,Lt);return _t.top=ss(us.top,_t.top),_t.right=to(us.right,_t.right),_t.bottom=to(us.bottom,_t.bottom),_t.left=ss(us.left,_t.left),_t},Wl(bn,Ea,Lt));return Zt.width=Zt.right-Zt.left,Zt.height=Zt.bottom-Zt.top,Zt.x=Zt.left,Zt.y=Zt.top,Zt}(qs(it)?it:it.contextElement||Ks(v.elements.popper),oe,me,j),Qe=is(v.elements.reference),ut=ql({reference:Qe,element:Be,placement:D}),pt=pa(Object.assign({},Be,ut)),ht=$e===vi?pt:Qe,Vt={top:Ue.top-ht.top+ft.top,bottom:ht.bottom-Ue.bottom+ft.bottom,left:Ue.left-ht.left+ft.left,right:ht.right-Ue.right+ft.right},Wn=v.modifiersData.offset;if($e===vi&&Wn){var Is=Wn[D];Object.keys(Vt).forEach(function(bn){var ls=[ln,xt].indexOf(bn)>=0?1:-1,cs=[jt,xt].indexOf(bn)>=0?"y":"x";Vt[bn]+=Is[cs]*ls})}return Vt}function zu(v,u){u===void 0&&(u={});var _=u,E=_.placement,D=_.boundary,L=_.rootBoundary,j=_.padding,X=_.flipVariations,oe=_.allowedAutoPlacements,pe=oe===void 0?ys:oe,me=ir(E),he=me?X?yi:yi.filter(function(xe){return ir(xe)===me}):Hs,$e=he.filter(function(xe){return pe.indexOf(xe)>=0});$e.length===0&&($e=he);var Ce=$e.reduce(function(xe,Oe){return xe[Oe]=bs(v,{placement:Oe,boundary:D,rootBoundary:L,padding:j})[wn(Oe)],xe},{});return Object.keys(Ce).sort(function(xe,Oe){return Ce[xe]-Ce[Oe]})}const rs={name:"flip",enabled:!0,phase:"main",fn:function(v){var u=v.state,_=v.options,E=v.name;if(!u.modifiersData[E]._skip){for(var D=_.mainAxis,L=D===void 0||D,j=_.altAxis,X=j===void 0||j,oe=_.fallbackPlacements,pe=_.padding,me=_.boundary,he=_.rootBoundary,$e=_.altBoundary,Ce=_.flipVariations,xe=Ce===void 0||Ce,Oe=_.allowedAutoPlacements,Le=u.options.placement,ft=wn(Le),Et=oe||(ft!==Le&&xe?function(_t){if(wn(_t)===Ji)return[];var In=no(_t);return[or(_t),In,or(In)]}(Le):[no(Le)]),Be=[Le].concat(Et).reduce(function(_t,In){return _t.concat(wn(In)===Ji?zu(u,{placement:In,boundary:me,rootBoundary:he,padding:pe,flipVariations:xe,allowedAutoPlacements:Oe}):In)},[]),it=u.rects.reference,Ue=u.rects.popper,Qe=new Map,ut=!0,pt=Be[0],ht=0;ht<Be.length;ht++){var Vt=Be[ht],Wn=wn(Vt),Is=ir(Vt)===Ws,bn=[jt,xt].indexOf(Wn)>=0,ls=bn?"width":"height",cs=bs(u,{placement:Vt,boundary:me,rootBoundary:he,altBoundary:$e,padding:pe}),Lt=bn?Is?ln:Jt:Is?xt:jt;it[ls]>Ue[ls]&&(Lt=no(Lt));var Qs=no(Lt),Ys=[];if(L&&Ys.push(cs[Wn]<=0),X&&Ys.push(cs[Lt]<=0,cs[Qs]<=0),Ys.every(function(_t){return _t})){pt=Vt,ut=!1;break}Qe.set(Vt,Ys)}if(ut)for(var Ea=function(_t){var In=Be.find(function(us){var cr=Qe.get(us);if(cr)return cr.slice(0,_t).every(function(hh){return hh})});if(In)return pt=In,"break"},Zt=xe?3:1;Zt>0&&Ea(Zt)!=="break";Zt--);u.placement!==pt&&(u.modifiersData[E]._skip=!0,u.placement=pt,u.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Kl(v,u,_){return _===void 0&&(_={x:0,y:0}),{top:v.top-u.height-_.y,right:v.right-u.width+_.x,bottom:v.bottom-u.height+_.y,left:v.left-u.width-_.x}}function Gu(v){return[jt,ln,xt,Jt].some(function(u){return v[u]>=0})}const ar={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(v){var u=v.state,_=v.name,E=u.rects.reference,D=u.rects.popper,L=u.modifiersData.preventOverflow,j=bs(u,{elementContext:"reference"}),X=bs(u,{altBoundary:!0}),oe=Kl(j,E),pe=Kl(X,D,L),me=Gu(oe),he=Gu(pe);u.modifiersData[_]={referenceClippingOffsets:oe,popperEscapeOffsets:pe,isReferenceHidden:me,hasPopperEscaped:he},u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-reference-hidden":me,"data-popper-escaped":he})}},zl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(v){var u=v.state,_=v.options,E=v.name,D=_.offset,L=D===void 0?[0,0]:D,j=ys.reduce(function(me,he){return me[he]=function($e,Ce,xe){var Oe=wn($e),Le=[Jt,jt].indexOf(Oe)>=0?-1:1,ft=typeof xe=="function"?xe(Object.assign({},Ce,{placement:$e})):xe,Et=ft[0],Be=ft[1];return Et=Et||0,Be=(Be||0)*Le,[Jt,ln].indexOf(Oe)>=0?{x:Be,y:Et}:{x:Et,y:Be}}(he,u.rects,L),me},{}),X=j[u.placement],oe=X.x,pe=X.y;u.modifiersData.popperOffsets!=null&&(u.modifiersData.popperOffsets.x+=oe,u.modifiersData.popperOffsets.y+=pe),u.modifiersData[E]=j}},oo={name:"popperOffsets",enabled:!0,phase:"read",fn:function(v){var u=v.state,_=v.name;u.modifiersData[_]=ql({reference:u.rects.reference,element:u.rects.popper,placement:u.placement})},data:{}},ao={name:"preventOverflow",enabled:!0,phase:"main",fn:function(v){var u=v.state,_=v.options,E=v.name,D=_.mainAxis,L=D===void 0||D,j=_.altAxis,X=j!==void 0&&j,oe=_.boundary,pe=_.rootBoundary,me=_.altBoundary,he=_.padding,$e=_.tether,Ce=$e===void 0||$e,xe=_.tetherOffset,Oe=xe===void 0?0:xe,Le=bs(u,{boundary:oe,rootBoundary:pe,padding:he,altBoundary:me}),ft=wn(u.placement),Et=ir(u.placement),Be=!Et,it=ua(ft),Ue=it==="x"?"y":"x",Qe=u.modifiersData.popperOffsets,ut=u.rects.reference,pt=u.rects.popper,ht=typeof Oe=="function"?Oe(Object.assign({},u.rects,{placement:u.placement})):Oe,Vt=typeof ht=="number"?{mainAxis:ht,altAxis:ht}:Object.assign({mainAxis:0,altAxis:0},ht),Wn=u.modifiersData.offset?u.modifiersData.offset[u.placement]:null,Is={x:0,y:0};if(Qe){if(L){var bn,ls=it==="y"?jt:Jt,cs=it==="y"?xt:ln,Lt=it==="y"?"height":"width",Qs=Qe[it],Ys=Qs+Le[ls],Ea=Qs-Le[cs],Zt=Ce?-pt[Lt]/2:0,_t=Et===Ws?ut[Lt]:pt[Lt],In=Et===Ws?-pt[Lt]:-ut[Lt],us=u.elements.arrow,cr=Ce&&us?Ul(us):{width:0,height:0},hh=u.modifiersData["arrow#persistent"]?u.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Jv=hh[ls],Zv=hh[cs],dh=sr(0,ut[Lt],cr[Lt]),_P=Be?ut[Lt]/2-Zt-dh-Jv-Vt.mainAxis:_t-dh-Jv-Vt.mainAxis,mP=Be?-ut[Lt]/2+Zt+dh+Zv+Vt.mainAxis:In+dh+Zv+Vt.mainAxis,dp=u.elements.arrow&&xn(u.elements.arrow),gP=dp?it==="y"?dp.clientTop||0:dp.clientLeft||0:0,ey=(bn=Wn==null?void 0:Wn[it])!=null?bn:0,vP=Qs+mP-ey,ty=sr(Ce?to(Ys,Qs+_P-ey-gP):Ys,Qs,Ce?ss(Ea,vP):Ea);Qe[it]=ty,Is[it]=ty-Qs}if(X){var ny,yP=it==="x"?jt:Jt,EP=it==="x"?xt:ln,mo=Qe[Ue],fh=Ue==="y"?"height":"width",sy=mo+Le[yP],iy=mo-Le[EP],fp=[jt,Jt].indexOf(ft)!==-1,ry=(ny=Wn==null?void 0:Wn[Ue])!=null?ny:0,oy=fp?sy:mo-ut[fh]-pt[fh]-ry+Vt.altAxis,ay=fp?mo+ut[fh]+pt[fh]-ry-Vt.altAxis:iy,ly=Ce&&fp?function(TP,wP,pp){var cy=sr(TP,wP,pp);return cy>pp?pp:cy}(oy,mo,ay):sr(Ce?oy:sy,mo,Ce?ay:iy);Qe[Ue]=ly,Is[Ue]=ly-mo}u.modifiersData[E]=Is}},requiresIfExists:["offset"]};function Qu(v,u,_){_===void 0&&(_=!1);var E,D,L=Dn(u),j=Dn(u)&&function(he){var $e=he.getBoundingClientRect(),Ce=nt($e.width)/he.offsetWidth||1,xe=nt($e.height)/he.offsetHeight||1;return Ce!==1||xe!==1}(u),X=Ks(u),oe=is(v,j,_),pe={scrollLeft:0,scrollTop:0},me={x:0,y:0};return(L||!L&&!_)&&((ns(u)!=="body"||yt(X))&&(pe=(E=u)!==cn(E)&&Dn(E)?{scrollLeft:(D=E).scrollLeft,scrollTop:D.scrollTop}:fa(E)),Dn(u)?((me=is(u,!0)).x+=u.clientLeft,me.y+=u.clientTop):X&&(me.x=io(X))),{x:oe.left+pe.scrollLeft-me.x,y:oe.top+pe.scrollTop-me.y,width:oe.width,height:oe.height}}function _a(v){var u=new Map,_=new Set,E=[];function D(L){_.add(L.name),[].concat(L.requires||[],L.requiresIfExists||[]).forEach(function(j){if(!_.has(j)){var X=u.get(j);X&&D(X)}}),E.push(L)}return v.forEach(function(L){u.set(L.name,L)}),v.forEach(function(L){_.has(L.name)||D(L)}),E}var Yu={placement:"bottom",modifiers:[],strategy:"absolute"};function Gl(){for(var v=arguments.length,u=new Array(v),_=0;_<v;_++)u[_]=arguments[_];return!u.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function zs(v){v===void 0&&(v={});var u=v,_=u.defaultModifiers,E=_===void 0?[]:_,D=u.defaultOptions,L=D===void 0?Yu:D;return function(j,X,oe){oe===void 0&&(oe=L);var pe,me,he={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yu,L),modifiersData:{},elements:{reference:j,popper:X},attributes:{},styles:{}},$e=[],Ce=!1,xe={state:he,setOptions:function(Le){var ft=typeof Le=="function"?Le(he.options):Le;Oe(),he.options=Object.assign({},L,he.options,ft),he.scrollParents={reference:qs(j)?ro(j):j.contextElement?ro(j.contextElement):[],popper:ro(X)};var Et,Be,it=function(Ue){var Qe=_a(Ue);return Wu.reduce(function(ut,pt){return ut.concat(Qe.filter(function(ht){return ht.phase===pt}))},[])}((Et=[].concat(E,he.options.modifiers),Be=Et.reduce(function(Ue,Qe){var ut=Ue[Qe.name];return Ue[Qe.name]=ut?Object.assign({},ut,Qe,{options:Object.assign({},ut.options,Qe.options),data:Object.assign({},ut.data,Qe.data)}):Qe,Ue},{}),Object.keys(Be).map(function(Ue){return Be[Ue]})));return he.orderedModifiers=it.filter(function(Ue){return Ue.enabled}),he.orderedModifiers.forEach(function(Ue){var Qe=Ue.name,ut=Ue.options,pt=ut===void 0?{}:ut,ht=Ue.effect;if(typeof ht=="function"){var Vt=ht({state:he,name:Qe,instance:xe,options:pt});$e.push(Vt||function(){})}}),xe.update()},forceUpdate:function(){if(!Ce){var Le=he.elements,ft=Le.reference,Et=Le.popper;if(Gl(ft,Et)){he.rects={reference:Qu(ft,xn(Et),he.options.strategy==="fixed"),popper:Ul(Et)},he.reset=!1,he.placement=he.options.placement,he.orderedModifiers.forEach(function(ht){return he.modifiersData[ht.name]=Object.assign({},ht.data)});for(var Be=0;Be<he.orderedModifiers.length;Be++)if(he.reset!==!0){var it=he.orderedModifiers[Be],Ue=it.fn,Qe=it.options,ut=Qe===void 0?{}:Qe,pt=it.name;typeof Ue=="function"&&(he=Ue({state:he,options:ut,name:pt,instance:xe})||he)}else he.reset=!1,Be=-1}}},update:(pe=function(){return new Promise(function(Le){xe.forceUpdate(),Le(he)})},function(){return me||(me=new Promise(function(Le){Promise.resolve().then(function(){me=void 0,Le(pe())})})),me}),destroy:function(){Oe(),Ce=!0}};if(!Gl(j,X))return xe;function Oe(){$e.forEach(function(Le){return Le()}),$e=[]}return xe.setOptions(oe).then(function(Le){!Ce&&oe.onFirstUpdate&&oe.onFirstUpdate(Le)}),xe}}var Xu=zs(),Ju=zs({defaultModifiers:[rr,oo,Hl,Hn]}),lo=zs({defaultModifiers:[rr,oo,Hl,Hn,zl,rs,ao,qu,ar]});const ma=Object.freeze(Object.defineProperty({__proto__:null,afterMain:aa,afterRead:Ll,afterWrite:$l,applyStyles:Hn,arrow:qu,auto:Ji,basePlacements:Hs,beforeMain:Ml,beforeRead:oa,beforeWrite:la,bottom:xt,clippingParents:Bu,computeStyles:Hl,createPopper:lo,createPopperBase:Xu,createPopperLite:Ju,detectOverflow:bs,end:gi,eventListeners:rr,flip:rs,hide:ar,left:Jt,main:Vl,modifierPhases:Wu,offset:zl,placements:ys,popper:vi,popperGenerator:zs,popperOffsets:oo,preventOverflow:ao,read:Hu,reference:ra,right:ln,start:Ws,top:jt,variationPlacements:yi,viewport:Zi,write:Fl},Symbol.toStringTag,{value:"Module"})),Ql="dropdown",os=".bs.dropdown",ga=".data-api",Zu="ArrowUp",Gs="ArrowDown",eh=`hide${os}`,th=`hidden${os}`,nh=`show${os}`,sh=`shown${os}`,co=`click${os}${ga}`,un=`keydown${os}${ga}`,ih=`keyup${os}${ga}`,Ti="show",Ln='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',l=`${Ln}.${Ti}`,f=".dropdown-menu",m=k()?"top-end":"top-start",T=k()?"top-start":"top-end",V=k()?"bottom-end":"bottom-start",U=k()?"bottom-start":"bottom-end",re=k()?"left-start":"right-start",ct=k()?"right-start":"left-start",qt={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Xe={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class dt extends tt{constructor(u,_){super(u,_),this._popper=null,this._parent=this._element.parentNode,this._menu=B.next(this._element,f)[0]||B.prev(this._element,f)[0]||B.findOne(f,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return qt}static get DefaultType(){return Xe}static get NAME(){return Ql}toggle(){return this._isShown()?this.hide():this.show()}show(){if(d(this._element)||this._isShown())return;const u={relatedTarget:this._element};if(!G.trigger(this._element,nh,u).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const _ of[].concat(...document.body.children))G.on(_,"mouseover",g);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ti),this._element.classList.add(Ti),G.trigger(this._element,sh,u)}}hide(){if(d(this._element)||!this._isShown())return;const u={relatedTarget:this._element};this._completeHide(u)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(u){if(!G.trigger(this._element,eh,u).defaultPrevented){if("ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))G.off(_,"mouseover",g);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ti),this._element.classList.remove(Ti),this._element.setAttribute("aria-expanded","false"),It.removeDataAttribute(this._menu,"popper"),G.trigger(this._element,th,u)}}_getConfig(u){if(typeof(u=super._getConfig(u)).reference=="object"&&!a(u.reference)&&typeof u.reference.getBoundingClientRect!="function")throw new TypeError(`${Ql.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return u}_createPopper(){if(ma===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let u=this._element;this._config.reference==="parent"?u=this._parent:a(this._config.reference)?u=c(this._config.reference):typeof this._config.reference=="object"&&(u=this._config.reference);const _=this._getPopperConfig();this._popper=lo(u,this._menu,_)}_isShown(){return this._menu.classList.contains(Ti)}_getPlacement(){const u=this._parent;if(u.classList.contains("dropend"))return re;if(u.classList.contains("dropstart"))return ct;if(u.classList.contains("dropup-center"))return"top";if(u.classList.contains("dropdown-center"))return"bottom";const _=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return u.classList.contains("dropup")?_?T:m:_?U:V}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:u}=this._config;return typeof u=="string"?u.split(",").map(_=>Number.parseInt(_,10)):typeof u=="function"?_=>u(_,this._element):u}_getPopperConfig(){const u={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(It.setDataAttribute(this._menu,"popper","static"),u.modifiers=[{name:"applyStyles",enabled:!1}]),{...u,...$(this._config.popperConfig,[u])}}_selectMenuItem({key:u,target:_}){const E=B.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(D=>h(D));E.length&&H(E,_,u===Gs,!E.includes(_)).focus()}static jQueryInterface(u){return this.each(function(){const _=dt.getOrCreateInstance(this,u);if(typeof u=="string"){if(_[u]===void 0)throw new TypeError(`No method named "${u}"`);_[u]()}})}static clearMenus(u){if(u.button===2||u.type==="keyup"&&u.key!=="Tab")return;const _=B.find(l);for(const E of _){const D=dt.getInstance(E);if(!D||D._config.autoClose===!1)continue;const L=u.composedPath(),j=L.includes(D._menu);if(L.includes(D._element)||D._config.autoClose==="inside"&&!j||D._config.autoClose==="outside"&&j||D._menu.contains(u.target)&&(u.type==="keyup"&&u.key==="Tab"||/input|select|option|textarea|form/i.test(u.target.tagName)))continue;const X={relatedTarget:D._element};u.type==="click"&&(X.clickEvent=u),D._completeHide(X)}}static dataApiKeydownHandler(u){const _=/input|textarea/i.test(u.target.tagName),E=u.key==="Escape",D=[Zu,Gs].includes(u.key);if(!D&&!E||_&&!E)return;u.preventDefault();const L=this.matches(Ln)?this:B.prev(this,Ln)[0]||B.next(this,Ln)[0]||B.findOne(Ln,u.delegateTarget.parentNode),j=dt.getOrCreateInstance(L);if(D)return u.stopPropagation(),j.show(),void j._selectMenuItem(u);j._isShown()&&(u.stopPropagation(),j.hide(),L.focus())}}G.on(document,un,Ln,dt.dataApiKeydownHandler),G.on(document,un,f,dt.dataApiKeydownHandler),G.on(document,co,dt.clearMenus),G.on(document,ih,dt.clearMenus),G.on(document,co,Ln,function(v){v.preventDefault(),dt.getOrCreateInstance(this).toggle()}),F(dt);const Kt="backdrop",wi="show",Mn=`mousedown.bs.${Kt}`,va={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Yl={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class bv extends At{constructor(u){super(),this._config=this._getConfig(u),this._isAppended=!1,this._element=null}static get Default(){return va}static get DefaultType(){return Yl}static get NAME(){return Kt}show(u){if(!this._config.isVisible)return void $(u);this._append();const _=this._getElement();this._config.isAnimated&&y(_),_.classList.add(wi),this._emulateAnimation(()=>{$(u)})}hide(u){this._config.isVisible?(this._getElement().classList.remove(wi),this._emulateAnimation(()=>{this.dispose(),$(u)})):$(u)}dispose(){this._isAppended&&(G.off(this._element,Mn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const u=document.createElement("div");u.className=this._config.className,this._config.isAnimated&&u.classList.add("fade"),this._element=u}return this._element}_configAfterMerge(u){return u.rootElement=c(u.rootElement),u}_append(){if(this._isAppended)return;const u=this._getElement();this._config.rootElement.append(u),G.on(u,Mn,()=>{$(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(u){K(u,this._getElement(),this._config.isAnimated)}}const rh=".bs.focustrap",l0=`focusin${rh}`,c0=`keydown.tab${rh}`,Iv="backward",u0={autofocus:!0,trapElement:null},h0={autofocus:"boolean",trapElement:"element"};class Av extends At{constructor(u){super(),this._config=this._getConfig(u),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return u0}static get DefaultType(){return h0}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),G.off(document,rh),G.on(document,l0,u=>this._handleFocusin(u)),G.on(document,c0,u=>this._handleKeydown(u)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,G.off(document,rh))}_handleFocusin(u){const{trapElement:_}=this._config;if(u.target===document||u.target===_||_.contains(u.target))return;const E=B.focusableChildren(_);E.length===0?_.focus():this._lastTabNavDirection===Iv?E[E.length-1].focus():E[0].focus()}_handleKeydown(u){u.key==="Tab"&&(this._lastTabNavDirection=u.shiftKey?Iv:"forward")}}const Cv=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Sv=".sticky-top",oh="padding-right",Rv="margin-right";class np{constructor(){this._element=document.body}getWidth(){const u=document.documentElement.clientWidth;return Math.abs(window.innerWidth-u)}hide(){const u=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,oh,_=>_+u),this._setElementAttributes(Cv,oh,_=>_+u),this._setElementAttributes(Sv,Rv,_=>_-u)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,oh),this._resetElementAttributes(Cv,oh),this._resetElementAttributes(Sv,Rv)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(u,_,E){const D=this.getWidth();this._applyManipulationCallback(u,L=>{if(L!==this._element&&window.innerWidth>L.clientWidth+D)return;this._saveInitialAttribute(L,_);const j=window.getComputedStyle(L).getPropertyValue(_);L.style.setProperty(_,`${E(Number.parseFloat(j))}px`)})}_saveInitialAttribute(u,_){const E=u.style.getPropertyValue(_);E&&It.setDataAttribute(u,_,E)}_resetElementAttributes(u,_){this._applyManipulationCallback(u,E=>{const D=It.getDataAttribute(E,_);D!==null?(It.removeDataAttribute(E,_),E.style.setProperty(_,D)):E.style.removeProperty(_)})}_applyManipulationCallback(u,_){if(a(u))_(u);else for(const E of B.find(u,this._element))_(E)}}const as=".bs.modal",d0=`hide${as}`,f0=`hidePrevented${as}`,Pv=`hidden${as}`,Nv=`show${as}`,p0=`shown${as}`,_0=`resize${as}`,m0=`click.dismiss${as}`,g0=`mousedown.dismiss${as}`,v0=`keydown.dismiss${as}`,y0=`click${as}.data-api`,Ov="modal-open",kv="show",sp="modal-static",E0={backdrop:!0,focus:!0,keyboard:!0},T0={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class uo extends tt{constructor(u,_){super(u,_),this._dialog=B.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new np,this._addEventListeners()}static get Default(){return E0}static get DefaultType(){return T0}static get NAME(){return"modal"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||this._isTransitioning||G.trigger(this._element,Nv,{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ov),this._adjustDialog(),this._backdrop.show(()=>this._showElement(u)))}hide(){this._isShown&&!this._isTransitioning&&(G.trigger(this._element,d0).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(kv),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){G.off(window,as),G.off(this._dialog,as),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new bv({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Av({trapElement:this._element})}_showElement(u){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const _=B.findOne(".modal-body",this._dialog);_&&(_.scrollTop=0),y(this._element),this._element.classList.add(kv),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,G.trigger(this._element,p0,{relatedTarget:u})},this._dialog,this._isAnimated())}_addEventListeners(){G.on(this._element,v0,u=>{u.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),G.on(window,_0,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),G.on(this._element,g0,u=>{G.one(this._element,m0,_=>{this._element===u.target&&this._element===_.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ov),this._resetAdjustments(),this._scrollBar.reset(),G.trigger(this._element,Pv)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(G.trigger(this._element,f0).defaultPrevented)return;const u=this._element.scrollHeight>document.documentElement.clientHeight,_=this._element.style.overflowY;_==="hidden"||this._element.classList.contains(sp)||(u||(this._element.style.overflowY="hidden"),this._element.classList.add(sp),this._queueCallback(()=>{this._element.classList.remove(sp),this._queueCallback(()=>{this._element.style.overflowY=_},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const u=this._element.scrollHeight>document.documentElement.clientHeight,_=this._scrollBar.getWidth(),E=_>0;if(E&&!u){const D=k()?"paddingLeft":"paddingRight";this._element.style[D]=`${_}px`}if(!E&&u){const D=k()?"paddingRight":"paddingLeft";this._element.style[D]=`${_}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(u,_){return this.each(function(){const E=uo.getOrCreateInstance(this,u);if(typeof u=="string"){if(E[u]===void 0)throw new TypeError(`No method named "${u}"`);E[u](_)}})}}G.on(document,y0,'[data-bs-toggle="modal"]',function(v){const u=B.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&v.preventDefault(),G.one(u,Nv,E=>{E.defaultPrevented||G.one(u,Pv,()=>{h(this)&&this.focus()})});const _=B.findOne(".modal.show");_&&uo.getInstance(_).hide(),uo.getOrCreateInstance(u).toggle(this)}),ie(uo),F(uo);const bi=".bs.offcanvas",Dv=".data-api",w0=`load${bi}${Dv}`,xv="show",Lv="showing",Mv="hiding",Vv=".offcanvas.show",b0=`show${bi}`,I0=`shown${bi}`,A0=`hide${bi}`,Fv=`hidePrevented${bi}`,$v=`hidden${bi}`,C0=`resize${bi}`,S0=`click${bi}${Dv}`,R0=`keydown.dismiss${bi}`,P0={backdrop:!0,keyboard:!0,scroll:!1},N0={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ii extends tt{constructor(u,_){super(u,_),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return P0}static get DefaultType(){return N0}static get NAME(){return"offcanvas"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||G.trigger(this._element,b0,{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new np().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Lv),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(xv),this._element.classList.remove(Lv),G.trigger(this._element,I0,{relatedTarget:u})},this._element,!0))}hide(){this._isShown&&(G.trigger(this._element,A0).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Mv),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(xv,Mv),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new np().reset(),G.trigger(this._element,$v)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const u=!!this._config.backdrop;return new bv({className:"offcanvas-backdrop",isVisible:u,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:u?()=>{this._config.backdrop!=="static"?this.hide():G.trigger(this._element,Fv)}:null})}_initializeFocusTrap(){return new Av({trapElement:this._element})}_addEventListeners(){G.on(this._element,R0,u=>{u.key==="Escape"&&(this._config.keyboard?this.hide():G.trigger(this._element,Fv))})}static jQueryInterface(u){return this.each(function(){const _=Ii.getOrCreateInstance(this,u);if(typeof u=="string"){if(_[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);_[u](this)}})}}G.on(document,S0,'[data-bs-toggle="offcanvas"]',function(v){const u=B.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),d(this))return;G.one(u,$v,()=>{h(this)&&this.focus()});const _=B.findOne(Vv);_&&_!==u&&Ii.getInstance(_).hide(),Ii.getOrCreateInstance(u).toggle(this)}),G.on(window,w0,()=>{for(const v of B.find(Vv))Ii.getOrCreateInstance(v).show()}),G.on(window,C0,()=>{for(const v of B.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(v).position!=="fixed"&&Ii.getOrCreateInstance(v).hide()}),ie(Ii),F(Ii);const Uv={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},O0=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),k0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,D0=(v,u)=>{const _=v.nodeName.toLowerCase();return u.includes(_)?!O0.has(_)||!!k0.test(v.nodeValue):u.filter(E=>E instanceof RegExp).some(E=>E.test(_))},x0={allowList:Uv,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},L0={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},M0={entry:"(string|element|function|null)",selector:"(string|element)"};class V0 extends At{constructor(u){super(),this._config=this._getConfig(u)}static get Default(){return x0}static get DefaultType(){return L0}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(u=>this._resolvePossibleFunction(u)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(u){return this._checkContent(u),this._config.content={...this._config.content,...u},this}toHtml(){const u=document.createElement("div");u.innerHTML=this._maybeSanitize(this._config.template);for(const[D,L]of Object.entries(this._config.content))this._setContent(u,L,D);const _=u.children[0],E=this._resolvePossibleFunction(this._config.extraClass);return E&&_.classList.add(...E.split(" ")),_}_typeCheckConfig(u){super._typeCheckConfig(u),this._checkContent(u.content)}_checkContent(u){for(const[_,E]of Object.entries(u))super._typeCheckConfig({selector:_,entry:E},M0)}_setContent(u,_,E){const D=B.findOne(E,u);D&&((_=this._resolvePossibleFunction(_))?a(_)?this._putElementInTemplate(c(_),D):this._config.html?D.innerHTML=this._maybeSanitize(_):D.textContent=_:D.remove())}_maybeSanitize(u){return this._config.sanitize?function(_,E,D){if(!_.length)return _;if(D&&typeof D=="function")return D(_);const L=new window.DOMParser().parseFromString(_,"text/html"),j=[].concat(...L.body.querySelectorAll("*"));for(const X of j){const oe=X.nodeName.toLowerCase();if(!Object.keys(E).includes(oe)){X.remove();continue}const pe=[].concat(...X.attributes),me=[].concat(E["*"]||[],E[oe]||[]);for(const he of pe)D0(he,me)||X.removeAttribute(he.nodeName)}return L.body.innerHTML}(u,this._config.allowList,this._config.sanitizeFn):u}_resolvePossibleFunction(u){return $(u,[this])}_putElementInTemplate(u,_){if(this._config.html)return _.innerHTML="",void _.append(u);_.textContent=u.textContent}}const F0=new Set(["sanitize","allowList","sanitizeFn"]),ip="fade",ah="show",jv=".modal",Bv="hide.bs.modal",Xl="hover",rp="focus",$0={AUTO:"auto",TOP:"top",RIGHT:k()?"left":"right",BOTTOM:"bottom",LEFT:k()?"right":"left"},U0={allowList:Uv,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},j0={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ho extends tt{constructor(u,_){if(ma===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(u,_),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return U0}static get DefaultType(){return j0}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),G.off(this._element.closest(jv),Bv,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const u=G.trigger(this._element,this.constructor.eventName("show")),_=(p(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(u.defaultPrevented||!_)return;this._disposePopper();const E=this._getTipElement();this._element.setAttribute("aria-describedby",E.getAttribute("id"));const{container:D}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(D.append(E),G.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(E),E.classList.add(ah),"ontouchstart"in document.documentElement)for(const L of[].concat(...document.body.children))G.on(L,"mouseover",g);this._queueCallback(()=>{G.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!G.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ah),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))G.off(u,"mouseover",g);this._activeTrigger.click=!1,this._activeTrigger[rp]=!1,this._activeTrigger[Xl]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),G.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(u){const _=this._getTemplateFactory(u).toHtml();if(!_)return null;_.classList.remove(ip,ah),_.classList.add(`bs-${this.constructor.NAME}-auto`);const E=(D=>{do D+=Math.floor(1e6*Math.random());while(document.getElementById(D));return D})(this.constructor.NAME).toString();return _.setAttribute("id",E),this._isAnimated()&&_.classList.add(ip),_}setContent(u){this._newContent=u,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(u){return this._templateFactory?this._templateFactory.changeContent(u):this._templateFactory=new V0({...this._config,content:u,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(u){return this.constructor.getOrCreateInstance(u.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ip)}_isShown(){return this.tip&&this.tip.classList.contains(ah)}_createPopper(u){const _=$(this._config.placement,[this,u,this._element]),E=$0[_.toUpperCase()];return lo(this._element,u,this._getPopperConfig(E))}_getOffset(){const{offset:u}=this._config;return typeof u=="string"?u.split(",").map(_=>Number.parseInt(_,10)):typeof u=="function"?_=>u(_,this._element):u}_resolvePossibleFunction(u){return $(u,[this._element])}_getPopperConfig(u){const _={placement:u,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:E=>{this._getTipElement().setAttribute("data-popper-placement",E.state.placement)}}]};return{..._,...$(this._config.popperConfig,[_])}}_setListeners(){const u=this._config.trigger.split(" ");for(const _ of u)if(_==="click")G.on(this._element,this.constructor.eventName("click"),this._config.selector,E=>{this._initializeOnDelegatedTarget(E).toggle()});else if(_!=="manual"){const E=_===Xl?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),D=_===Xl?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");G.on(this._element,E,this._config.selector,L=>{const j=this._initializeOnDelegatedTarget(L);j._activeTrigger[L.type==="focusin"?rp:Xl]=!0,j._enter()}),G.on(this._element,D,this._config.selector,L=>{const j=this._initializeOnDelegatedTarget(L);j._activeTrigger[L.type==="focusout"?rp:Xl]=j._element.contains(L.relatedTarget),j._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},G.on(this._element.closest(jv),Bv,this._hideModalHandler)}_fixTitle(){const u=this._element.getAttribute("title");u&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",u),this._element.setAttribute("data-bs-original-title",u),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(u,_){clearTimeout(this._timeout),this._timeout=setTimeout(u,_)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(u){const _=It.getDataAttributes(this._element);for(const E of Object.keys(_))F0.has(E)&&delete _[E];return u={..._,...typeof u=="object"&&u?u:{}},u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u.container=u.container===!1?document.body:c(u.container),typeof u.delay=="number"&&(u.delay={show:u.delay,hide:u.delay}),typeof u.title=="number"&&(u.title=u.title.toString()),typeof u.content=="number"&&(u.content=u.content.toString()),u}_getDelegateConfig(){const u={};for(const[_,E]of Object.entries(this._config))this.constructor.Default[_]!==E&&(u[_]=E);return u.selector=!1,u.trigger="manual",u}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(u){return this.each(function(){const _=ho.getOrCreateInstance(this,u);if(typeof u=="string"){if(_[u]===void 0)throw new TypeError(`No method named "${u}"`);_[u]()}})}}F(ho);const B0={...ho.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},H0={...ho.DefaultType,content:"(null|string|element|function)"};class lh extends ho{static get Default(){return B0}static get DefaultType(){return H0}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(u){return this.each(function(){const _=lh.getOrCreateInstance(this,u);if(typeof u=="string"){if(_[u]===void 0)throw new TypeError(`No method named "${u}"`);_[u]()}})}}F(lh);const op=".bs.scrollspy",W0=`activate${op}`,Hv=`click${op}`,q0=`load${op}.data-api`,ya="active",ap="[href]",Wv=".nav-link",K0=`${Wv}, .nav-item > ${Wv}, .list-group-item`,z0={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},G0={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Jl extends tt{constructor(u,_){super(u,_),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return z0}static get DefaultType(){return G0}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const u of this._observableSections.values())this._observer.observe(u)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(u){return u.target=c(u.target)||document.body,u.rootMargin=u.offset?`${u.offset}px 0px -30%`:u.rootMargin,typeof u.threshold=="string"&&(u.threshold=u.threshold.split(",").map(_=>Number.parseFloat(_))),u}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(G.off(this._config.target,Hv),G.on(this._config.target,Hv,ap,u=>{const _=this._observableSections.get(u.target.hash);if(_){u.preventDefault();const E=this._rootElement||window,D=_.offsetTop-this._element.offsetTop;if(E.scrollTo)return void E.scrollTo({top:D,behavior:"smooth"});E.scrollTop=D}}))}_getNewObserver(){const u={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(_=>this._observerCallback(_),u)}_observerCallback(u){const _=j=>this._targetLinks.get(`#${j.target.id}`),E=j=>{this._previousScrollData.visibleEntryTop=j.target.offsetTop,this._process(_(j))},D=(this._rootElement||document.documentElement).scrollTop,L=D>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=D;for(const j of u){if(!j.isIntersecting){this._activeTarget=null,this._clearActiveClass(_(j));continue}const X=j.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(L&&X){if(E(j),!D)return}else L||X||E(j)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const u=B.find(ap,this._config.target);for(const _ of u){if(!_.hash||d(_))continue;const E=B.findOne(decodeURI(_.hash),this._element);h(E)&&(this._targetLinks.set(decodeURI(_.hash),_),this._observableSections.set(_.hash,E))}}_process(u){this._activeTarget!==u&&(this._clearActiveClass(this._config.target),this._activeTarget=u,u.classList.add(ya),this._activateParents(u),G.trigger(this._element,W0,{relatedTarget:u}))}_activateParents(u){if(u.classList.contains("dropdown-item"))B.findOne(".dropdown-toggle",u.closest(".dropdown")).classList.add(ya);else for(const _ of B.parents(u,".nav, .list-group"))for(const E of B.prev(_,K0))E.classList.add(ya)}_clearActiveClass(u){u.classList.remove(ya);const _=B.find(`${ap}.${ya}`,u);for(const E of _)E.classList.remove(ya)}static jQueryInterface(u){return this.each(function(){const _=Jl.getOrCreateInstance(this,u);if(typeof u=="string"){if(_[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);_[u]()}})}}G.on(window,q0,()=>{for(const v of B.find('[data-bs-spy="scroll"]'))Jl.getOrCreateInstance(v)}),F(Jl);const fo=".bs.tab",Q0=`hide${fo}`,Y0=`hidden${fo}`,X0=`show${fo}`,J0=`shown${fo}`,Z0=`click${fo}`,eP=`keydown${fo}`,tP=`load${fo}`,nP="ArrowLeft",qv="ArrowRight",sP="ArrowUp",Kv="ArrowDown",lp="Home",zv="End",po="active",Gv="fade",cp="show",Qv=".dropdown-toggle",up=`:not(${Qv})`,Yv='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',hp=`.nav-link${up}, .list-group-item${up}, [role="tab"]${up}, ${Yv}`,iP=`.${po}[data-bs-toggle="tab"], .${po}[data-bs-toggle="pill"], .${po}[data-bs-toggle="list"]`;class _o extends tt{constructor(u){super(u),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),G.on(this._element,eP,_=>this._keydown(_)))}static get NAME(){return"tab"}show(){const u=this._element;if(this._elemIsActive(u))return;const _=this._getActiveElem(),E=_?G.trigger(_,Q0,{relatedTarget:u}):null;G.trigger(u,X0,{relatedTarget:_}).defaultPrevented||E&&E.defaultPrevented||(this._deactivate(_,u),this._activate(u,_))}_activate(u,_){u&&(u.classList.add(po),this._activate(B.getElementFromSelector(u)),this._queueCallback(()=>{u.getAttribute("role")==="tab"?(u.removeAttribute("tabindex"),u.setAttribute("aria-selected",!0),this._toggleDropDown(u,!0),G.trigger(u,J0,{relatedTarget:_})):u.classList.add(cp)},u,u.classList.contains(Gv)))}_deactivate(u,_){u&&(u.classList.remove(po),u.blur(),this._deactivate(B.getElementFromSelector(u)),this._queueCallback(()=>{u.getAttribute("role")==="tab"?(u.setAttribute("aria-selected",!1),u.setAttribute("tabindex","-1"),this._toggleDropDown(u,!1),G.trigger(u,Y0,{relatedTarget:_})):u.classList.remove(cp)},u,u.classList.contains(Gv)))}_keydown(u){if(![nP,qv,sP,Kv,lp,zv].includes(u.key))return;u.stopPropagation(),u.preventDefault();const _=this._getChildren().filter(D=>!d(D));let E;if([lp,zv].includes(u.key))E=_[u.key===lp?0:_.length-1];else{const D=[qv,Kv].includes(u.key);E=H(_,u.target,D,!0)}E&&(E.focus({preventScroll:!0}),_o.getOrCreateInstance(E).show())}_getChildren(){return B.find(hp,this._parent)}_getActiveElem(){return this._getChildren().find(u=>this._elemIsActive(u))||null}_setInitialAttributes(u,_){this._setAttributeIfNotExists(u,"role","tablist");for(const E of _)this._setInitialAttributesOnChild(E)}_setInitialAttributesOnChild(u){u=this._getInnerElement(u);const _=this._elemIsActive(u),E=this._getOuterElement(u);u.setAttribute("aria-selected",_),E!==u&&this._setAttributeIfNotExists(E,"role","presentation"),_||u.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(u,"role","tab"),this._setInitialAttributesOnTargetPanel(u)}_setInitialAttributesOnTargetPanel(u){const _=B.getElementFromSelector(u);_&&(this._setAttributeIfNotExists(_,"role","tabpanel"),u.id&&this._setAttributeIfNotExists(_,"aria-labelledby",`${u.id}`))}_toggleDropDown(u,_){const E=this._getOuterElement(u);if(!E.classList.contains("dropdown"))return;const D=(L,j)=>{const X=B.findOne(L,E);X&&X.classList.toggle(j,_)};D(Qv,po),D(".dropdown-menu",cp),E.setAttribute("aria-expanded",_)}_setAttributeIfNotExists(u,_,E){u.hasAttribute(_)||u.setAttribute(_,E)}_elemIsActive(u){return u.classList.contains(po)}_getInnerElement(u){return u.matches(hp)?u:B.findOne(hp,u)}_getOuterElement(u){return u.closest(".nav-item, .list-group-item")||u}static jQueryInterface(u){return this.each(function(){const _=_o.getOrCreateInstance(this);if(typeof u=="string"){if(_[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);_[u]()}})}}G.on(document,Z0,Yv,function(v){["A","AREA"].includes(this.tagName)&&v.preventDefault(),d(this)||_o.getOrCreateInstance(this).show()}),G.on(window,tP,()=>{for(const v of B.find(iP))_o.getOrCreateInstance(v)}),F(_o);const lr=".bs.toast",rP=`mouseover${lr}`,oP=`mouseout${lr}`,aP=`focusin${lr}`,lP=`focusout${lr}`,cP=`hide${lr}`,uP=`hidden${lr}`,hP=`show${lr}`,dP=`shown${lr}`,Xv="hide",ch="show",uh="showing",fP={animation:"boolean",autohide:"boolean",delay:"number"},pP={animation:!0,autohide:!0,delay:5e3};class Zl extends tt{constructor(u,_){super(u,_),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return pP}static get DefaultType(){return fP}static get NAME(){return"toast"}show(){G.trigger(this._element,hP).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Xv),y(this._element),this._element.classList.add(ch,uh),this._queueCallback(()=>{this._element.classList.remove(uh),G.trigger(this._element,dP),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(G.trigger(this._element,cP).defaultPrevented||(this._element.classList.add(uh),this._queueCallback(()=>{this._element.classList.add(Xv),this._element.classList.remove(uh,ch),G.trigger(this._element,uP)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ch),super.dispose()}isShown(){return this._element.classList.contains(ch)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(u,_){switch(u.type){case"mouseover":case"mouseout":this._hasMouseInteraction=_;break;case"focusin":case"focusout":this._hasKeyboardInteraction=_}if(_)return void this._clearTimeout();const E=u.relatedTarget;this._element===E||this._element.contains(E)||this._maybeScheduleHide()}_setListeners(){G.on(this._element,rP,u=>this._onInteraction(u,!0)),G.on(this._element,oP,u=>this._onInteraction(u,!1)),G.on(this._element,aP,u=>this._onInteraction(u,!0)),G.on(this._element,lP,u=>this._onInteraction(u,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(u){return this.each(function(){const _=Zl.getOrCreateInstance(this,u);if(typeof u=="string"){if(_[u]===void 0)throw new TypeError(`No method named "${u}"`);_[u](this)}})}}return ie(Zl),F(Zl),{Alert:S,Button:q,Carousel:mi,Collapse:Bs,Dropdown:dt,Modal:uo,Offcanvas:Ii,Popover:lh,ScrollSpy:Jl,Tab:_o,Toast:Zl,Tooltip:ho}})}(Bh)),Bh.exports}var qM=WM();const hA=(n,e)=>{const t=n.__vccOpts||n;for(const[s,i]of e)t[s]=i;return t},KM={class:"container mt-5"},zM={class:"row justify-content-center"},GM={class:"col-md-6"},QM={class:"card"},YM={class:"card-body"},XM={class:"mb-3"},JM={class:"mb-3"},ZM={key:0,class:"alert alert-danger",role:"alert"},eV={class:"text-end mb-3"},tV=["disabled"],nV={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},sV={class:"mb-3"},iV={class:"mb-3"},rV={class:"mb-3"},oV={class:"mb-3"},aV=["disabled"],lV={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},cV={class:"modal fade",id:"feedbackModal",tabindex:"-1","aria-labelledby":"feedbackModalLabel","aria-hidden":"true"},uV={class:"modal-dialog"},hV={class:"modal-content"},dV={class:"modal-header"},fV={class:"modal-title",id:"feedbackModalLabel"},pV={class:"modal-body"},_V={__name:"Auth",setup(n){const e=Gc(),t=dn(!1),s=dn({email:"",password:""}),i=dn({email:"",password:"",confirmPassword:""}),r=dn(!1),o=dn(""),a=dn(null),c=dn(""),h=dn("");of(()=>{const y=document.getElementById("feedbackModal");y&&(a.value=new qM.Modal(y))});const d=(y,w)=>{c.value=y,h.value=w,a.value&&(a.value.show(),setTimeout(()=>{a.value&&a.value.hide()},3e3))},p=async()=>{o.value="",r.value=!0;try{const{email:y,password:w}=s.value;await Ix(e,y,w),console.log("")}catch(y){switch(console.error(":",y.code,y.message),y.code){case"auth/invalid-credential":o.value="";break;case"auth/too-many-requests":o.value="";break;default:o.value=""}}finally{r.value=!1}},g=async()=>{o.value="",r.value=!0;try{const{email:y,password:w,confirmPassword:N}=i.value;if(w!==N){d("","");return}await bx(e,y,w),d("",""),i.value={email:"",password:"",confirmPassword:""}}catch(y){switch(y.code){case"auth/email-already-in-use":d("","");break;case"auth/weak-password":d("","6");break;default:d("","")}}finally{r.value=!1}};return(y,w)=>(Fn(),Ss("div",KM,[w[16]||(w[16]=ge("h1",{class:"text-center game-title mb-4"},"DNF",-1)),w[17]||(w[17]=ge("h6",{class:"text-center"},"Version 0.0.1 Alpha2025/3/7",-1)),ge("div",zM,[ge("div",GM,[ge("div",QM,[ge("div",YM,[t.value?(Fn(),Ss("form",{key:1,onSubmit:gh(g,["prevent"])},[ge("div",sV,[w[10]||(w[10]=ge("label",{for:"registerEmail",class:"form-label"},"",-1)),tc(ge("input",{type:"email",class:"form-control",id:"registerEmail","onUpdate:modelValue":w[3]||(w[3]=N=>i.value.email=N),required:""},null,512),[[sc,i.value.email]])]),ge("div",iV,[w[11]||(w[11]=ge("label",{for:"registerPassword",class:"form-label"},"",-1)),tc(ge("input",{type:"password",class:"form-control",id:"registerPassword","onUpdate:modelValue":w[4]||(w[4]=N=>i.value.password=N),required:""},null,512),[[sc,i.value.password]])]),ge("div",rV,[w[12]||(w[12]=ge("label",{for:"confirmPassword",class:"form-label"},"",-1)),tc(ge("input",{type:"password",class:"form-control",id:"confirmPassword","onUpdate:modelValue":w[5]||(w[5]=N=>i.value.confirmPassword=N),required:""},null,512),[[sc,i.value.confirmPassword]])]),ge("div",oV,[ge("a",{href:"#",class:"text-primary",onClick:w[6]||(w[6]=gh(N=>t.value=!1,["prevent"]))},"")]),ge("button",{type:"submit",class:"btn btn-primary w-100",disabled:r.value},[r.value?(Fn(),Ss("span",lV)):bp("",!0),w[13]||(w[13]=bo("  "))],8,aV)],32)):(Fn(),Ss("form",{key:0,onSubmit:gh(p,["prevent"])},[ge("div",XM,[w[7]||(w[7]=ge("label",{for:"loginEmail",class:"form-label"},"",-1)),tc(ge("input",{type:"email",class:"form-control",id:"loginEmail","onUpdate:modelValue":w[0]||(w[0]=N=>s.value.email=N),required:""},null,512),[[sc,s.value.email]])]),ge("div",JM,[w[8]||(w[8]=ge("label",{for:"loginPassword",class:"form-label"},"",-1)),tc(ge("input",{type:"password",class:"form-control",id:"loginPassword","onUpdate:modelValue":w[1]||(w[1]=N=>s.value.password=N),required:""},null,512),[[sc,s.value.password]])]),o.value?(Fn(),Ss("div",ZM,As(o.value),1)):bp("",!0),ge("div",eV,[ge("a",{href:"#",class:"text-primary",onClick:w[2]||(w[2]=gh(N=>t.value=!0,["prevent"]))},"")]),ge("button",{type:"submit",class:"btn btn-primary w-100",disabled:r.value},[r.value?(Fn(),Ss("span",nV)):bp("",!0),w[9]||(w[9]=bo("  "))],8,tV)],32))])])])]),ge("div",cV,[ge("div",uV,[ge("div",hV,[ge("div",dV,[ge("h5",fV,As(c.value),1),w[14]||(w[14]=ge("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),ge("div",pV,As(h.value),1),w[15]||(w[15]=ge("div",{class:"modal-footer"},[ge("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"")],-1))])])])]))}},mV=hA(_V,[["__scopeId","data-v-c5c65885"]]),gV={__name:"App",setup(n){const e=dn(!1),t=uA();return of(()=>{const s=Gc();Sx(s,i=>{e.value=!!i,i&&t.push("/characters")})}),(s,i)=>{const r=RN("router-view");return Fn(),Ss("div",null,[e.value?(Fn(),g_(r,{key:1})):(Fn(),g_(mV,{key:0}))])}}},vV="modulepreload",yV=function(n,e){return new URL(n,e).href},LE={},EV=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(h=>{if(h=yV(h,s),h in LE)return;LE[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(!!s)for(let w=o.length-1;w>=0;w--){const N=o[w];if(N.href===h&&(!d||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":vV,d||(y.as="script"),y.crossOrigin="",y.href=h,c&&y.setAttribute("nonce",c),document.head.appendChild(y),d)return new Promise((w,N)=>{y.addEventListener("load",w),y.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var TV="firebase",wV="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(TV,wV,"app");var ME={};const VE="@firebase/database",FE="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dA="";function bV(n){dA=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Wc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return zi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IV(e)}}catch{}return new AV},Io=fA("localStorage"),CV=fA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new ff("@firebase/database"),SV=function(){let n=1;return function(){return n++}}(),pA=function(n){const e=vk(n),t=new pk;t.update(e);const s=t.digest();return km.encodeByteArray(s)},Eu=function(...n){let e="";for(let t=0;t<n.length;t++){const s=n[t];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Eu.apply(null,s):typeof s=="object"?e+=zt(s):e+=s,e+=" "}return e};let Rc=null,$E=!0;const RV=function(n,e){ne(!0,"Can't turn on custom loggers persistently."),za.logLevel=Ke.VERBOSE,Rc=za.log.bind(za)},mn=function(...n){if($E===!0&&($E=!1,Rc===null&&CV.get("logging_enabled")===!0&&RV()),Rc){const e=Eu.apply(null,n);Rc(e)}},Tu=function(n){return function(...e){mn(n,...e)}},D_=function(...n){const e="FIREBASE INTERNAL ERROR: "+Eu(...n);za.error(e)},Ui=function(...n){const e=`FIREBASE FATAL ERROR: ${Eu(...n)}`;throw za.error(e),new Error(e)},jn=function(...n){const e="FIREBASE WARNING: "+Eu(...n);za.warn(e)},PV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&jn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_A=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},NV=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},el="[MIN_NAME]",Mo="[MAX_NAME]",yl=function(n,e){if(n===e)return 0;if(n===el||e===Mo)return-1;if(e===el||n===Mo)return 1;{const t=UE(n),s=UE(e);return t!==null?s!==null?t-s===0?n.length-e.length:t-s:-1:s!==null?1:n<e?-1:1}},OV=function(n,e){return n===e?0:n<e?-1:1},rc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+zt(e))},Gm=function(n){if(typeof n!="object"||n===null)return zt(n);const e=[];for(const s in n)e.push(s);e.sort();let t="{";for(let s=0;s<e.length;s++)s!==0&&(t+=","),t+=zt(e[s]),t+=":",t+=Gm(n[e[s]]);return t+="}",t},mA=function(n,e){const t=n.length;if(t<=e)return[n];const s=[];for(let i=0;i<t;i+=e)i+e>t?s.push(n.substring(i,t)):s.push(n.substring(i,i+e));return s};function Bn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const gA=function(n){ne(!_A(n),"Invalid JSON number");const e=11,t=52,s=(1<<e-1)-1;let i,r,o,a,c;n===0?(r=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),s),r=a+s,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(r=0,o=Math.round(n/Math.pow(2,1-s-t))));const h=[];for(c=t;c;c-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)h.push(r%2?1:0),r=Math.floor(r/2);h.push(i?1:0),h.reverse();const d=h.join("");let p="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),p=p+g}return p.toLowerCase()},kV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},DV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function xV(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const s=new Error(n+" at "+e._path.toString()+": "+t);return s.code=n.toUpperCase(),s}const LV=new RegExp("^-?(0*)\\d{1,10}$"),MV=-2147483648,VV=2147483647,UE=function(n){if(LV.test(n)){const e=Number(n);if(e>=MV&&e<=VV)return e}return null},El=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw jn("Exception was thrown by user callback.",t),e},Math.floor(0))}},FV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pc=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Gn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){jn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',jn(e)}}class Hh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Hh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="5",vA="v",yA="s",EA="r",TA="f",wA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bA="ls",IA="p",x_="ac",AA="websocket",CA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,s,i,r=!1,o="",a=!1,c=!1,h=null){this.secure=t,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Io.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Io.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function jV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function RA(n,e,t){ne(typeof e=="string","typeof type must == string"),ne(typeof t=="object","typeof params must == object");let s;if(e===AA)s=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===CA)s=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);jV(n)&&(t.ns=n.namespace);const i=[];return Bn(t,(r,o)=>{i.push(r+"="+o)}),s+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.counters_={}}incrementCounter(e,t=1){zi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return QO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp={},Vp={};function Ym(n){const e=n.toString();return Mp[e]||(Mp[e]=new BV),Mp[e]}function HV(n,e){const t=n.toString();return Vp[t]||(Vp[t]=e()),Vp[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&El(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="start",qV="close",KV="pLPCommand",zV="pRTLPCB",PA="id",NA="pw",OA="ser",GV="cb",QV="seg",YV="ts",XV="d",JV="dframe",kA=1870,DA=30,ZV=kA-DA,e1=25e3,t1=3e4;class La{constructor(e,t,s,i,r,o,a){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tu(e),this.stats_=Ym(t),this.urlFn=c=>(this.appCheckToken&&(c[x_]=this.appCheckToken),RA(t,CA,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new WV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(t1)),NV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xm((...r)=>{const[o,a,c,h,d]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===jE)this.id=a,this.password=c;else if(o===qV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[jE]="t",s[OA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[GV]=this.scriptTagHolder.uniqueCallbackIdentifier),s[vA]=Qm,this.transportSessionId&&(s[yA]=this.transportSessionId),this.lastSessionId&&(s[bA]=this.lastSessionId),this.applicationId&&(s[IA]=this.applicationId),this.appCheckToken&&(s[x_]=this.appCheckToken),typeof location<"u"&&location.hostname&&wA.test(location.hostname)&&(s[EA]=TA);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){La.forceAllow_=!0}static forceDisallow(){La.forceDisallow_=!0}static isAvailable(){return La.forceAllow_?!0:!La.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!kV()&&!DV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=sI(t),i=mA(s,ZV);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const s={};s[JV]="t",s[PA]=e,s[NA]=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Xm{constructor(e,t,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=SV(),window[KV+this.uniqueCallbackIdentifier]=e,window[zV+this.uniqueCallbackIdentifier]=t,this.myIFrame=Xm.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){mn("frame writing exception"),a.stack&&mn(a.stack),mn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||mn("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[PA]=this.myID,e[NA]=this.myPW,e[OA]=this.currentSerial;let t=this.urlFn(e),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+DA+s.length<=kA;){const o=this.pendingSegs.shift();s=s+"&"+QV+i+"="+o.seg+"&"+YV+i+"="+o.ts+"&"+XV+i+"="+o.d,i++}return t=t+s,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(s,Math.floor(e1)),r=()=>{clearTimeout(i),s()};this.addTag(e,r)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{mn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=16384,s1=45e3;let yd=null;typeof MozWebSocket<"u"?yd=MozWebSocket:typeof WebSocket<"u"&&(yd=WebSocket);class Ps{constructor(e,t,s,i,r,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tu(this.connId),this.stats_=Ym(t),this.connURL=Ps.connectionURL_(t,o,a,i,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,i,r){const o={};return o[vA]=Qm,typeof location<"u"&&location.hostname&&wA.test(location.hostname)&&(o[EA]=TA),t&&(o[yA]=t),s&&(o[bA]=s),i&&(o[x_]=i),r&&(o[IA]=r),RA(e,AA,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Io.set("previous_websocket_failure",!0);try{let s;rk(),this.mySock=new yd(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ps.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&yd!==null&&!Ps.forceDisallow_}static previouslyFailed(){return Io.isInMemoryStorage||Io.get("previous_websocket_failure")===!0}markConnectionHealthy(){Io.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const s=Wc(t);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const s=this.extractFrameCount_(t);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=mA(t,n1);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(s1))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ps.responsesRequiredToBeHealthy=2;Ps.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{static get ALL_TRANSPORTS(){return[La,Ps]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Ps&&Ps.isAvailable();let s=t&&!Ps.previouslyFailed();if(e.webSocketOnly&&(t||jn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ps];else{const i=this.transports_=[];for(const r of Xc.ALL_TRANSPORTS)r&&r.isAvailable()&&i.push(r);Xc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=6e4,r1=5e3,o1=10*1024,a1=100*1024,Fp="t",BE="d",l1="s",HE="r",c1="e",WE="o",qE="a",KE="n",zE="p",u1="h";class h1{constructor(e,t,s,i,r,o,a,c,h,d){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=h,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tu("c:"+this.id+":"),this.transportManager_=new Xc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,s)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Pc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>a1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>o1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Fp in e){const t=e[Fp];t===qE?this.upgradeIfSecondaryHealthy_():t===HE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===WE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rc("t",e),s=rc("d",e);if(t==="c")this.onSecondaryControl_(s);else if(t==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:zE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rc("t",e),s=rc("d",e);t==="c"?this.onControl_(s):t==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rc(Fp,e);if(BE in e){const s=e[BE];if(t===u1){const i=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===KE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===l1?this.onConnectionShutdown_(s):t===HE?this.onReset_(s):t===c1?D_("Server Error: "+s):t===WE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):D_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Qm!==s&&jn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),Pc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(i1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(r1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:zE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Io.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{put(e,t,s,i){}merge(e,t,s,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const i=this.getInitialEvent(e);i&&t.apply(s,i)}off(e,t,s){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!s||s===i[r].context)){i.splice(r,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends LA{static getInstance(){return new Ed}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Dm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=32,QE=768;class gt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function st(){return new gt("")}function He(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Or(n){return n.pieces_.length-n.pieceNum_}function wt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new gt(n.pieces_,e)}function MA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function d1(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function VA(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function FA(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new gt(e,0)}function Gt(n,e){const t=[];for(let s=n.pieceNum_;s<n.pieces_.length;s++)t.push(n.pieces_[s]);if(e instanceof gt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)t.push(e.pieces_[s]);else{const s=e.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&t.push(s[i])}return new gt(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function Sn(n,e){const t=He(n),s=He(e);if(t===null)return e;if(t===s)return Sn(wt(n),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Jm(n,e){if(Or(n)!==Or(e))return!1;for(let t=n.pieceNum_,s=e.pieceNum_;t<=n.pieces_.length;t++,s++)if(n.pieces_[t]!==e.pieces_[s])return!1;return!0}function Ns(n,e){let t=n.pieceNum_,s=e.pieceNum_;if(Or(n)>Or(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[s])return!1;++t,++s}return!0}class f1{constructor(e,t){this.errorPrefix_=t,this.parts_=VA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=df(this.parts_[s]);$A(this)}}function p1(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=df(e),$A(n)}function _1(n){const e=n.parts_.pop();n.byteLength_-=df(e),n.parts_.length>0&&(n.byteLength_-=1)}function $A(n){if(n.byteLength_>QE)throw new Error(n.errorPrefix_+"has a key path longer than "+QE+" bytes ("+n.byteLength_+").");if(n.parts_.length>GE)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+GE+") or object contains a cycle "+To(n))}function To(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends LA{static getInstance(){return new Zm}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=1e3,m1=60*5*1e3,YE=30*1e3,g1=1.3,v1=3e4,y1="server_kill",XE=3;class Li extends xA{constructor(e,t,s,i,r,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Li.nextPersistentConnectionId_++,this.log_=Tu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=oc,this.maxReconnectDelay_=m1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ed.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(zt(r)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[i]=s)}get(e){this.initConnection_();const t=new hf,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,s,i){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:s};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)})}sendListen_(e){const t=e.query,s=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+s+" for "+i);const r={p:s},o="q";e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const c=a.d,h=a.s;Li.warnOnListenWarnings_(c,t),(this.listens.get(s)&&this.listens.get(s).get(i))===e&&(this.log_("listen response",a),h!=="ok"&&this.removeListen_(s,i),e.onComplete&&e.onComplete(h,c))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&zi(e,"w")){const s=Xa(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',r=t._path.toString();jn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||fk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=YE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=dk(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(t,s,i=>{const r=i.s,o=i.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,s=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)})}unlisten(e,t){const s=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,e._queryObject,t)}sendUnlisten_(e,t,s,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e},o="n";i&&(r.q=s,r.t=i),this.sendRequest(o,r)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,i){const r={p:t,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,t,s,i){this.putInternal("p",e,t,s,i)}merge(e,t,s,i){this.putInternal("m",e,t,s,i)}putInternal(e,t,s,i,r){this.initConnection_();const o={p:t,d:s};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,r=>{this.log_(t+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(r.s,r.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+zt(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):D_("Unrecognized action received from server: "+zt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=oc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>v1&&(this.reconnectDelay_=oc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*g1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Li.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,s())},h=function(p){ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(p)};this.realtime_={close:c,sendRequest:h};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,g]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?mn("getToken() completed but was canceled"):(mn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=g&&g.token,a=new h1(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,y=>{jn(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(y1)},r))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&jn(p),c())}}}interrupt(e){mn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){mn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],E_(this.interruptReasons_)&&(this.reconnectDelay_=oc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;t?s=t.map(r=>Gm(r)).join("$"):s="default";const i=this.removeListen_(e,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const s=new gt(e).toString();let i;if(this.listens.has(s)){const r=this.listens.get(s);i=r.get(t),r.delete(t),r.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(e,t){mn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=XE&&(this.reconnectDelay_=YE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){mn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=XE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+dA.replace(/\./g,"-")]=1,Dm()?e["framework.cordova"]=1:uI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ed.getInstance().currentlyOnline();return E_(this.interruptReasons_)&&e}}Li.nextPersistentConnectionId_=0;Li.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new We(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new We(el,e),i=new We(el,t);return this.compare(s,i)!==0}minPost(){return We.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh;class UA extends Ef{static get __EMPTY_NODE(){return yh}static set __EMPTY_NODE(e){yh=e}compare(e,t){return yl(e.name,t.name)}isDefinedOn(e){throw ml("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return We.MIN}maxPost(){return new We(Mo,yh)}makePost(e,t){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new We(e,yh)}toString(){return".key"}}const Ga=new UA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh=class{constructor(e,t,s,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?s(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},zn=class pc{constructor(e,t,s,i,r){this.key=e,this.value=t,this.color=s??pc.RED,this.left=i??ti.EMPTY_NODE,this.right=r??ti.EMPTY_NODE}copy(e,t,s,i,r){return new pc(e??this.key,t??this.value,s??this.color,i??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const r=s(e,i.key);return r<0?i=i.copy(null,null,null,i.left.insert(e,t,s),null):r===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ti.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,i;if(s=this,t(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),t(e,s.key)===0){if(s.right.isEmpty())return ti.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,pc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,pc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};zn.RED=!0;zn.BLACK=!1;class E1{copy(e,t,s,i,r){return this}insert(e,t,s){return new zn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ti=class Wh{constructor(e,t=Wh.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Wh(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,zn.BLACK,null,null))}remove(e){return new Wh(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zn.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),t===0)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,i=null;for(;!s.isEmpty();)if(t=this.comparator_(e,s.key),t===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else t<0?s=s.left:t>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Eh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Eh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Eh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Eh(this.root_,null,this.comparator_,!0,e)}};ti.EMPTY_NODE=new E1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n,e){return yl(n.name,e.name)}function eg(n,e){return yl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L_;function w1(n){L_=n}const jA=function(n){return typeof n=="number"?"number:"+gA(n):"string:"+n},BA=function(n){if(n.isLeafNode()){const e=n.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zi(e,".sv"),"Priority must be a string or number.")}else ne(n===L_||n.isEmpty(),"priority of unexpected type.");ne(n===L_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JE;class en{static set __childrenNodeConstructor(e){JE=e}static get __childrenNodeConstructor(){return JE}constructor(e,t=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),BA(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:He(e)===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=He(e);return s===null?t:t.isEmpty()&&s!==".priority"?this:(ne(s!==".priority"||Or(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jA(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=gA(this.value_):e+=this.value_,this.lazyHash_=pA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,i=en.VALUE_TYPE_ORDER.indexOf(t),r=en.VALUE_TYPE_ORDER.indexOf(s);return ne(i>=0,"Unknown leaf type: "+t),ne(r>=0,"Unknown leaf type: "+s),i===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HA,WA;function b1(n){HA=n}function I1(n){WA=n}class A1 extends Ef{compare(e,t){const s=e.node.getPriority(),i=t.node.getPriority(),r=s.compareTo(i);return r===0?yl(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return We.MIN}maxPost(){return new We(Mo,new en("[PRIORITY-POST]",WA))}makePost(e,t){const s=HA(e);return new We(t,new en("[PRIORITY-POST]",s))}toString(){return".priority"}}const Mt=new A1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=Math.log(2);class S1{constructor(e){const t=r=>parseInt(Math.log(r)/C1,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=s(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Td=function(n,e,t,s){n.sort(e);const i=function(c,h){const d=h-c;let p,g;if(d===0)return null;if(d===1)return p=n[c],g=t?t(p):p,new zn(g,p.node,zn.BLACK,null,null);{const y=parseInt(d/2,10)+c,w=i(c,y),N=i(y+1,h);return p=n[y],g=t?t(p):p,new zn(g,p.node,zn.BLACK,w,N)}},r=function(c){let h=null,d=null,p=n.length;const g=function(w,N){const k=p-w,F=p;p-=w;const $=i(k+1,F),K=n[k],H=t?t(K):K;y(new zn(H,K.node,N,null,$))},y=function(w){h?(h.left=w,h=w):(d=w,h=w)};for(let w=0;w<c.count;++w){const N=c.nextBitIsOne(),k=Math.pow(2,c.count-(w+1));N?g(k,zn.BLACK):(g(k,zn.BLACK),g(k,zn.RED))}return d},o=new S1(n.length),a=r(o);return new ti(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $p;const wa={};class Di{static get Default(){return ne(wa&&Mt,"ChildrenNode.ts has not been loaded"),$p=$p||new Di({".priority":wa},{".priority":Mt}),$p}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Xa(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ti?t:null}hasIndex(e){return zi(this.indexSet_,e.toString())}addIndex(e,t){ne(e!==Ga,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const r=t.getIterator(We.Wrap);let o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),s.push(o),o=r.getNext();let a;i?a=Td(s,e.getCompare()):a=wa;const c=e.toString(),h=Object.assign({},this.indexSet_);h[c]=e;const d=Object.assign({},this.indexes_);return d[c]=a,new Di(d,h)}addToIndexes(e,t){const s=dd(this.indexes_,(i,r)=>{const o=Xa(this.indexSet_,r);if(ne(o,"Missing index implementation for "+r),i===wa)if(o.isDefinedOn(e.node)){const a=[],c=t.getIterator(We.Wrap);let h=c.getNext();for(;h;)h.name!==e.name&&a.push(h),h=c.getNext();return a.push(e),Td(a,o.getCompare())}else return wa;else{const a=t.get(e.name);let c=i;return a&&(c=c.remove(new We(e.name,a))),c.insert(e,e.node)}});return new Di(s,this.indexSet_)}removeFromIndexes(e,t){const s=dd(this.indexes_,i=>{if(i===wa)return i;{const r=t.get(e.name);return r?i.remove(new We(e.name,r)):i}});return new Di(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac;class Re{static get EMPTY_NODE(){return ac||(ac=new Re(new ti(eg),null,Di.Default))}constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&BA(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ac}updatePriority(e){return this.children_.isEmpty()?this:new Re(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?ac:t}}getChild(e){const t=He(e);return t===null?this:this.getImmediateChild(t).getChild(wt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ne(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const s=new We(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(s,this.children_));const o=i.isEmpty()?ac:this.priorityNode_;return new Re(i,o,r)}}updateChild(e,t){const s=He(e);if(s===null)return t;{ne(He(e)!==".priority"||Or(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(wt(e),t);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,i=0,r=!0;if(this.forEachChild(Mt,(o,a)=>{t[o]=a.val(e),s++,r&&Re.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):r=!1}),!e&&r&&i<2*s){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+jA(this.getPriority().val())+":"),this.forEachChild(Mt,(t,s)=>{const i=s.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":pA(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const i=this.resolveIndex_(s);if(i){const r=i.getPredecessorKey(new We(e,t));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new We(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new We(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,We.Wrap);let r=i.peek();for(;r!=null&&t.compare(r,e)<0;)i.getNext(),r=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,We.Wrap);let r=i.peek();for(;r!=null&&t.compare(r,e)>0;)i.getNext(),r=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wu?-1:0}withIndex(e){if(e===Ga||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Re(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ga||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const s=this.getIterator(Mt),i=t.getIterator(Mt);let r=s.getNext(),o=i.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=s.getNext(),o=i.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ga?null:this.indexMap_.get(e.toString())}}Re.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class R1 extends Re{constructor(){super(new ti(eg),Re.EMPTY_NODE,Di.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Re.EMPTY_NODE}isEmpty(){return!1}}const wu=new R1;Object.defineProperties(We,{MIN:{value:new We(el,Re.EMPTY_NODE)},MAX:{value:new We(Mo,wu)}});UA.__EMPTY_NODE=Re.EMPTY_NODE;en.__childrenNodeConstructor=Re;w1(wu);I1(wu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=!0;function nn(n,e=null){if(n===null)return Re.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new en(t,nn(e))}if(!(n instanceof Array)&&P1){const t=[];let s=!1;if(Bn(n,(o,a)=>{if(o.substring(0,1)!=="."){const c=nn(a);c.isEmpty()||(s=s||!c.getPriority().isEmpty(),t.push(new We(o,c)))}}),t.length===0)return Re.EMPTY_NODE;const r=Td(t,T1,o=>o.name,eg);if(s){const o=Td(t,Mt.getCompare());return new Re(r,nn(e),new Di({".priority":o},{".priority":Mt}))}else return new Re(r,nn(e),Di.Default)}else{let t=Re.EMPTY_NODE;return Bn(n,(s,i)=>{if(zi(n,s)&&s.substring(0,1)!=="."){const r=nn(i);(r.isLeafNode()||!r.isEmpty())&&(t=t.updateImmediateChild(s,r))}}),t.updatePriority(nn(e))}}b1(nn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends Ef{constructor(e){super(),this.indexPath_=e,ne(!ze(e)&&He(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),i=this.extractChild(t.node),r=s.compareTo(i);return r===0?yl(e.name,t.name):r}makePost(e,t){const s=nn(e),i=Re.EMPTY_NODE.updateChild(this.indexPath_,s);return new We(t,i)}maxPost(){const e=Re.EMPTY_NODE.updateChild(this.indexPath_,wu);return new We(Mo,e)}toString(){return VA(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends Ef{compare(e,t){const s=e.node.compareTo(t.node);return s===0?yl(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return We.MIN}maxPost(){return We.MAX}makePost(e,t){const s=nn(e);return new We(t,s)}toString(){return".value"}}const k1=new O1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(n){return{type:"value",snapshotNode:n}}function tl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Jc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Zc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function D1(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.index_=e}updateChild(e,t,s,i,r,o){ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(s.getChild(i))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(t)?o.trackChildChange(Jc(t,a)):ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(tl(t,s)):o.trackChildChange(Zc(t,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(t,s).withIndex(this.index_)}updateFullNode(e,t,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Mt,(i,r)=>{t.hasChild(i)||s.trackChildChange(Jc(i,r))}),t.isLeafNode()||t.forEachChild(Mt,(i,r)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(r)||s.trackChildChange(Zc(i,r,o))}else s.trackChildChange(tl(i,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Re.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.indexedFilter_=new tg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=eu.getStartPost_(e),this.endPost_=eu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&s}updateChild(e,t,s,i,r,o){return this.matches(new We(t,s))||(s=Re.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,s,i,r,o)}updateFullNode(e,t,s){t.isLeafNode()&&(t=Re.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Re.EMPTY_NODE);const r=this;return t.forEachChild(Mt,(o,a)=>{r.matches(new We(o,a))||(i=i.updateImmediateChild(o,Re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=t=>{const s=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new eu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,s,i,r,o){return this.rangedFilter_.matches(new We(t,s))||(s=Re.EMPTY_NODE),e.getImmediateChild(t).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,s,i,r,o):this.fullLimitUpdateChild_(e,t,s,r,o)}updateFullNode(e,t,s){let i;if(t.isLeafNode()||t.isEmpty())i=Re.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Re.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Re.EMPTY_NODE);let r;this.reverse_?r=i.getReverseIterator(this.index_):r=i.getIterator(this.index_);let o=0;for(;r.hasNext();){const a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Re.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,s,i,r){let o;if(this.reverse_){const p=this.index_.getCompare();o=(g,y)=>p(y,g)}else o=this.index_.getCompare();const a=e;ne(a.numChildren()===this.limit_,"");const c=new We(t,s),h=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(t)){const p=a.getImmediateChild(t);let g=i.getChildAfterChild(this.index_,h,this.reverse_);for(;g!=null&&(g.name===t||a.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);const y=g==null?1:o(g,c);if(d&&!s.isEmpty()&&y>=0)return r!=null&&r.trackChildChange(Zc(t,s,p)),a.updateImmediateChild(t,s);{r!=null&&r.trackChildChange(Jc(t,p));const N=a.updateImmediateChild(t,Re.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(r!=null&&r.trackChildChange(tl(g.name,g.node)),N.updateImmediateChild(g.name,g.node)):N}}else return s.isEmpty()?e:d&&o(h,c)>=0?(r!=null&&(r.trackChildChange(Jc(h.name,h.node)),r.trackChildChange(tl(t,s))),a.updateImmediateChild(t,s).updateImmediateChild(h.name,Re.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:el}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mt}copy(){const e=new ng;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function L1(n){return n.loadsAllData()?new tg(n.getIndex()):n.hasLimit()?new x1(n):new eu(n)}function ZE(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Mt?t="$priority":n.index_===k1?t="$value":n.index_===Ga?t="$key":(ne(n.index_ instanceof N1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=zt(t),n.startSet_){const s=n.startAfterSet_?"startAfter":"startAt";e[s]=zt(n.indexStartValue_),n.startNameSet_&&(e[s]+=","+zt(n.indexStartName_))}if(n.endSet_){const s=n.endBeforeSet_?"endBefore":"endAt";e[s]=zt(n.indexEndValue_),n.endNameSet_&&(e[s]+=","+zt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function eT(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Mt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends xA{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,s,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=Tu("p:rest:"),this.listens_={}}listen(e,t,s,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=wd.getListenId_(e,s),a={};this.listens_[o]=a;const c=ZE(e._queryParams);this.restRequest_(r+".json",c,(h,d)=>{let p=d;if(h===404&&(p=null,h=null),h===null&&this.onDataUpdate_(r,p,!1,s),Xa(this.listens_,o)===a){let g;h?h===401?g="permission_denied":g="rest_error:"+h:g="ok",i(g,null)}})}unlisten(e,t){const s=wd.getListenId_(e,t);delete this.listens_[s]}get(e){const t=ZE(e._queryParams),s=e._path.toString(),i=new hf;return this.restRequest_(s+".json",t,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(s,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gl(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Wc(a.responseText)}catch{jn("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,c)}else a.status!==401&&a.status!==404&&jn("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.rootNode_=Re.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){return{value:null,children:new Map}}function KA(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const s=He(e);n.children.has(s)||n.children.set(s,bd());const i=n.children.get(s);e=wt(e),KA(i,e,t)}}function M_(n,e,t){n.value!==null?t(e,n.value):V1(n,(s,i)=>{const r=new gt(e.toString()+"/"+s);M_(i,r,t)})}function V1(n,e){n.children.forEach((t,s)=>{e(s,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bn(this.last_,(s,i)=>{t[s]=t[s]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=10*1e3,$1=30*1e3,U1=5*60*1e3;class j1{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new F1(e);const s=tT+($1-tT)*Math.random();Pc(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;Bn(e,(i,r)=>{r>0&&zi(this.statsToReport_,i)&&(t[i]=r,s=!0)}),s&&this.server_.reportStats(t),Pc(this.reportStats_.bind(this),Math.floor(Math.random()*2*U1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Os;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Os||(Os={}));function zA(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ig(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=Os.ACK_USER_WRITE,this.source=zA()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new gt(e));return new Id(st(),t,this.revert)}}else return ne(He(this.path)===e,"operationForChild called for unrelated child."),new Id(wt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.source=e,this.path=t,this.type=Os.LISTEN_COMPLETE}operationForChild(e){return ze(this.path)?new tu(this.source,st()):new tu(this.source,wt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=Os.OVERWRITE}operationForChild(e){return ze(this.path)?new Vo(this.source,st(),this.snap.getImmediateChild(e)):new Vo(this.source,wt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=Os.MERGE}operationForChild(e){if(ze(this.path)){const t=this.children.subtree(new gt(e));return t.isEmpty()?null:t.value?new Vo(this.source,st(),t.value):new nu(this.source,st(),t)}else return ne(He(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new nu(this.source,wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=He(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function H1(n,e,t,s){const i=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(D1(o.childName,o.snapshotNode))}),lc(n,i,"child_removed",e,s,t),lc(n,i,"child_added",e,s,t),lc(n,i,"child_moved",r,s,t),lc(n,i,"child_changed",e,s,t),lc(n,i,"value",e,s,t),i}function lc(n,e,t,s,i,r){const o=s.filter(a=>a.type===t);o.sort((a,c)=>q1(n,a,c)),o.forEach(a=>{const c=W1(n,a,r);i.forEach(h=>{h.respondsTo(a.type)&&e.push(h.createEvent(c,n.query_))})})}function W1(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function q1(n,e,t){if(e.childName==null||t.childName==null)throw ml("Should only compare child_ events.");const s=new We(e.childName,e.snapshotNode),i=new We(t.childName,t.snapshotNode);return n.index_.compare(s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n,e){return{eventCache:n,serverCache:e}}function Nc(n,e,t,s){return Tf(new kr(e,t,s),n.serverCache)}function GA(n,e,t,s){return Tf(n.eventCache,new kr(e,t,s))}function Ad(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Up;const K1=()=>(Up||(Up=new ti(OV)),Up);class Ct{static fromObject(e){let t=new Ct(null);return Bn(e,(s,i)=>{t=t.set(new gt(s),i)}),t}constructor(e,t=K1()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:st(),value:this.value};if(ze(e))return null;{const s=He(e),i=this.children.get(s);if(i!==null){const r=i.findRootMostMatchingPathAndValue(wt(e),t);return r!=null?{path:Gt(new gt(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const t=He(e),s=this.children.get(t);return s!==null?s.subtree(wt(e)):new Ct(null)}}set(e,t){if(ze(e))return new Ct(t,this.children);{const s=He(e),r=(this.children.get(s)||new Ct(null)).set(wt(e),t),o=this.children.insert(s,r);return new Ct(this.value,o)}}remove(e){if(ze(e))return this.children.isEmpty()?new Ct(null):new Ct(null,this.children);{const t=He(e),s=this.children.get(t);if(s){const i=s.remove(wt(e));let r;return i.isEmpty()?r=this.children.remove(t):r=this.children.insert(t,i),this.value===null&&r.isEmpty()?new Ct(null):new Ct(this.value,r)}else return this}}get(e){if(ze(e))return this.value;{const t=He(e),s=this.children.get(t);return s?s.get(wt(e)):null}}setTree(e,t){if(ze(e))return t;{const s=He(e),r=(this.children.get(s)||new Ct(null)).setTree(wt(e),t);let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),new Ct(this.value,o)}}fold(e){return this.fold_(st(),e)}fold_(e,t){const s={};return this.children.inorderTraversal((i,r)=>{s[i]=r.fold_(Gt(e,i),t)}),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,st(),t)}findOnPath_(e,t,s){const i=this.value?s(t,this.value):!1;if(i)return i;if(ze(e))return null;{const r=He(e),o=this.children.get(r);return o?o.findOnPath_(wt(e),Gt(t,r),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,st(),t)}foreachOnPath_(e,t,s){if(ze(e))return this;{this.value&&s(t,this.value);const i=He(e),r=this.children.get(i);return r?r.foreachOnPath_(wt(e),Gt(t,i),s):new Ct(null)}}foreach(e){this.foreach_(st(),e)}foreach_(e,t){this.children.inorderTraversal((s,i)=>{i.foreach_(Gt(e,s),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,s)=>{s.value&&e(t,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.writeTree_=e}static empty(){return new xs(new Ct(null))}}function Oc(n,e,t){if(ze(e))return new xs(new Ct(t));{const s=n.writeTree_.findRootMostValueAndPath(e);if(s!=null){const i=s.path;let r=s.value;const o=Sn(i,e);return r=r.updateChild(o,t),new xs(n.writeTree_.set(i,r))}else{const i=new Ct(t),r=n.writeTree_.setTree(e,i);return new xs(r)}}}function nT(n,e,t){let s=n;return Bn(t,(i,r)=>{s=Oc(s,Gt(e,i),r)}),s}function sT(n,e){if(ze(e))return xs.empty();{const t=n.writeTree_.setTree(e,new Ct(null));return new xs(t)}}function V_(n,e){return Qo(n,e)!=null}function Qo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Sn(t.path,e)):null}function iT(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Mt,(s,i)=>{e.push(new We(s,i))}):n.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&e.push(new We(s,i.value))}),e}function Ir(n,e){if(ze(e))return n;{const t=Qo(n,e);return t!=null?new xs(new Ct(t)):new xs(n.writeTree_.subtree(e))}}function F_(n){return n.writeTree_.isEmpty()}function nl(n,e){return QA(st(),n.writeTree_,e)}function QA(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let s=null;return e.children.inorderTraversal((i,r)=>{i===".priority"?(ne(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):t=QA(Gt(n,i),r,t)}),!t.getChild(n).isEmpty()&&s!==null&&(t=t.updateChild(Gt(n,".priority"),s)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n,e){return ZA(e,n)}function z1(n,e,t,s,i){ne(s>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:s,visible:i}),i&&(n.visibleWrites=Oc(n.visibleWrites,e,t)),n.lastWriteId=s}function G1(n,e){for(let t=0;t<n.allWrites.length;t++){const s=n.allWrites[t];if(s.writeId===e)return s}return null}function Q1(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);ne(t>=0,"removeWrite called with nonexistent writeId.");const s=n.allWrites[t];n.allWrites.splice(t,1);let i=s.visible,r=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Y1(a,s.path)?i=!1:Ns(s.path,a.path)&&(r=!0)),o--}if(i){if(r)return X1(n),!0;if(s.snap)n.visibleWrites=sT(n.visibleWrites,s.path);else{const a=s.children;Bn(a,c=>{n.visibleWrites=sT(n.visibleWrites,Gt(s.path,c))})}return!0}else return!1}function Y1(n,e){if(n.snap)return Ns(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ns(Gt(n.path,t),e))return!0;return!1}function X1(n){n.visibleWrites=YA(n.allWrites,J1,st()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function J1(n){return n.visible}function YA(n,e,t){let s=xs.empty();for(let i=0;i<n.length;++i){const r=n[i];if(e(r)){const o=r.path;let a;if(r.snap)Ns(t,o)?(a=Sn(t,o),s=Oc(s,a,r.snap)):Ns(o,t)&&(a=Sn(o,t),s=Oc(s,st(),r.snap.getChild(a)));else if(r.children){if(Ns(t,o))a=Sn(t,o),s=nT(s,a,r.children);else if(Ns(o,t))if(a=Sn(o,t),ze(a))s=nT(s,st(),r.children);else{const c=Xa(r.children,He(a));if(c){const h=c.getChild(wt(a));s=Oc(s,st(),h)}}}else throw ml("WriteRecord should have .snap or .children")}}return s}function XA(n,e,t,s,i){if(!s&&!i){const r=Qo(n.visibleWrites,e);if(r!=null)return r;{const o=Ir(n.visibleWrites,e);if(F_(o))return t;if(t==null&&!V_(o,st()))return null;{const a=t||Re.EMPTY_NODE;return nl(o,a)}}}else{const r=Ir(n.visibleWrites,e);if(!i&&F_(r))return t;if(!i&&t==null&&!V_(r,st()))return null;{const o=function(h){return(h.visible||i)&&(!s||!~s.indexOf(h.writeId))&&(Ns(h.path,e)||Ns(e,h.path))},a=YA(n.allWrites,o,e),c=t||Re.EMPTY_NODE;return nl(a,c)}}}function Z1(n,e,t){let s=Re.EMPTY_NODE;const i=Qo(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Mt,(r,o)=>{s=s.updateImmediateChild(r,o)}),s;if(t){const r=Ir(n.visibleWrites,e);return t.forEachChild(Mt,(o,a)=>{const c=nl(Ir(r,new gt(o)),a);s=s.updateImmediateChild(o,c)}),iT(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const r=Ir(n.visibleWrites,e);return iT(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function eF(n,e,t,s,i){ne(s||i,"Either existingEventSnap or existingServerSnap must exist");const r=Gt(e,t);if(V_(n.visibleWrites,r))return null;{const o=Ir(n.visibleWrites,r);return F_(o)?i.getChild(t):nl(o,i.getChild(t))}}function tF(n,e,t,s){const i=Gt(e,t),r=Qo(n.visibleWrites,i);if(r!=null)return r;if(s.isCompleteForChild(t)){const o=Ir(n.visibleWrites,i);return nl(o,s.getNode().getImmediateChild(t))}else return null}function nF(n,e){return Qo(n.visibleWrites,e)}function sF(n,e,t,s,i,r,o){let a;const c=Ir(n.visibleWrites,e),h=Qo(c,st());if(h!=null)a=h;else if(t!=null)a=nl(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],p=o.getCompare(),g=r?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let y=g.getNext();for(;y&&d.length<i;)p(y,s)!==0&&d.push(y),y=g.getNext();return d}else return[]}function iF(){return{visibleWrites:xs.empty(),allWrites:[],lastWriteId:-1}}function Cd(n,e,t,s){return XA(n.writeTree,n.treePath,e,t,s)}function rg(n,e){return Z1(n.writeTree,n.treePath,e)}function rT(n,e,t,s){return eF(n.writeTree,n.treePath,e,t,s)}function Sd(n,e){return nF(n.writeTree,Gt(n.treePath,e))}function rF(n,e,t,s,i,r){return sF(n.writeTree,n.treePath,e,t,s,i,r)}function og(n,e,t){return tF(n.writeTree,n.treePath,e,t)}function JA(n,e){return ZA(Gt(n.treePath,e),n.writeTree)}function ZA(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;ne(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ne(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const r=i.type;if(t==="child_added"&&r==="child_removed")this.changeMap.set(s,Zc(s,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(t==="child_removed"&&r==="child_changed")this.changeMap.set(s,Jc(s,i.oldSnap));else if(t==="child_changed"&&r==="child_added")this.changeMap.set(s,tl(s,e.snapshotNode));else if(t==="child_changed"&&r==="child_changed")this.changeMap.set(s,Zc(s,e.snapshotNode,i.oldSnap));else throw ml("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}}const eC=new aF;class ag{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new kr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return og(this.writes_,e,s)}}getChildAfterChild(e,t,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fo(this.viewCache_),r=rF(this.writes_,i,t,1,s,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(n){return{filter:n}}function cF(n,e){ne(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function uF(n,e,t,s,i){const r=new oF;let o,a;if(t.type===Os.OVERWRITE){const h=t;h.source.fromUser?o=$_(n,e,h.path,h.snap,s,i,r):(ne(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered()&&!ze(h.path),o=Rd(n,e,h.path,h.snap,s,i,a,r))}else if(t.type===Os.MERGE){const h=t;h.source.fromUser?o=dF(n,e,h.path,h.children,s,i,r):(ne(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered(),o=U_(n,e,h.path,h.children,s,i,a,r))}else if(t.type===Os.ACK_USER_WRITE){const h=t;h.revert?o=_F(n,e,h.path,s,i,r):o=fF(n,e,h.path,h.affectedTree,s,i,r)}else if(t.type===Os.LISTEN_COMPLETE)o=pF(n,e,t.path,s,r);else throw ml("Unknown operation type: "+t.type);const c=r.getChanges();return hF(e,o,c),{viewCache:o,changes:c}}function hF(n,e,t){const s=e.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=Ad(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&t.push(qA(Ad(e)))}}function tC(n,e,t,s,i,r){const o=e.eventCache;if(Sd(s,t)!=null)return e;{let a,c;if(ze(t))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=Fo(e),d=h instanceof Re?h:Re.EMPTY_NODE,p=rg(s,d);a=n.filter.updateFullNode(e.eventCache.getNode(),p,r)}else{const h=Cd(s,Fo(e));a=n.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const h=He(t);if(h===".priority"){ne(Or(t)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const p=rT(s,t,d,c);p!=null?a=n.filter.updatePriority(d,p):a=o.getNode()}else{const d=wt(t);let p;if(o.isCompleteForChild(h)){c=e.serverCache.getNode();const g=rT(s,t,o.getNode(),c);g!=null?p=o.getNode().getImmediateChild(h).updateChild(d,g):p=o.getNode().getImmediateChild(h)}else p=og(s,h,e.serverCache);p!=null?a=n.filter.updateChild(o.getNode(),h,p,d,i,r):a=o.getNode()}}return Nc(e,a,o.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function Rd(n,e,t,s,i,r,o,a){const c=e.serverCache;let h;const d=o?n.filter:n.filter.getIndexedFilter();if(ze(t))h=d.updateFullNode(c.getNode(),s,null);else if(d.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(t,s);h=d.updateFullNode(c.getNode(),y,null)}else{const y=He(t);if(!c.isCompleteForPath(t)&&Or(t)>1)return e;const w=wt(t),k=c.getNode().getImmediateChild(y).updateChild(w,s);y===".priority"?h=d.updatePriority(c.getNode(),k):h=d.updateChild(c.getNode(),y,k,w,eC,null)}const p=GA(e,h,c.isFullyInitialized()||ze(t),d.filtersNodes()),g=new ag(i,p,r);return tC(n,p,t,i,g,a)}function $_(n,e,t,s,i,r,o){const a=e.eventCache;let c,h;const d=new ag(i,e,r);if(ze(t))h=n.filter.updateFullNode(e.eventCache.getNode(),s,o),c=Nc(e,h,!0,n.filter.filtersNodes());else{const p=He(t);if(p===".priority")h=n.filter.updatePriority(e.eventCache.getNode(),s),c=Nc(e,h,a.isFullyInitialized(),a.isFiltered());else{const g=wt(t),y=a.getNode().getImmediateChild(p);let w;if(ze(g))w=s;else{const N=d.getCompleteChild(p);N!=null?MA(g)===".priority"&&N.getChild(FA(g)).isEmpty()?w=N:w=N.updateChild(g,s):w=Re.EMPTY_NODE}if(y.equals(w))c=e;else{const N=n.filter.updateChild(a.getNode(),p,w,g,d,o);c=Nc(e,N,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function oT(n,e){return n.eventCache.isCompleteForChild(e)}function dF(n,e,t,s,i,r,o){let a=e;return s.foreach((c,h)=>{const d=Gt(t,c);oT(e,He(d))&&(a=$_(n,a,d,h,i,r,o))}),s.foreach((c,h)=>{const d=Gt(t,c);oT(e,He(d))||(a=$_(n,a,d,h,i,r,o))}),a}function aT(n,e,t){return t.foreach((s,i)=>{e=e.updateChild(s,i)}),e}function U_(n,e,t,s,i,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,h;ze(t)?h=s:h=new Ct(null).setTree(t,s);const d=e.serverCache.getNode();return h.children.inorderTraversal((p,g)=>{if(d.hasChild(p)){const y=e.serverCache.getNode().getImmediateChild(p),w=aT(n,y,g);c=Rd(n,c,new gt(p),w,i,r,o,a)}}),h.children.inorderTraversal((p,g)=>{const y=!e.serverCache.isCompleteForChild(p)&&g.value===null;if(!d.hasChild(p)&&!y){const w=e.serverCache.getNode().getImmediateChild(p),N=aT(n,w,g);c=Rd(n,c,new gt(p),N,i,r,o,a)}}),c}function fF(n,e,t,s,i,r,o){if(Sd(i,t)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(s.value!=null){if(ze(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Rd(n,e,t,c.getNode().getChild(t),i,r,a,o);if(ze(t)){let h=new Ct(null);return c.getNode().forEachChild(Ga,(d,p)=>{h=h.set(new gt(d),p)}),U_(n,e,t,h,i,r,a,o)}else return e}else{let h=new Ct(null);return s.foreach((d,p)=>{const g=Gt(t,d);c.isCompleteForPath(g)&&(h=h.set(d,c.getNode().getChild(g)))}),U_(n,e,t,h,i,r,a,o)}}function pF(n,e,t,s,i){const r=e.serverCache,o=GA(e,r.getNode(),r.isFullyInitialized()||ze(t),r.isFiltered());return tC(n,o,t,s,eC,i)}function _F(n,e,t,s,i,r){let o;if(Sd(s,t)!=null)return e;{const a=new ag(s,e,i),c=e.eventCache.getNode();let h;if(ze(t)||He(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Cd(s,Fo(e));else{const p=e.serverCache.getNode();ne(p instanceof Re,"serverChildren would be complete if leaf node"),d=rg(s,p)}d=d,h=n.filter.updateFullNode(c,d,r)}else{const d=He(t);let p=og(s,d,e.serverCache);p==null&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),p!=null?h=n.filter.updateChild(c,d,p,wt(t),a,r):e.eventCache.getNode().hasChild(d)?h=n.filter.updateChild(c,d,Re.EMPTY_NODE,wt(t),a,r):h=c,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Cd(s,Fo(e)),o.isLeafNode()&&(h=n.filter.updateFullNode(h,o,r)))}return o=e.serverCache.isFullyInitialized()||Sd(s,st())!=null,Nc(e,h,o,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,i=new tg(s.getIndex()),r=L1(s);this.processor_=lF(r);const o=t.serverCache,a=t.eventCache,c=i.updateFullNode(Re.EMPTY_NODE,o.getNode(),null),h=r.updateFullNode(Re.EMPTY_NODE,a.getNode(),null),d=new kr(c,o.isFullyInitialized(),i.filtersNodes()),p=new kr(h,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Tf(p,d),this.eventGenerator_=new B1(this.query_)}get query(){return this.query_}}function gF(n){return n.viewCache_.serverCache.getNode()}function vF(n){return Ad(n.viewCache_)}function yF(n,e){const t=Fo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild(He(e)).isEmpty())?t.getChild(e):null}function lT(n){return n.eventRegistrations_.length===0}function EF(n,e){n.eventRegistrations_.push(e)}function cT(n,e,t){const s=[];if(t){ne(e==null,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(t,i);o&&s.push(o)})}if(e){let i=[];for(let r=0;r<n.eventRegistrations_.length;++r){const o=n.eventRegistrations_[r];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(r+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return s}function uT(n,e,t,s){e.type===Os.MERGE&&e.source.queryId!==null&&(ne(Fo(n.viewCache_),"We should always have a full cache before handling merges"),ne(Ad(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,r=uF(n.processor_,i,e,t,s);return cF(n.processor_,r.viewCache),ne(r.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=r.viewCache,nC(n,r.changes,r.viewCache.eventCache.getNode(),null)}function TF(n,e){const t=n.viewCache_.eventCache,s=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Mt,(r,o)=>{s.push(tl(r,o))}),t.isFullyInitialized()&&s.push(qA(t.getNode())),nC(n,s,t.getNode(),e)}function nC(n,e,t,s){const i=s?[s]:n.eventRegistrations_;return H1(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd;class sC{constructor(){this.views=new Map}}function wF(n){ne(!Pd,"__referenceConstructor has already been defined"),Pd=n}function bF(){return ne(Pd,"Reference.ts has not been loaded"),Pd}function IF(n){return n.views.size===0}function lg(n,e,t,s){const i=e.source.queryId;if(i!==null){const r=n.views.get(i);return ne(r!=null,"SyncTree gave us an op for an invalid query."),uT(r,e,t,s)}else{let r=[];for(const o of n.views.values())r=r.concat(uT(o,e,t,s));return r}}function iC(n,e,t,s,i){const r=e._queryIdentifier,o=n.views.get(r);if(!o){let a=Cd(t,i?s:null),c=!1;a?c=!0:s instanceof Re?(a=rg(t,s),c=!1):(a=Re.EMPTY_NODE,c=!1);const h=Tf(new kr(a,c,!1),new kr(s,i,!1));return new mF(e,h)}return o}function AF(n,e,t,s,i,r){const o=iC(n,e,s,i,r);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),EF(o,t),TF(o,t)}function CF(n,e,t,s){const i=e._queryIdentifier,r=[];let o=[];const a=Dr(n);if(i==="default")for(const[c,h]of n.views.entries())o=o.concat(cT(h,t,s)),lT(h)&&(n.views.delete(c),h.query._queryParams.loadsAllData()||r.push(h.query));else{const c=n.views.get(i);c&&(o=o.concat(cT(c,t,s)),lT(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||r.push(c.query)))}return a&&!Dr(n)&&r.push(new(bF())(e._repo,e._path)),{removed:r,events:o}}function rC(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ar(n,e){let t=null;for(const s of n.views.values())t=t||yF(s,e);return t}function oC(n,e){if(e._queryParams.loadsAllData())return bf(n);{const s=e._queryIdentifier;return n.views.get(s)}}function aC(n,e){return oC(n,e)!=null}function Dr(n){return bf(n)!=null}function bf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd;function SF(n){ne(!Nd,"__referenceConstructor has already been defined"),Nd=n}function RF(){return ne(Nd,"Reference.ts has not been loaded"),Nd}let PF=1;class hT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ct(null),this.pendingWriteTree_=iF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lC(n,e,t,s,i){return z1(n.pendingWriteTree_,e,t,s,i),i?Iu(n,new Vo(zA(),e,t)):[]}function Ao(n,e,t=!1){const s=G1(n.pendingWriteTree_,e);if(Q1(n.pendingWriteTree_,e)){let r=new Ct(null);return s.snap!=null?r=r.set(st(),!0):Bn(s.children,o=>{r=r.set(new gt(o),!0)}),Iu(n,new Id(s.path,r,t))}else return[]}function bu(n,e,t){return Iu(n,new Vo(sg(),e,t))}function NF(n,e,t){const s=Ct.fromObject(t);return Iu(n,new nu(sg(),e,s))}function OF(n,e){return Iu(n,new tu(sg(),e))}function kF(n,e,t){const s=ug(n,t);if(s){const i=hg(s),r=i.path,o=i.queryId,a=Sn(r,e),c=new tu(ig(o),a);return dg(n,r,c)}else return[]}function Od(n,e,t,s,i=!1){const r=e._path,o=n.syncPointTree_.get(r);let a=[];if(o&&(e._queryIdentifier==="default"||aC(o,e))){const c=CF(o,e,t,s);IF(o)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const h=c.removed;if(a=c.events,!i){const d=h.findIndex(g=>g._queryParams.loadsAllData())!==-1,p=n.syncPointTree_.findOnPath(r,(g,y)=>Dr(y));if(d&&!p){const g=n.syncPointTree_.subtree(r);if(!g.isEmpty()){const y=LF(g);for(let w=0;w<y.length;++w){const N=y[w],k=N.query,F=dC(n,N);n.listenProvider_.startListening(kc(k),su(n,k),F.hashFn,F.onComplete)}}}!p&&h.length>0&&!s&&(d?n.listenProvider_.stopListening(kc(e),null):h.forEach(g=>{const y=n.queryToTagMap.get(If(g));n.listenProvider_.stopListening(kc(g),y)}))}MF(n,h)}return a}function cC(n,e,t,s){const i=ug(n,s);if(i!=null){const r=hg(i),o=r.path,a=r.queryId,c=Sn(o,e),h=new Vo(ig(a),c,t);return dg(n,o,h)}else return[]}function DF(n,e,t,s){const i=ug(n,s);if(i){const r=hg(i),o=r.path,a=r.queryId,c=Sn(o,e),h=Ct.fromObject(t),d=new nu(ig(a),c,h);return dg(n,o,d)}else return[]}function j_(n,e,t,s=!1){const i=e._path;let r=null,o=!1;n.syncPointTree_.foreachOnPath(i,(g,y)=>{const w=Sn(g,i);r=r||Ar(y,w),o=o||Dr(y)});let a=n.syncPointTree_.get(i);a?(o=o||Dr(a),r=r||Ar(a,st())):(a=new sC,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;r!=null?c=!0:(c=!1,r=Re.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,w)=>{const N=Ar(w,st());N&&(r=r.updateImmediateChild(y,N))}));const h=aC(a,e);if(!h&&!e._queryParams.loadsAllData()){const g=If(e);ne(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");const y=VF();n.queryToTagMap.set(g,y),n.tagToQueryMap.set(y,g)}const d=wf(n.pendingWriteTree_,i);let p=AF(a,e,t,d,r,c);if(!h&&!o&&!s){const g=oC(a,e);p=p.concat(FF(n,e,g))}return p}function cg(n,e,t){const i=n.pendingWriteTree_,r=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Sn(o,e),h=Ar(a,c);if(h)return h});return XA(i,e,r,t,!0)}function xF(n,e){const t=e._path;let s=null;n.syncPointTree_.foreachOnPath(t,(h,d)=>{const p=Sn(h,t);s=s||Ar(d,p)});let i=n.syncPointTree_.get(t);i?s=s||Ar(i,st()):(i=new sC,n.syncPointTree_=n.syncPointTree_.set(t,i));const r=s!=null,o=r?new kr(s,!0,!1):null,a=wf(n.pendingWriteTree_,e._path),c=iC(i,e,a,r?o.getNode():Re.EMPTY_NODE,r);return vF(c)}function Iu(n,e){return uC(e,n.syncPointTree_,null,wf(n.pendingWriteTree_,st()))}function uC(n,e,t,s){if(ze(n.path))return hC(n,e,t,s);{const i=e.get(st());t==null&&i!=null&&(t=Ar(i,st()));let r=[];const o=He(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){const h=t?t.getImmediateChild(o):null,d=JA(s,o);r=r.concat(uC(a,c,h,d))}return i&&(r=r.concat(lg(i,n,s,t))),r}}function hC(n,e,t,s){const i=e.get(st());t==null&&i!=null&&(t=Ar(i,st()));let r=[];return e.children.inorderTraversal((o,a)=>{const c=t?t.getImmediateChild(o):null,h=JA(s,o),d=n.operationForChild(o);d&&(r=r.concat(hC(d,a,c,h)))}),i&&(r=r.concat(lg(i,n,s,t))),r}function dC(n,e){const t=e.query,s=su(n,t);return{hashFn:()=>(gF(e)||Re.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return s?kF(n,t._path,s):OF(n,t._path);{const r=xV(i,t);return Od(n,t,null,r)}}}}function su(n,e){const t=If(e);return n.queryToTagMap.get(t)}function If(n){return n._path.toString()+"$"+n._queryIdentifier}function ug(n,e){return n.tagToQueryMap.get(e)}function hg(n){const e=n.indexOf("$");return ne(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new gt(n.substr(0,e))}}function dg(n,e,t){const s=n.syncPointTree_.get(e);ne(s,"Missing sync point for query tag that we're tracking");const i=wf(n.pendingWriteTree_,e);return lg(s,t,i,null)}function LF(n){return n.fold((e,t,s)=>{if(t&&Dr(t))return[bf(t)];{let i=[];return t&&(i=rC(t)),Bn(s,(r,o)=>{i=i.concat(o)}),i}})}function kc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(RF())(n._repo,n._path):n}function MF(n,e){for(let t=0;t<e.length;++t){const s=e[t];if(!s._queryParams.loadsAllData()){const i=If(s),r=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(r)}}}function VF(){return PF++}function FF(n,e,t){const s=e._path,i=su(n,e),r=dC(n,t),o=n.listenProvider_.startListening(kc(e),i,r.hashFn,r.onComplete),a=n.syncPointTree_.subtree(s);if(i)ne(!Dr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((h,d,p)=>{if(!ze(h)&&d&&Dr(d))return[bf(d).query];{let g=[];return d&&(g=g.concat(rC(d).map(y=>y.query))),Bn(p,(y,w)=>{g=g.concat(w)}),g}});for(let h=0;h<c.length;++h){const d=c[h];n.listenProvider_.stopListening(kc(d),su(n,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new fg(t)}node(){return this.node_}}class pg{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Gt(this.path_,e);return new pg(this.syncTree_,t)}node(){return cg(this.syncTree_,this.path_)}}const $F=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},dT=function(n,e,t){if(!n||typeof n!="object")return n;if(ne(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return UF(n[".sv"],e,t);if(typeof n[".sv"]=="object")return jF(n[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},UF=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ne(!1,"Unexpected server value: "+n)}},jF=function(n,e,t){n.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const s=n.increment;typeof s!="number"&&ne(!1,"Unexpected increment value: "+s);const i=e.node();if(ne(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const o=i.getValue();return typeof o!="number"?s:o+s},BF=function(n,e,t,s){return _g(e,new pg(t,n),s)},fC=function(n,e,t){return _g(n,new fg(e),t)};function _g(n,e,t){const s=n.getPriority().val(),i=dT(s,e.getImmediateChild(".priority"),t);let r;if(n.isLeafNode()){const o=n,a=dT(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new en(a,nn(i)):n}else{const o=n;return r=o,i!==o.getPriority().val()&&(r=r.updatePriority(new en(i))),o.forEachChild(Mt,(a,c)=>{const h=_g(c,e.getImmediateChild(a),t);h!==c&&(r=r.updateImmediateChild(a,h))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function gg(n,e){let t=e instanceof gt?e:new gt(e),s=n,i=He(t);for(;i!==null;){const r=Xa(s.node.children,i)||{children:{},childCount:0};s=new mg(i,s,r),t=wt(t),i=He(t)}return s}function Tl(n){return n.node.value}function pC(n,e){n.node.value=e,B_(n)}function _C(n){return n.node.childCount>0}function HF(n){return Tl(n)===void 0&&!_C(n)}function Af(n,e){Bn(n.node.children,(t,s)=>{e(new mg(t,n,s))})}function mC(n,e,t,s){t&&e(n),Af(n,i=>{mC(i,e,!0)})}function WF(n,e,t){let s=n.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Au(n){return new gt(n.parent===null?n.name:Au(n.parent)+"/"+n.name)}function B_(n){n.parent!==null&&qF(n.parent,n.name,n)}function qF(n,e,t){const s=HF(t),i=zi(n.node.children,e);s&&i?(delete n.node.children[e],n.node.childCount--,B_(n)):!s&&!i&&(n.node.children[e]=t.node,n.node.childCount++,B_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=/[\[\].#$\/\u0000-\u001F\u007F]/,zF=/[\[\].#$\u0000-\u001F\u007F]/,jp=10*1024*1024,gC=function(n){return typeof n=="string"&&n.length!==0&&!KF.test(n)},vC=function(n){return typeof n=="string"&&n.length!==0&&!zF.test(n)},GF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vC(n)},yC=function(n,e,t,s){s&&e===void 0||vg(xm(n,"value"),e,t)},vg=function(n,e,t){const s=t instanceof gt?new f1(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+To(s));if(typeof e=="function")throw new Error(n+"contains a function "+To(s)+" with contents = "+e.toString());if(_A(e))throw new Error(n+"contains "+e.toString()+" "+To(s));if(typeof e=="string"&&e.length>jp/3&&df(e)>jp)throw new Error(n+"contains a string greater than "+jp+" utf8 bytes "+To(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,r=!1;if(Bn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!gC(o)))throw new Error(n+" contains an invalid key ("+o+") "+To(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);p1(s,o),vg(n,a,s),_1(s)}),i&&r)throw new Error(n+' contains ".value" child '+To(s)+" in addition to actual children.")}},EC=function(n,e,t,s){if(!vC(t))throw new Error(xm(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},QF=function(n,e,t,s){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EC(n,e,t)},yg=function(n,e){if(He(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},YF=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!GF(t))throw new Error(xm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Eg(n,e){let t=null;for(let s=0;s<e.length;s++){const i=e[s],r=i.getPath();t!==null&&!Jm(r,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:r}),t.events.push(i)}t&&n.eventLists_.push(t)}function TC(n,e,t){Eg(n,t),wC(n,s=>Jm(s,e))}function hi(n,e,t){Eg(n,t),wC(n,s=>Ns(s,e)||Ns(e,s))}function wC(n,e){n.recursionDepth_++;let t=!0;for(let s=0;s<n.eventLists_.length;s++){const i=n.eventLists_[s];if(i){const r=i.path;e(r)?(JF(n.eventLists_[s]),n.eventLists_[s]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function JF(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const s=t.getEventRunner();Rc&&mn("event: "+t.toString()),El(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="repo_interrupt",e$=25;class t${constructor(e,t,s,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bd(),this.transactionQueueTree_=new mg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function n$(n,e,t){if(n.stats_=Ym(n.repoInfo_),n.forceRestClient_||FV())n.server_=new wd(n.repoInfo_,(s,i,r,o)=>{fT(n,s,i,r,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>pT(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(t)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}n.persistentConnection_=new Li(n.repoInfo_,e,(s,i,r,o)=>{fT(n,s,i,r,o)},s=>{pT(n,s)},s=>{s$(n,s)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(s=>{n.server_.refreshAuthToken(s)}),n.appCheckProvider_.addTokenChangeListener(s=>{n.server_.refreshAppCheckToken(s.token)}),n.statsReporter_=HV(n.repoInfo_,()=>new j1(n.stats_,n.server_)),n.infoData_=new M1,n.infoSyncTree_=new hT({startListening:(s,i,r,o)=>{let a=[];const c=n.infoData_.getNode(s._path);return c.isEmpty()||(a=bu(n.infoSyncTree_,s._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),wg(n,"connected",!1),n.serverSyncTree_=new hT({startListening:(s,i,r,o)=>(n.server_.listen(s,r,i,(a,c)=>{const h=o(a,c);hi(n.eventQueue_,s._path,h)}),[]),stopListening:(s,i)=>{n.server_.unlisten(s,i)}})}function bC(n){const t=n.infoData_.getNode(new gt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Tg(n){return $F({timestamp:bC(n)})}function fT(n,e,t,s,i){n.dataUpdateCount++;const r=new gt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(s){const c=dd(t,h=>nn(h));o=DF(n.serverSyncTree_,r,c,i)}else{const c=nn(t);o=cC(n.serverSyncTree_,r,c,i)}else if(s){const c=dd(t,h=>nn(h));o=NF(n.serverSyncTree_,r,c)}else{const c=nn(t);o=bu(n.serverSyncTree_,r,c)}let a=r;o.length>0&&(a=Sf(n,r)),hi(n.eventQueue_,a,o)}function pT(n,e){wg(n,"connected",e),e===!1&&o$(n)}function s$(n,e){Bn(e,(t,s)=>{wg(n,t,s)})}function wg(n,e,t){const s=new gt("/.info/"+e),i=nn(t);n.infoData_.updateSnapshot(s,i);const r=bu(n.infoSyncTree_,s,i);hi(n.eventQueue_,s,r)}function IC(n){return n.nextWriteId_++}function i$(n,e,t){const s=xF(n.serverSyncTree_,e);return s!=null?Promise.resolve(s):n.server_.get(e).then(i=>{const r=nn(i).withIndex(e._queryParams.getIndex());j_(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=bu(n.serverSyncTree_,e._path,r);else{const a=su(n.serverSyncTree_,e);o=cC(n.serverSyncTree_,e._path,r,a)}return hi(n.eventQueue_,e._path,o),Od(n.serverSyncTree_,e,t,null,!0),r},i=>(Cf(n,"get for query "+zt(e)+" failed: "+i),Promise.reject(new Error(i))))}function r$(n,e,t,s,i){Cf(n,"set",{path:e.toString(),value:t,priority:s});const r=Tg(n),o=nn(t,s),a=cg(n.serverSyncTree_,e),c=fC(o,a,r),h=IC(n),d=lC(n.serverSyncTree_,e,c,h,!0);Eg(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(g,y)=>{const w=g==="ok";w||jn("set at "+e+" failed: "+g);const N=Ao(n.serverSyncTree_,h,!w);hi(n.eventQueue_,e,N),u$(n,i,g,y)});const p=PC(n,e);Sf(n,p),hi(n.eventQueue_,p,[])}function o$(n){Cf(n,"onDisconnectEvents");const e=Tg(n),t=bd();M_(n.onDisconnect_,st(),(i,r)=>{const o=BF(i,r,n.serverSyncTree_,e);KA(t,i,o)});let s=[];M_(t,st(),(i,r)=>{s=s.concat(bu(n.serverSyncTree_,i,r));const o=PC(n,i);Sf(n,o)}),n.onDisconnect_=bd(),hi(n.eventQueue_,st(),s)}function a$(n,e,t){let s;He(e._path)===".info"?s=j_(n.infoSyncTree_,e,t):s=j_(n.serverSyncTree_,e,t),TC(n.eventQueue_,e._path,s)}function l$(n,e,t){let s;He(e._path)===".info"?s=Od(n.infoSyncTree_,e,t):s=Od(n.serverSyncTree_,e,t),TC(n.eventQueue_,e._path,s)}function c$(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ZF)}function Cf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),mn(t,...e)}function u$(n,e,t,s){e&&El(()=>{if(t==="ok")e(null);else{const i=(t||"error").toUpperCase();let r=i;s&&(r+=": "+s);const o=new Error(r);o.code=i,e(o)}})}function AC(n,e,t){return cg(n.serverSyncTree_,e,t)||Re.EMPTY_NODE}function bg(n,e=n.transactionQueueTree_){if(e||Rf(n,e),Tl(e)){const t=SC(n,e);ne(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&h$(n,Au(e),t)}else _C(e)&&Af(e,t=>{bg(n,t)})}function h$(n,e,t){const s=t.map(h=>h.currentWriteId),i=AC(n,e,s);let r=i;const o=i.hash();for(let h=0;h<t.length;h++){const d=t[h];ne(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const p=Sn(e,d.path);r=r.updateChild(p,d.currentOutputSnapshotRaw)}const a=r.val(!0),c=e;n.server_.put(c.toString(),a,h=>{Cf(n,"transaction put response",{path:c.toString(),status:h});let d=[];if(h==="ok"){const p=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(Ao(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&p.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();Rf(n,gg(n.transactionQueueTree_,e)),bg(n,n.transactionQueueTree_),hi(n.eventQueue_,e,d);for(let g=0;g<p.length;g++)El(p[g])}else{if(h==="datastale")for(let p=0;p<t.length;p++)t[p].status===3?t[p].status=4:t[p].status=0;else{jn("transaction at "+c.toString()+" failed: "+h);for(let p=0;p<t.length;p++)t[p].status=4,t[p].abortReason=h}Sf(n,e)}},o)}function Sf(n,e){const t=CC(n,e),s=Au(t),i=SC(n,t);return d$(n,i,s),s}function d$(n,e,t){if(e.length===0)return;const s=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],h=Sn(t,c.path);let d=!1,p;if(ne(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,p=c.abortReason,i=i.concat(Ao(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=e$)d=!0,p="maxretry",i=i.concat(Ao(n.serverSyncTree_,c.currentWriteId,!0));else{const g=AC(n,c.path,o);c.currentInputSnapshot=g;const y=e[a].update(g.val());if(y!==void 0){vg("transaction failed: Data returned ",y,c.path);let w=nn(y);typeof y=="object"&&y!=null&&zi(y,".priority")||(w=w.updatePriority(g.getPriority()));const k=c.currentWriteId,F=Tg(n),$=fC(w,g,F);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=$,c.currentWriteId=IC(n),o.splice(o.indexOf(k),1),i=i.concat(lC(n.serverSyncTree_,c.path,$,c.currentWriteId,c.applyLocally)),i=i.concat(Ao(n.serverSyncTree_,k,!0))}else d=!0,p="nodata",i=i.concat(Ao(n.serverSyncTree_,c.currentWriteId,!0))}hi(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(p),!1,null))))}Rf(n,n.transactionQueueTree_);for(let a=0;a<s.length;a++)El(s[a]);bg(n,n.transactionQueueTree_)}function CC(n,e){let t,s=n.transactionQueueTree_;for(t=He(e);t!==null&&Tl(s)===void 0;)s=gg(s,t),e=wt(e),t=He(e);return s}function SC(n,e){const t=[];return RC(n,e,t),t.sort((s,i)=>s.order-i.order),t}function RC(n,e,t){const s=Tl(e);if(s)for(let i=0;i<s.length;i++)t.push(s[i]);Af(e,i=>{RC(n,i,t)})}function Rf(n,e){const t=Tl(e);if(t){let s=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[s]=t[i],s++);t.length=s,pC(e,t.length>0?t:void 0)}Af(e,s=>{Rf(n,s)})}function PC(n,e){const t=Au(CC(n,e)),s=gg(n.transactionQueueTree_,e);return WF(s,i=>{Bp(n,i)}),Bp(n,s),mC(s,i=>{Bp(n,i)}),t}function Bp(n,e){const t=Tl(e);if(t){const s=[];let i=[],r=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(ne(r===o-1,"All SENT items should be at beginning of queue."),r=o,t[o].status=3,t[o].abortReason="set"):(ne(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Ao(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&s.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?pC(e,void 0):t.length=r+1,hi(n.eventQueue_,Au(e),i);for(let o=0;o<s.length;o++)El(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(n){let e="";const t=n.split("/");for(let s=0;s<t.length;s++)if(t[s].length>0){let i=t[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function p$(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const s=t.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):jn(`Invalid query segment '${t}' in query '${n}'`)}return e}const _T=function(n,e){const t=_$(n),s=t.namespace;t.domain==="firebase.com"&&Ui(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&t.domain!=="localhost"&&Ui("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||PV();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new SA(t.host,t.secure,s,i,e,"",s!==t.subdomain),path:new gt(t.pathString)}},_$=function(n){let e="",t="",s="",i="",r="",o=!0,a="https",c=443;if(typeof n=="string"){let h=n.indexOf("//");h>=0&&(a=n.substring(0,h-1),n=n.substring(h+2));let d=n.indexOf("/");d===-1&&(d=n.length);let p=n.indexOf("?");p===-1&&(p=n.length),e=n.substring(0,Math.min(d,p)),d<p&&(i=f$(n.substring(d,p)));const g=p$(n.substring(Math.min(n.length,p)));h=e.indexOf(":"),h>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(h+1),10)):h=e.length;const y=e.slice(0,h);if(y.toLowerCase()==="localhost")t="localhost";else if(y.split(".").length<=2)t=y;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),t=e.substring(w+1),r=s}"ns"in g&&(r=g.ns)}return{host:e,port:c,domain:t,subdomain:s,secure:o,scheme:a,pathString:i,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",m$=function(){let n=0;const e=[];return function(t){const s=t===n;n=t;let i;const r=new Array(8);for(i=7;i>=0;i--)r[i]=mT.charAt(t%64),t=Math.floor(t/64);ne(t===0,"Cannot push at time == 0");let o=r.join("");if(s){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=mT.charAt(e[i]);return ne(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,t,s,i){this.eventType=e,this.eventRegistration=t,this.snapshot=s,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zt(this.snapshot.exportVal())}}class v${constructor(e,t,s){this.eventRegistration=e,this.error=t,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t,s,i){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=i}get key(){return ze(this._path)?null:MA(this._path)}get ref(){return new Gi(this._repo,this._path)}get _queryIdentifier(){const e=eT(this._queryParams),t=Gm(e);return t==="{}"?"default":t}get _queryObject(){return eT(this._queryParams)}isEqual(e){if(e=St(e),!(e instanceof Ig))return!1;const t=this._repo===e._repo,s=Jm(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+d1(this._path)}}class Gi extends Ig{constructor(e,t){super(e,t,new ng,!1)}get parent(){const e=FA(this._path);return e===null?null:new Gi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class iu{constructor(e,t,s){this._node=e,this.ref=t,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new gt(e),s=ru(this.ref,e);return new iu(this._node.getChild(t),s,Mt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,i)=>e(new iu(i,ru(this.ref,s),Mt)))}hasChild(e){const t=new gt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fq(n,e){return n=St(n),n._checkNotDeleted("ref"),e!==void 0?ru(n._root,e):n._root}function ru(n,e){return n=St(n),He(n._path)===null?QF("child","path",e):EC("child","path",e),new Gi(n._repo,Gt(n._path,e))}function pq(n,e){n=St(n),yg("push",n._path),yC("push",e,n._path,!0);const t=bC(n._repo),s=m$(t),i=ru(n,s),r=ru(n,s);let o;return o=Promise.resolve(r),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function _q(n){return yg("remove",n._path),y$(n,null)}function y$(n,e){n=St(n),yg("set",n._path),yC("set",e,n._path,!1);const t=new hf;return r$(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function mq(n){n=St(n);const e=new NC(()=>{}),t=new Pf(e);return i$(n._repo,n,t).then(s=>new iu(s,new Gi(n._repo,n._path),n._queryParams.getIndex()))}class Pf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const s=t._queryParams.getIndex();return new g$("value",this,new iu(e.snapshotNode,new Gi(t._repo,t._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new v$(this,e,t):null}matches(e){return e instanceof Pf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function E$(n,e,t,s,i){const r=new NC(t,void 0),o=new Pf(r);return a$(n._repo,n,o),()=>l$(n._repo,n,o)}function gq(n,e,t,s){return E$(n,"value",e)}wF(Gi);SF(Gi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$="FIREBASE_DATABASE_EMULATOR_HOST",H_={};let w$=!1;function b$(n,e,t,s){n.repoInfo_=new SA(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),s&&(n.authTokenProvider_=s)}function I$(n,e,t,s,i){let r=s||n.options.databaseURL;r===void 0&&(n.options.projectId||Ui("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mn("Using default host for project ",n.options.projectId),r=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=_T(r,i),a=o.repoInfo,c;typeof process<"u"&&ME&&(c=ME[T$]),c?(r=`http://${c}?ns=${a.namespace}`,o=_T(r,i),a=o.repoInfo):o.repoInfo.secure;const h=new UV(n.name,n.options,e);YF("Invalid Firebase Database URL",o),ze(o.path)||Ui("Database URL must point to the root of a Firebase Database (not including a child path).");const d=C$(a,n,h,new $V(n,t));return new S$(d,n)}function A$(n,e){const t=H_[e];(!t||t[n.key]!==n)&&Ui(`Database ${e}(${n.repoInfo_}) has already been deleted.`),c$(n),delete t[n.key]}function C$(n,e,t,s){let i=H_[e.name];i||(i={},H_[e.name]=i);let r=i[n.toURLString()];return r&&Ui("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new t$(n,w$,t,s),i[n.toURLString()]=r,r}class S${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(n$(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gi(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(A$(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ui("Cannot call "+e+" on a deleted database.")}}function R$(n=Mm(),e){const t=pf(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const s=oI("database");s&&P$(t,...s)}return t}function P$(n,e,t,s={}){n=St(n),n._checkNotDeleted("useEmulator");const i=`${e}:${t}`,r=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&Pr(s,r.repoInfo_.emulatorOptions))return;Ui("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)s.mockUserToken&&Ui('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Hh(Hh.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:cI(s.mockUserToken,n.app.options.projectId);o=new Hh(a)}b$(r,i,s,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(n){bV(zo),Do(new Nr("database",(e,{instanceIdentifier:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return I$(s,i,r,t)},"PUBLIC").setMultipleInstances(!0)),si(VE,FE,n),si(VE,FE,"esm2017")}Li.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Li.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};N$();var gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,OC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,b){function A(){}A.prototype=b.prototype,R.D=b.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(P,O,x){for(var C=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)C[vt-2]=arguments[vt];return b.prototype[O].apply(P,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,b,A){A||(A=0);var P=Array(16);if(typeof b=="string")for(var O=0;16>O;++O)P[O]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(O=0;16>O;++O)P[O]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=R.g[0],A=R.g[1],O=R.g[2];var x=R.g[3],C=b+(x^A&(O^x))+P[0]+3614090360&4294967295;b=A+(C<<7&4294967295|C>>>25),C=x+(O^b&(A^O))+P[1]+3905402710&4294967295,x=b+(C<<12&4294967295|C>>>20),C=O+(A^x&(b^A))+P[2]+606105819&4294967295,O=x+(C<<17&4294967295|C>>>15),C=A+(b^O&(x^b))+P[3]+3250441966&4294967295,A=O+(C<<22&4294967295|C>>>10),C=b+(x^A&(O^x))+P[4]+4118548399&4294967295,b=A+(C<<7&4294967295|C>>>25),C=x+(O^b&(A^O))+P[5]+1200080426&4294967295,x=b+(C<<12&4294967295|C>>>20),C=O+(A^x&(b^A))+P[6]+2821735955&4294967295,O=x+(C<<17&4294967295|C>>>15),C=A+(b^O&(x^b))+P[7]+4249261313&4294967295,A=O+(C<<22&4294967295|C>>>10),C=b+(x^A&(O^x))+P[8]+1770035416&4294967295,b=A+(C<<7&4294967295|C>>>25),C=x+(O^b&(A^O))+P[9]+2336552879&4294967295,x=b+(C<<12&4294967295|C>>>20),C=O+(A^x&(b^A))+P[10]+4294925233&4294967295,O=x+(C<<17&4294967295|C>>>15),C=A+(b^O&(x^b))+P[11]+2304563134&4294967295,A=O+(C<<22&4294967295|C>>>10),C=b+(x^A&(O^x))+P[12]+1804603682&4294967295,b=A+(C<<7&4294967295|C>>>25),C=x+(O^b&(A^O))+P[13]+4254626195&4294967295,x=b+(C<<12&4294967295|C>>>20),C=O+(A^x&(b^A))+P[14]+2792965006&4294967295,O=x+(C<<17&4294967295|C>>>15),C=A+(b^O&(x^b))+P[15]+1236535329&4294967295,A=O+(C<<22&4294967295|C>>>10),C=b+(O^x&(A^O))+P[1]+4129170786&4294967295,b=A+(C<<5&4294967295|C>>>27),C=x+(A^O&(b^A))+P[6]+3225465664&4294967295,x=b+(C<<9&4294967295|C>>>23),C=O+(b^A&(x^b))+P[11]+643717713&4294967295,O=x+(C<<14&4294967295|C>>>18),C=A+(x^b&(O^x))+P[0]+3921069994&4294967295,A=O+(C<<20&4294967295|C>>>12),C=b+(O^x&(A^O))+P[5]+3593408605&4294967295,b=A+(C<<5&4294967295|C>>>27),C=x+(A^O&(b^A))+P[10]+38016083&4294967295,x=b+(C<<9&4294967295|C>>>23),C=O+(b^A&(x^b))+P[15]+3634488961&4294967295,O=x+(C<<14&4294967295|C>>>18),C=A+(x^b&(O^x))+P[4]+3889429448&4294967295,A=O+(C<<20&4294967295|C>>>12),C=b+(O^x&(A^O))+P[9]+568446438&4294967295,b=A+(C<<5&4294967295|C>>>27),C=x+(A^O&(b^A))+P[14]+3275163606&4294967295,x=b+(C<<9&4294967295|C>>>23),C=O+(b^A&(x^b))+P[3]+4107603335&4294967295,O=x+(C<<14&4294967295|C>>>18),C=A+(x^b&(O^x))+P[8]+1163531501&4294967295,A=O+(C<<20&4294967295|C>>>12),C=b+(O^x&(A^O))+P[13]+2850285829&4294967295,b=A+(C<<5&4294967295|C>>>27),C=x+(A^O&(b^A))+P[2]+4243563512&4294967295,x=b+(C<<9&4294967295|C>>>23),C=O+(b^A&(x^b))+P[7]+1735328473&4294967295,O=x+(C<<14&4294967295|C>>>18),C=A+(x^b&(O^x))+P[12]+2368359562&4294967295,A=O+(C<<20&4294967295|C>>>12),C=b+(A^O^x)+P[5]+4294588738&4294967295,b=A+(C<<4&4294967295|C>>>28),C=x+(b^A^O)+P[8]+2272392833&4294967295,x=b+(C<<11&4294967295|C>>>21),C=O+(x^b^A)+P[11]+1839030562&4294967295,O=x+(C<<16&4294967295|C>>>16),C=A+(O^x^b)+P[14]+4259657740&4294967295,A=O+(C<<23&4294967295|C>>>9),C=b+(A^O^x)+P[1]+2763975236&4294967295,b=A+(C<<4&4294967295|C>>>28),C=x+(b^A^O)+P[4]+1272893353&4294967295,x=b+(C<<11&4294967295|C>>>21),C=O+(x^b^A)+P[7]+4139469664&4294967295,O=x+(C<<16&4294967295|C>>>16),C=A+(O^x^b)+P[10]+3200236656&4294967295,A=O+(C<<23&4294967295|C>>>9),C=b+(A^O^x)+P[13]+681279174&4294967295,b=A+(C<<4&4294967295|C>>>28),C=x+(b^A^O)+P[0]+3936430074&4294967295,x=b+(C<<11&4294967295|C>>>21),C=O+(x^b^A)+P[3]+3572445317&4294967295,O=x+(C<<16&4294967295|C>>>16),C=A+(O^x^b)+P[6]+76029189&4294967295,A=O+(C<<23&4294967295|C>>>9),C=b+(A^O^x)+P[9]+3654602809&4294967295,b=A+(C<<4&4294967295|C>>>28),C=x+(b^A^O)+P[12]+3873151461&4294967295,x=b+(C<<11&4294967295|C>>>21),C=O+(x^b^A)+P[15]+530742520&4294967295,O=x+(C<<16&4294967295|C>>>16),C=A+(O^x^b)+P[2]+3299628645&4294967295,A=O+(C<<23&4294967295|C>>>9),C=b+(O^(A|~x))+P[0]+4096336452&4294967295,b=A+(C<<6&4294967295|C>>>26),C=x+(A^(b|~O))+P[7]+1126891415&4294967295,x=b+(C<<10&4294967295|C>>>22),C=O+(b^(x|~A))+P[14]+2878612391&4294967295,O=x+(C<<15&4294967295|C>>>17),C=A+(x^(O|~b))+P[5]+4237533241&4294967295,A=O+(C<<21&4294967295|C>>>11),C=b+(O^(A|~x))+P[12]+1700485571&4294967295,b=A+(C<<6&4294967295|C>>>26),C=x+(A^(b|~O))+P[3]+2399980690&4294967295,x=b+(C<<10&4294967295|C>>>22),C=O+(b^(x|~A))+P[10]+4293915773&4294967295,O=x+(C<<15&4294967295|C>>>17),C=A+(x^(O|~b))+P[1]+2240044497&4294967295,A=O+(C<<21&4294967295|C>>>11),C=b+(O^(A|~x))+P[8]+1873313359&4294967295,b=A+(C<<6&4294967295|C>>>26),C=x+(A^(b|~O))+P[15]+4264355552&4294967295,x=b+(C<<10&4294967295|C>>>22),C=O+(b^(x|~A))+P[6]+2734768916&4294967295,O=x+(C<<15&4294967295|C>>>17),C=A+(x^(O|~b))+P[13]+1309151649&4294967295,A=O+(C<<21&4294967295|C>>>11),C=b+(O^(A|~x))+P[4]+4149444226&4294967295,b=A+(C<<6&4294967295|C>>>26),C=x+(A^(b|~O))+P[11]+3174756917&4294967295,x=b+(C<<10&4294967295|C>>>22),C=O+(b^(x|~A))+P[2]+718787259&4294967295,O=x+(C<<15&4294967295|C>>>17),C=A+(x^(O|~b))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+b&4294967295,R.g[1]=R.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+x&4294967295}s.prototype.u=function(R,b){b===void 0&&(b=R.length);for(var A=b-this.blockSize,P=this.B,O=this.h,x=0;x<b;){if(O==0)for(;x<=A;)i(this,R,x),x+=this.blockSize;if(typeof R=="string"){for(;x<b;)if(P[O++]=R.charCodeAt(x++),O==this.blockSize){i(this,P),O=0;break}}else for(;x<b;)if(P[O++]=R[x++],O==this.blockSize){i(this,P),O=0;break}}this.h=O,this.o+=b},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var b=1;b<R.length-8;++b)R[b]=0;var A=8*this.o;for(b=R.length-8;b<R.length;++b)R[b]=A&255,A/=256;for(this.u(R),R=Array(16),b=A=0;4>b;++b)for(var P=0;32>P;P+=8)R[A++]=this.g[b]>>>P&255;return R};function r(R,b){var A=a;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=b(R)}function o(R,b){this.h=b;for(var A=[],P=!0,O=R.length-1;0<=O;O--){var x=R[O]|0;P&&x==b||(A[O]=x,P=!1)}this.g=A}var a={};function c(R){return-128<=R&&128>R?r(R,function(b){return new o([b|0],0>b?-1:0)}):new o([R|0],0>R?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return p;if(0>R)return k(h(-R));for(var b=[],A=1,P=0;R>=A;P++)b[P]=R/A|0,A*=4294967296;return new o(b,0)}function d(R,b){if(R.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R.charAt(0)=="-")return k(d(R.substring(1),b));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(b,8)),P=p,O=0;O<R.length;O+=8){var x=Math.min(8,R.length-O),C=parseInt(R.substring(O,O+x),b);8>x?(x=h(Math.pow(b,x)),P=P.j(x).add(h(C))):(P=P.j(A),P=P.add(h(C)))}return P}var p=c(0),g=c(1),y=c(16777216);n=o.prototype,n.m=function(){if(N(this))return-k(this).m();for(var R=0,b=1,A=0;A<this.g.length;A++){var P=this.i(A);R+=(0<=P?P:4294967296+P)*b,b*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(w(this))return"0";if(N(this))return"-"+k(this).toString(R);for(var b=h(Math.pow(R,6)),A=this,P="";;){var O=H(A,b).g;A=F(A,O.j(b));var x=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=O,w(A))return x+P;for(;6>x.length;)x="0"+x;P=x+P}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function w(R){if(R.h!=0)return!1;for(var b=0;b<R.g.length;b++)if(R.g[b]!=0)return!1;return!0}function N(R){return R.h==-1}n.l=function(R){return R=F(this,R),N(R)?-1:w(R)?0:1};function k(R){for(var b=R.g.length,A=[],P=0;P<b;P++)A[P]=~R.g[P];return new o(A,~R.h).add(g)}n.abs=function(){return N(this)?k(this):this},n.add=function(R){for(var b=Math.max(this.g.length,R.g.length),A=[],P=0,O=0;O<=b;O++){var x=P+(this.i(O)&65535)+(R.i(O)&65535),C=(x>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);P=C>>>16,x&=65535,C&=65535,A[O]=C<<16|x}return new o(A,A[A.length-1]&-2147483648?-1:0)};function F(R,b){return R.add(k(b))}n.j=function(R){if(w(this)||w(R))return p;if(N(this))return N(R)?k(this).j(k(R)):k(k(this).j(R));if(N(R))return k(this.j(k(R)));if(0>this.l(y)&&0>R.l(y))return h(this.m()*R.m());for(var b=this.g.length+R.g.length,A=[],P=0;P<2*b;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<R.g.length;O++){var x=this.i(P)>>>16,C=this.i(P)&65535,vt=R.i(O)>>>16,Nt=R.i(O)&65535;A[2*P+2*O]+=C*Nt,$(A,2*P+2*O),A[2*P+2*O+1]+=x*Nt,$(A,2*P+2*O+1),A[2*P+2*O+1]+=C*vt,$(A,2*P+2*O+1),A[2*P+2*O+2]+=x*vt,$(A,2*P+2*O+2)}for(P=0;P<b;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=b;P<2*b;P++)A[P]=0;return new o(A,0)};function $(R,b){for(;(R[b]&65535)!=R[b];)R[b+1]+=R[b]>>>16,R[b]&=65535,b++}function K(R,b){this.g=R,this.h=b}function H(R,b){if(w(b))throw Error("division by zero");if(w(R))return new K(p,p);if(N(R))return b=H(k(R),b),new K(k(b.g),k(b.h));if(N(b))return b=H(R,k(b)),new K(k(b.g),b.h);if(30<R.g.length){if(N(R)||N(b))throw Error("slowDivide_ only works with positive integers.");for(var A=g,P=b;0>=P.l(R);)A=ce(A),P=ce(P);var O=ae(A,1),x=ae(P,1);for(P=ae(P,2),A=ae(A,2);!w(P);){var C=x.add(P);0>=C.l(R)&&(O=O.add(A),x=C),P=ae(P,1),A=ae(A,1)}return b=F(R,O.j(b)),new K(O,b)}for(O=p;0<=R.l(b);){for(A=Math.max(1,Math.floor(R.m()/b.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),x=h(A),C=x.j(b);N(C)||0<C.l(R);)A-=P,x=h(A),C=x.j(b);w(x)&&(x=g),O=O.add(x),R=F(R,C)}return new K(O,R)}n.A=function(R){return H(this,R).h},n.and=function(R){for(var b=Math.max(this.g.length,R.g.length),A=[],P=0;P<b;P++)A[P]=this.i(P)&R.i(P);return new o(A,this.h&R.h)},n.or=function(R){for(var b=Math.max(this.g.length,R.g.length),A=[],P=0;P<b;P++)A[P]=this.i(P)|R.i(P);return new o(A,this.h|R.h)},n.xor=function(R){for(var b=Math.max(this.g.length,R.g.length),A=[],P=0;P<b;P++)A[P]=this.i(P)^R.i(P);return new o(A,this.h^R.h)};function ce(R){for(var b=R.g.length+1,A=[],P=0;P<b;P++)A[P]=R.i(P)<<1|R.i(P-1)>>>31;return new o(A,R.h)}function ae(R,b){var A=b>>5;b%=32;for(var P=R.g.length-A,O=[],x=0;x<P;x++)O[x]=0<b?R.i(x+A)>>>b|R.i(x+A+1)<<32-b:R.i(x+A);return new o(O,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,OC=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Cr=o}).apply(typeof gT<"u"?gT:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kC,_c,DC,qh,W_,xC,LC,MC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=t(this);function i(l,f){if(f)e:{var m=s;l=l.split(".");for(var T=0;T<l.length-1;T++){var V=l[T];if(!(V in m))break e;m=m[V]}l=l[l.length-1],T=m[l],f=f(T),f!=T&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function r(l,f){l instanceof String&&(l+="");var m=0,T=!1,V={next:function(){if(!T&&m<l.length){var U=m++;return{value:f(U,l[U]),done:!1}}return T=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(l){return l||function(){return r(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function h(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,m){return l.call.apply(l.bind,arguments)}function p(l,f,m){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,T),l.apply(f,V)}}return function(){return l.apply(f,arguments)}}function g(l,f,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function y(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function w(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(T,V,U){for(var re=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)re[ct-2]=arguments[ct];return f.prototype[V].apply(T,re)}}function N(l){const f=l.length;if(0<f){const m=Array(f);for(let T=0;T<f;T++)m[T]=l[T];return m}return[]}function k(l,f){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(c(T)){const V=l.length||0,U=T.length||0;l.length=V+U;for(let re=0;re<U;re++)l[V+re]=T[re]}else l.push(T)}}class F{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function $(l){return/^[\s\xa0]*$/.test(l)}function K(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function H(l){return H[" "](l),l}H[" "]=function(){};var ce=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ae(l,f,m){for(const T in l)f.call(m,l[T],T,l)}function R(l,f){for(const m in l)f.call(void 0,l[m],m,l)}function b(l){const f={};for(const m in l)f[m]=l[m];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,f){let m,T;for(let V=1;V<arguments.length;V++){T=arguments[V];for(m in T)l[m]=T[m];for(let U=0;U<A.length;U++)m=A[U],Object.prototype.hasOwnProperty.call(T,m)&&(l[m]=T[m])}}function O(l){var f=1;l=l.split(":");const m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function C(){var l=Rt;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class vt{constructor(){this.h=this.g=null}add(f,m){const T=Nt.get();T.set(f,m),this.h?this.h.next=T:this.g=T,this.h=T}}var Nt=new F(()=>new qe,l=>l.reset());class qe{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Ve=!1,Rt=new vt,G=()=>{const l=a.Promise.resolve(void 0);Ae=()=>{l.then($t)}};var $t=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(m){x(m)}var f=Nt;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Ve=!1};function Ze(){this.s=this.s,this.C=this.C}Ze.prototype.s=!1,Ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var It=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l}();function At(l,f){if(et.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(ce){e:{try{H(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:tt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&At.aa.h.call(this)}}w(At,et);var tt={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),B=0;function ie(l,f,m,T,V){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!T,this.ha=V,this.key=++B,this.da=this.fa=!1}function fe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function je(l){this.src=l,this.g={},this.h=0}je.prototype.add=function(l,f,m,T,V){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var re=S(l,f,T,V);return-1<re?(f=l[re],m||(f.fa=!1)):(f=new ie(f,this.src,U,!!T,V),f.fa=m,l.push(f)),f};function I(l,f){var m=f.type;if(m in l.g){var T=l.g[m],V=Array.prototype.indexOf.call(T,f,void 0),U;(U=0<=V)&&Array.prototype.splice.call(T,V,1),U&&(fe(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function S(l,f,m,T){for(var V=0;V<l.length;++V){var U=l[V];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==T)return V}return-1}var M="closure_lm_"+(1e6*Math.random()|0),q={};function z(l,f,m,T,V){if(Array.isArray(f)){for(var U=0;U<f.length;U++)z(l,f[U],m,T,V);return null}return m=ve(m),l&&l[W]?l.K(f,m,h(T)?!!T.capture:!1,V):Q(l,f,m,!1,T,V)}function Q(l,f,m,T,V,U){if(!f)throw Error("Invalid event type");var re=h(V)?!!V.capture:!!V,ct=ue(l);if(ct||(l[M]=ct=new je(l)),m=ct.add(f,m,T,re,U),m.proxy)return m;if(T=le(),m.proxy=T,T.src=l,T.listener=m,l.addEventListener)It||(V=re),V===void 0&&(V=!1),l.addEventListener(f.toString(),T,V);else if(l.attachEvent)l.attachEvent(J(f.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function le(){function l(m){return f.call(l.src,l.listener,m)}const f=Ee;return l}function se(l,f,m,T,V){if(Array.isArray(f))for(var U=0;U<f.length;U++)se(l,f[U],m,T,V);else T=h(T)?!!T.capture:!!T,m=ve(m),l&&l[W]?(l=l.i,f=String(f).toString(),f in l.g&&(U=l.g[f],m=S(U,m,T,V),-1<m&&(fe(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete l.g[f],l.h--)))):l&&(l=ue(l))&&(f=l.g[f.toString()],l=-1,f&&(l=S(f,m,T,V)),(m=-1<l?f[l]:null)&&te(m))}function te(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[W])I(f.i,l);else{var m=l.type,T=l.proxy;f.removeEventListener?f.removeEventListener(m,T,l.capture):f.detachEvent?f.detachEvent(J(m),T):f.addListener&&f.removeListener&&f.removeListener(T),(m=ue(f))?(I(m,l),m.h==0&&(m.src=null,f[M]=null)):fe(l)}}}function J(l){return l in q?q[l]:q[l]="on"+l}function Ee(l,f){if(l.da)l=!0;else{f=new At(f,this);var m=l.listener,T=l.ha||l.src;l.fa&&te(l),l=m.call(T,f)}return l}function ue(l){return l=l[M],l instanceof je?l:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(l){return typeof l=="function"?l:(l[_e]||(l[_e]=function(f){return l.handleEvent(f)}),l[_e])}function ye(){Ze.call(this),this.i=new je(this),this.M=this,this.F=null}w(ye,Ze),ye.prototype[W]=!0,ye.prototype.removeEventListener=function(l,f,m,T){se(this,l,f,m,T)};function Ie(l,f){var m,T=l.F;if(T)for(m=[];T;T=T.F)m.push(T);if(l=l.M,T=f.type||f,typeof f=="string")f=new et(f,l);else if(f instanceof et)f.target=f.target||l;else{var V=f;f=new et(T,l),P(f,V)}if(V=!0,m)for(var U=m.length-1;0<=U;U--){var re=f.g=m[U];V=De(re,T,!0,f)&&V}if(re=f.g=l,V=De(re,T,!0,f)&&V,V=De(re,T,!1,f)&&V,m)for(U=0;U<m.length;U++)re=f.g=m[U],V=De(re,T,!1,f)&&V}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],T=0;T<m.length;T++)fe(m[T]);delete l.g[f],l.h--}}this.F=null},ye.prototype.K=function(l,f,m,T){return this.i.add(String(l),f,!1,m,T)},ye.prototype.L=function(l,f,m,T){return this.i.add(String(l),f,!0,m,T)};function De(l,f,m,T){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,U=0;U<f.length;++U){var re=f[U];if(re&&!re.da&&re.capture==m){var ct=re.listener,qt=re.ha||re.src;re.fa&&I(l.i,re),V=ct.call(qt,T)!==!1&&V}}return V&&!T.defaultPrevented}function Ot(l,f,m){if(typeof l=="function")m&&(l=g(l,m));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Dt(l){l.g=Ot(()=>{l.g=null,l.i&&(l.i=!1,Dt(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class On extends Ze{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ut(l){Ze.call(this),this.h=l,this.g={}}w(Ut,Ze);var js=[];function Xr(l){ae(l.g,function(f,m){this.g.hasOwnProperty(m)&&te(f)},l),l.g={}}Ut.prototype.N=function(){Ut.aa.N.call(this),Xr(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=a.JSON.stringify,kn=a.JSON.parse,ta=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Nl(){}Nl.prototype.h=null;function Ol(l){return l.h||(l.h=l.i())}function Jr(){}var Yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function na(){et.call(this,"d")}w(na,et);function kl(){et.call(this,"c")}w(kl,et);var _i={},Fu=null;function sa(){return Fu=Fu||new ye}_i.La="serverreachability";function mi(l){et.call(this,_i.La,l)}w(mi,et);function gs(l){const f=sa();Ie(f,new mi(f))}_i.STAT_EVENT="statevent";function $u(l,f){et.call(this,_i.STAT_EVENT,l),this.stat=f}w($u,et);function sn(l){const f=sa();Ie(f,new $u(f,l))}_i.Ma="timingevent";function Uu(l,f){et.call(this,_i.Ma,l),this.size=f}w(Uu,et);function Zr(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function eo(){this.g=!0}eo.prototype.xa=function(){this.g=!1};function Dl(l,f,m,T,V,U){l.info(function(){if(l.g)if(U)for(var re="",ct=U.split("&"),qt=0;qt<ct.length;qt++){var Xe=ct[qt].split("=");if(1<Xe.length){var dt=Xe[0];Xe=Xe[1];var Kt=dt.split("_");re=2<=Kt.length&&Kt[1]=="type"?re+(dt+"="+Xe+"&"):re+(dt+"=redacted&")}}else re=null;else re=U;return"XMLHTTP REQ ("+T+") [attempt "+V+"]: "+f+`
`+m+`
`+re})}function Xi(l,f,m,T,V,U,re){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+V+"]: "+f+`
`+m+`
`+U+" "+re})}function vs(l,f,m,T){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+xl(l,m)+(T?" "+T:"")})}function Zf(l,f){l.info(function(){return"TIMEOUT: "+f})}eo.prototype.info=function(){};function xl(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var T=m[l];if(!(2>T.length)){var V=T[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var re=1;re<V.length;re++)V[re]=""}}}}return Wt(m)}catch{return f}}var ia={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ju={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bs;function jt(){}w(jt,Nl),jt.prototype.g=function(){return new XMLHttpRequest},jt.prototype.i=function(){return{}},Bs=new jt;function xt(l,f,m,T){this.j=l,this.i=f,this.l=m,this.R=T||1,this.U=new Ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ln}function ln(){this.i=null,this.g="",this.h=!1}var Jt={},Ji={};function Hs(l,f,m){l.L=1,l.v=er(Hn(f)),l.m=m,l.P=!0,Ws(l,null)}function Ws(l,f){l.F=Date.now(),Zi(l),l.A=Hn(l.v);var m=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Bl(m.i,"t",T),l.C=0,m=l.j.J,l.h=new ln,l.g=nh(l.j,m?f:null,!l.m),0<l.O&&(l.M=new On(g(l.Y,l,l.g),l.O)),f=l.U,m=l.g,T=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(js[0]=V.toString()),V=js);for(var U=0;U<V.length;U++){var re=z(m,V[U],T||f.handleEvent,!1,f.h||f);if(!re)break;f.g[re.key]=re}f=l.H?b(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),gs(),Dl(l.i,l.u,l.A,l.l,l.R,l.m)}xt.prototype.ca=function(l){l=l.target;const f=this.M;f&&rs(l)==3?f.j():this.Y(l)},xt.prototype.Y=function(l){try{if(l==this.g)e:{const Kt=rs(this.g);var f=this.g.Ba();const wi=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||Kl(this.g)))){this.J||Kt!=4||f==7||(f==8||0>=wi?gs(3):gs(2)),ra(this);var m=this.g.Z();this.X=m;t:if(gi(this)){var T=Kl(this.g);l="";var V=T.length,U=rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ys(this),yi(this);var re="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,l+=this.h.i.decode(T[f],{stream:!(U&&f==V-1)});T.length=0,this.h.g+=l,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=m==200,Xi(this.i,this.u,this.A,this.l,this.R,Kt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,qt=this.g;if((ct=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(ct)){var Xe=ct;break t}}Xe=null}if(m=Xe)vs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oa(this,m);else{this.o=!1,this.s=3,sn(12),ys(this),yi(this);break e}}if(this.P){m=!0;let Mn;for(;!this.J&&this.C<re.length;)if(Mn=Bu(this,re),Mn==Ji){Kt==4&&(this.s=4,sn(14),m=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Jt){this.s=4,sn(15),vs(this.i,this.l,re,"[Invalid Chunk]"),m=!1;break}else vs(this.i,this.l,Mn,null),oa(this,Mn);if(gi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||re.length!=0||this.h.h||(this.s=1,sn(16),m=!1),this.o=this.o&&m,!m)vs(this.i,this.l,re,"[Invalid Chunked Response]"),ys(this),yi(this);else if(0<re.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),ma(dt),dt.M=!0,sn(11))}}else vs(this.i,this.l,re,null),oa(this,re);Kt==4&&ys(this),this.o&&!this.J&&(Kt==4?ga(this.j,this):(this.o=!1,Zi(this)))}else Gu(this.g),m==400&&0<re.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),ys(this),yi(this)}}}catch{}finally{}};function gi(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Bu(l,f){var m=l.C,T=f.indexOf(`
`,m);return T==-1?Ji:(m=Number(f.substring(m,T)),isNaN(m)?Jt:(T+=1,T+m>f.length?Ji:(f=f.slice(T,T+m),l.C=T+m,f)))}xt.prototype.cancel=function(){this.J=!0,ys(this)};function Zi(l){l.S=Date.now()+l.I,vi(l,l.I)}function vi(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Zr(g(l.ba,l),f)}function ra(l){l.B&&(a.clearTimeout(l.B),l.B=null)}xt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Zf(this.i,this.A),this.L!=2&&(gs(),sn(17)),ys(this),this.s=2,yi(this)):vi(this,this.S-l)};function yi(l){l.j.G==0||l.J||ga(l.j,l)}function ys(l){ra(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Xr(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function oa(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||aa(m.h,l))){if(!l.K&&aa(m.h,l)&&m.G==3){try{var T=m.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var V=T;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)os(m),ao(m);else break e;lo(m),sn(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=Zr(g(m.Za,m),6e3));if(1>=Vl(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Gs(m,11)}else if((l.K||m.g==l)&&os(m),!$(f))for(V=m.Da.g.parse(f),f=0;f<V.length;f++){let Xe=V[f];if(m.T=Xe[0],Xe=Xe[1],m.G==2)if(Xe[0]=="c"){m.K=Xe[1],m.ia=Xe[2];const dt=Xe[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const Kt=Xe[4];Kt!=null&&(m.Aa=Kt,m.j.info("SVER="+m.Aa));const wi=Xe[5];wi!=null&&typeof wi=="number"&&0<wi&&(T=1.5*wi,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const Mn=l.g;if(Mn){const va=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var U=T.h;U.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(la(U,U.h),U.h=null))}if(T.D){const Yl=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yl&&(T.ya=Yl,nt(T.I,T.D,Yl))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var re=l;if(T.qa=th(T,T.J?T.ia:null,T.W),re.K){Fl(T.h,re);var ct=re,qt=T.L;qt&&(ct.I=qt),ct.B&&(ra(ct),Zi(ct)),T.g=re}else Ju(T);0<m.i.length&&_a(m)}else Xe[0]!="stop"&&Xe[0]!="close"||Gs(m,7);else m.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Gs(m,7):oo(m):Xe[0]!="noop"&&m.l&&m.l.ta(Xe),m.v=0)}}gs(4)}catch{}}var Hu=class{constructor(l,f){this.g=l,this.map=f}};function Ll(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ml(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Vl(l){return l.h?1:l.g?l.g.size:0}function aa(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function la(l,f){l.g?l.g.add(f):l.h=f}function Fl(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Ll.prototype.cancel=function(){if(this.i=$l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function $l(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const m of l.g.values())f=f.concat(m.D);return f}return N(l.i)}function Wu(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],m=l.length,T=0;T<m;T++)f.push(l[T]);return f}f=[],m=0;for(T in l)f[m++]=l[T];return f}function ns(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(const T in l)f[m++]=T;return f}}}function cn(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=ns(l),T=Wu(l),V=T.length,U=0;U<V;U++)f.call(void 0,T[U],m&&m[U],l)}var qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dn(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var T=l[m].indexOf("="),V=null;if(0<=T){var U=l[m].substring(0,T);V=l[m].substring(T+1)}else U=l[m];f(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Es(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Es){this.h=l.h,wn(this,l.j),this.o=l.o,this.g=l.g,ss(this,l.s),this.l=l.l;var f=l.i,m=new nr;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),to(this,m),this.m=l.m}else l&&(f=String(l).match(qs))?(this.h=!1,wn(this,f[1]||"",!0),this.o=tr(f[2]||""),this.g=tr(f[3]||"",!0),ss(this,f[4]),this.l=tr(f[5]||"",!0),to(this,f[6]||"",!0),this.m=tr(f[7]||"")):(this.h=!1,this.i=new nr(null,this.h))}Es.prototype.toString=function(){var l=[],f=this.j;f&&l.push(is(f,jl,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(is(f,jl,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(is(m,m.charAt(0)=="/"?ep:Ts,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",is(m,ca)),l.join("")};function Hn(l){return new Es(l)}function wn(l,f,m){l.j=m?tr(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function ss(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function to(l,f,m){f instanceof nr?(l.i=f,qu(l.i,l.h)):(m||(f=is(f,Ks)),l.i=new nr(f,l.h))}function nt(l,f,m){l.i.set(f,m)}function er(l){return nt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function tr(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function is(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,Ul),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ul(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var jl=/[#\/\?@]/g,Ts=/[#\?:]/g,ep=/[#\?]/g,Ks=/[#\?@]/g,ca=/#/g;function nr(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function xn(l){l.g||(l.g=new Map,l.h=0,l.i&&Dn(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=nr.prototype,n.add=function(l,f){xn(this),this.i=null,l=Ei(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function ua(l,f){xn(l),f=Ei(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function sr(l,f){return xn(l),f=Ei(l,f),l.g.has(f)}n.forEach=function(l,f){xn(this),this.g.forEach(function(m,T){m.forEach(function(V){l.call(f,V,T,this)},this)},this)},n.na=function(){xn(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let T=0;T<f.length;T++){const V=l[T];for(let U=0;U<V.length;U++)m.push(f[T])}return m},n.V=function(l){xn(this);let f=[];if(typeof l=="string")sr(this,l)&&(f=f.concat(this.g.get(Ei(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},n.set=function(l,f){return xn(this),this.i=null,l=Ei(this,l),sr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Bl(l,f,m){ua(l,f),0<m.length&&(l.i=null,l.g.set(Ei(l,f),N(m)),l.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var T=f[m];const U=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var V=U;re[T]!==""&&(V+="="+encodeURIComponent(String(re[T]))),l.push(V)}}return this.i=l.join("&")};function Ei(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function qu(l,f){f&&!l.j&&(xn(l),l.i=null,l.g.forEach(function(m,T){var V=T.toLowerCase();T!=V&&(ua(this,T),Bl(this,V,m))},l)),l.j=f}function ir(l,f){const m=new eo;if(a.Image){const T=new Image;T.onload=y(ws,m,"TestLoadImage: loaded",!0,f,T),T.onerror=y(ws,m,"TestLoadImage: error",!1,f,T),T.onabort=y(ws,m,"TestLoadImage: abort",!1,f,T),T.ontimeout=y(ws,m,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else f(!1)}function tp(l,f){const m=new eo,T=new AbortController,V=setTimeout(()=>{T.abort(),ws(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:T.signal}).then(U=>{clearTimeout(V),U.ok?ws(m,"TestPingServer: ok",!0,f):ws(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),ws(m,"TestPingServer: error",!1,f)})}function ws(l,f,m,T,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),T(m)}catch{}}function Hl(){this.g=new ta}function ha(l,f,m){const T=m||"";try{cn(l,function(V,U){let re=V;h(V)&&(re=Wt(V)),f.push(T+U+"="+encodeURIComponent(re))})}catch(V){throw f.push(T+"type="+encodeURIComponent("_badmap")),V}}function rr(l){this.l=l.Ub||null,this.j=l.eb||!1}w(rr,Nl),rr.prototype.g=function(){return new da(this.l,this.j)},rr.prototype.i=function(l){return function(){return l}}({});function da(l,f){ye.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(da,ye),n=da.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,or(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,so(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;no(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function no(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?so(this):or(this),this.readyState==3&&no(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,so(this))},n.Qa=function(l){this.g&&(this.response=l,so(this))},n.ga=function(){this.g&&so(this)};function so(l){l.readyState=4,l.l=null,l.j=null,l.v=null,or(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function or(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function fa(l){let f="";return ae(l,function(m,T){f+=T,f+=":",f+=m,f+=`\r
`}),f}function io(l,f,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=fa(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):nt(l,f,m))}function yt(l){ye.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(yt,ye);var Ku=/^https?$/i,ro=["POST","PUT"];n=yt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bs.g(),this.v=this.o?Ol(this.o):Ol(Bs),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(U){pa(this,U);return}if(l=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var V in T)m.set(V,T[V]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const U of T.keys())m.set(U,T.get(U));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ro,f,void 0))||T||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,re]of m)this.g.setRequestHeader(U,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zu(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){pa(this,U)}};function pa(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Wl(l),bs(l)}function Wl(l){l.A||(l.A=!0,Ie(l,"complete"),Ie(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ie(this,"complete"),Ie(this,"abort"),bs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bs(this,!0)),yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ql(this):this.bb())},n.bb=function(){ql(this)};function ql(l){if(l.h&&typeof o<"u"&&(!l.v[1]||rs(l)!=4||l.Z()!=2)){if(l.u&&rs(l)==4)Ot(l.Ea,0,l);else if(Ie(l,"readystatechange"),rs(l)==4){l.h=!1;try{const re=l.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var T;if(T=re===0){var V=String(l.D).match(qs)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),T=!Ku.test(V?V.toLowerCase():"")}m=T}if(m)Ie(l,"complete"),Ie(l,"success");else{l.m=6;try{var U=2<rs(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Wl(l)}}finally{bs(l)}}}}function bs(l,f){if(l.g){zu(l);const m=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Ie(l,"ready");try{m.onreadystatechange=T}catch{}}}function zu(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function rs(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),kn(f)}};function Kl(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Gu(l){const f={};l=(l.g&&2<=rs(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if($(l[T]))continue;var m=O(l[T]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=f[V]||[];f[V]=U,U.push(m)}R(f,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ar(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function zl(l){this.Aa=0,this.i=[],this.j=new eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ar("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ar("baseRetryDelayMs",5e3,l),this.cb=ar("retryDelaySeedMs",1e4,l),this.Wa=ar("forwardChannelMaxRetries",2,l),this.wa=ar("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ll(l&&l.concurrentRequestLimit),this.Da=new Hl,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zl.prototype,n.la=8,n.G=1,n.connect=function(l,f,m,T){sn(0),this.W=l,this.H=f||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=th(this,null,this.W),_a(this)};function oo(l){if(Qu(l),l.G==3){var f=l.U++,m=Hn(l.I);if(nt(m,"SID",l.K),nt(m,"RID",f),nt(m,"TYPE","terminate"),zs(l,m),f=new xt(l,l.j,f),f.L=2,f.v=er(Hn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=nh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Zi(f)}eh(l)}function ao(l){l.g&&(ma(l),l.g.cancel(),l.g=null)}function Qu(l){ao(l),l.u&&(a.clearTimeout(l.u),l.u=null),os(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function _a(l){if(!Ml(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ae||G(),Ve||(Ae(),Ve=!0),Rt.add(f,l),l.B=0}}function Yu(l,f){return Vl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Zr(g(l.Ga,l,f),Zu(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new xt(this,this.j,l);let U=this.o;if(this.S&&(U?(U=b(U),P(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Xu(this,V,f),m=Hn(this.I),nt(m,"RID",l),nt(m,"CVER",22),this.D&&nt(m,"X-HTTP-Session-Id",this.D),zs(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(fa(U)))+"&"+f:this.m&&io(m,this.m,U)),la(this.h,V),this.Ua&&nt(m,"TYPE","init"),this.P?(nt(m,"$req",f),nt(m,"SID","null"),V.T=!0,Hs(V,m,null)):Hs(V,m,f),this.G=2}}else this.G==3&&(l?Gl(this,l):this.i.length==0||Ml(this.h)||Gl(this))};function Gl(l,f){var m;f?m=f.l:m=l.U++;const T=Hn(l.I);nt(T,"SID",l.K),nt(T,"RID",m),nt(T,"AID",l.T),zs(l,T),l.m&&l.o&&io(T,l.m,l.o),m=new xt(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Xu(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),la(l.h,m),Hs(m,T,f)}function zs(l,f){l.H&&ae(l.H,function(m,T){nt(f,T,m)}),l.l&&cn({},function(m,T){nt(f,T,m)})}function Xu(l,f,m){m=Math.min(l.i.length,m);var T=l.l?g(l.l.Na,l.l,l):null;e:{var V=l.i;let U=-1;for(;;){const re=["count="+m];U==-1?0<m?(U=V[0].g,re.push("ofs="+U)):U=0:re.push("ofs="+U);let ct=!0;for(let qt=0;qt<m;qt++){let Xe=V[qt].g;const dt=V[qt].map;if(Xe-=U,0>Xe)U=Math.max(0,V[qt].g-100),ct=!1;else try{ha(dt,re,"req"+Xe+"_")}catch{T&&T(dt)}}if(ct){T=re.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,T}function Ju(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ae||G(),Ve||(Ae(),Ve=!0),Rt.add(f,l),l.v=0}}function lo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Zr(g(l.Fa,l),Zu(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Zr(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),ao(this),Ql(this))};function ma(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Ql(l){l.g=new xt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Hn(l.qa);nt(f,"RID","rpc"),nt(f,"SID",l.K),nt(f,"AID",l.T),nt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&nt(f,"TO",l.ja),nt(f,"TYPE","xmlhttp"),zs(l,f),l.m&&l.o&&io(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=er(Hn(f)),m.m=null,m.P=!0,Ws(m,l)}n.Za=function(){this.C!=null&&(this.C=null,ao(this),lo(this),sn(19))};function os(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function ga(l,f){var m=null;if(l.g==f){os(l),ma(l),l.g=null;var T=2}else if(aa(l.h,f))m=f.D,Fl(l.h,f),T=1;else return;if(l.G!=0){if(f.o)if(T==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var V=l.B;T=sa(),Ie(T,new Uu(T,m)),_a(l)}else Ju(l);else if(V=f.s,V==3||V==0&&0<f.X||!(T==1&&Yu(l,f)||T==2&&lo(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),V){case 1:Gs(l,5);break;case 4:Gs(l,10);break;case 3:Gs(l,6);break;default:Gs(l,2)}}}function Zu(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function Gs(l,f){if(l.j.info("Error code "+f),f==2){var m=g(l.fb,l),T=l.Xa;const V=!T;T=new Es(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wn(T,"https"),er(T),V?ir(T.toString(),m):tp(T.toString(),m)}else sn(2);l.G=0,l.l&&l.l.sa(f),eh(l),Qu(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function eh(l){if(l.G=0,l.ka=[],l.l){const f=$l(l.h);(f.length!=0||l.i.length!=0)&&(k(l.ka,f),k(l.ka,l.i),l.h.i.length=0,N(l.i),l.i.length=0),l.l.ra()}}function th(l,f,m){var T=m instanceof Es?Hn(m):new Es(m);if(T.g!="")f&&(T.g=f+"."+T.g),ss(T,T.s);else{var V=a.location;T=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var U=new Es(null);T&&wn(U,T),f&&(U.g=f),V&&ss(U,V),m&&(U.l=m),T=U}return m=l.D,f=l.ya,m&&f&&nt(T,m,f),nt(T,"VER",l.la),zs(l,T),T}function nh(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new yt(new rr({eb:m})):new yt(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function sh(){}n=sh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function co(){}co.prototype.g=function(l,f){return new un(l,f)};function un(l,f){ye.call(this),this.g=new zl(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!$(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!$(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Ln(this)}w(un,ye),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){oo(this.g)},un.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Wt(l),l=m);f.i.push(new Hu(f.Ya++,l)),f.G==3&&_a(f)},un.prototype.N=function(){this.g.l=null,delete this.j,oo(this.g),delete this.g,un.aa.N.call(this)};function ih(l){na.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}w(ih,na);function Ti(){kl.call(this),this.status=1}w(Ti,kl);function Ln(l){this.g=l}w(Ln,sh),Ln.prototype.ua=function(){Ie(this.g,"a")},Ln.prototype.ta=function(l){Ie(this.g,new ih(l))},Ln.prototype.sa=function(l){Ie(this.g,new Ti)},Ln.prototype.ra=function(){Ie(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,MC=function(){return new co},LC=function(){return sa()},xC=_i,W_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,qh=ia,ju.COMPLETE="complete",DC=ju,Jr.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",ye.prototype.listen=ye.prototype.K,_c=Jr,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,kC=yt}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});const vT="@firebase/firestore",yT="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new ff("@firebase/firestore");function Sa(){return $o.logLevel}function de(n,...e){if($o.logLevel<=Ke.DEBUG){const t=e.map(Ag);$o.debug(`Firestore (${wl}): ${n}`,...t)}}function ji(n,...e){if($o.logLevel<=Ke.ERROR){const t=e.map(Ag);$o.error(`Firestore (${wl}): ${n}`,...t)}}function sl(n,...e){if($o.logLevel<=Ke.WARN){const t=e.map(Ag);$o.warn(`Firestore (${wl}): ${n}`,...t)}}function Ag(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n="Unexpected state"){const e=`FIRESTORE (${wl}) INTERNAL ASSERTION FAILED: `+n;throw ji(e),new Error(e)}function lt(n,e){n||Pe()}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Ki{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class k${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class D${constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0);let s=this.i;const i=c=>this.i!==s?(s=this.i,t(c)):Promise.resolve();let r=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Sr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=r;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Sr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(lt(typeof s.accessToken=="string"),new VC(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new fn(e)}}class x${constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class L${constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new x$(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ET{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M${constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Gn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0);const s=r=>{r.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?i(r):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new ET(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt(typeof t.token=="string"),this.R=t.token,new ET(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=V$(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<t&&(s+=e.charAt(i[r]%62))}return s}}function Ye(n,e){return n<e?-1:n>e?1:0}function il(n,e,t){return n.length===e.length&&n.every((s,i)=>t(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=-62135596800,wT=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*wT);return new Yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<TT)throw new Te(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wT}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-TT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Yt(0,0))}static max(){return new ke(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="__name__";class Zs{constructor(e,t,s){t===void 0?t=0:t>e.length&&Pe(),s===void 0?s=e.length-t:s>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Zs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zs?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const r=Zs.compareSegments(e.get(i),t.get(i));if(r!==0)return r}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=Zs.isNumericId(e),i=Zs.isNumericId(t);return s&&!i?-1:!s&&i?1:s&&i?Zs.extractNumericId(e).compare(Zs.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class Pt extends Zs{construct(e,t,s){return new Pt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Te(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(i=>i.length>0))}return new Pt(t)}static emptyPath(){return new Pt([])}}const F$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Zs{construct(e,t,s){return new on(e,t,s)}static isValidIdentifier(e){return F$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bT}static keyField(){return new on([bT])}static fromServerFormat(e){const t=[];let s="",i=0;const r=()=>{if(s.length===0)throw new Te(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Te(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Te(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new Te(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(Pt.fromString(e))}static fromName(e){return new be(Pt.fromString(e).popFirst(5))}static empty(){return new be(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function $$(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(s===1e9?new Yt(t+1,0):new Yt(t,s));return new xr(i,be.empty(),e)}function U$(n){return new xr(n.readTime,n.key,ou)}class xr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new xr(ke.min(),be.empty(),ou)}static max(){return new xr(ke.max(),be.empty(),ou)}}function j$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==B$)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(t,r).next(s,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,s)=>{t(e)})}static reject(e){return new Y((t,s)=>{s(e)})}static waitFor(e){return new Y((t,s)=>{let i=0,r=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&t()},c=>s(c))}),o=!0,r===i&&t()})}static or(e){let t=Y.resolve(!1);for(const s of e)t=t.next(i=>i?Y.resolve(i):s());return t}static forEach(e,t){const s=[];return e.forEach((i,r)=>{s.push(t.call(this,i,r))}),this.waitFor(s)}static mapArray(e,t){return new Y((s,i)=>{const r=e.length,o=new Array(r);let a=0;for(let c=0;c<r;c++){const h=c;t(e[h]).next(d=>{o[h]=d,++a,a===r&&s(o)},d=>i(d))}})}static doWhile(e,t){return new Y((s,i)=>{const r=()=>{e()===!0?t().next(()=>{r()},i):s()};r()})}}function W$(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Il(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.oe(s),this._e=s=>t.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Nf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=-1;function Of(n){return n==null}function kd(n){return n===0&&1/n==-1/0}function q$(n){return typeof n=="number"&&Number.isInteger(n)&&!kd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="";function K$(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IT(e)),e=z$(n.get(t),e);return IT(e)}function z$(n,e){let t=e;const s=n.length;for(let i=0;i<s;i++){const r=n.charAt(i);switch(r){case"\0":t+="";break;case $C:t+="";break;default:t+=r}}return t}function IT(n){return n+$C+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?s(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,s,i,r){this.key=e,this.value=t,this.color=s??rn.RED,this.left=i??rn.EMPTY,this.right=r??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,r){return new rn(e??this.key,t??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,s),null):r===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return rn.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,s,i,r){return this}insert(e,t,s){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CT(this.data.getIterator())}getIteratorFrom(e){return new CT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class CT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new Xt(on.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new jC("Invalid base64 string: "+r):r}}(e);return new an(t)}static fromUint8Array(e){const t=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new an(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const G$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(n){if(lt(!!n),typeof n=="string"){let e=0;const t=G$.exec(n);if(lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ft(n.seconds),nanos:Ft(n.nanos)}}function Ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mr(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="server_timestamp",HC="__type__",WC="__previous_value__",qC="__local_write_time__";function Sg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[HC])===null||t===void 0?void 0:t.stringValue)===BC}function kf(n){const e=n.mapValue.fields[WC];return Sg(e)?kf(e):e}function au(n){const e=Lr(n.mapValue.fields[qC].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e,t,s,i,r,o,a,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=h}}const Dd="(default)";class lu{constructor(e,t){this.projectId=e,this.database=t||Dd}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="__type__",Y$="__max__",bh={mapValue:{}},zC="__vector__",xd="value";function Vr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sg(n)?4:J$(n)?9007199254740991:X$(n)?10:11:Pe()}function di(n,e){if(n===e)return!0;const t=Vr(n);if(t!==Vr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return au(n).isEqual(au(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Lr(i.timestampValue),a=Lr(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,r){return Mr(i.bytesValue).isEqual(Mr(r.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Ft(i.geoPointValue.latitude)===Ft(r.geoPointValue.latitude)&&Ft(i.geoPointValue.longitude)===Ft(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ft(i.integerValue)===Ft(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ft(i.doubleValue),a=Ft(r.doubleValue);return o===a?kd(o)===kd(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return il(n.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(AT(o)!==AT(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!di(o[c],a[c])))return!1;return!0}(n,e);default:return Pe()}}function cu(n,e){return(n.values||[]).find(t=>di(t,e))!==void 0}function rl(n,e){if(n===e)return 0;const t=Vr(n),s=Vr(e);if(t!==s)return Ye(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return function(r,o){const a=Ft(r.integerValue||r.doubleValue),c=Ft(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return ST(n.timestampValue,e.timestampValue);case 4:return ST(au(n),au(e));case 5:return Ye(n.stringValue,e.stringValue);case 6:return function(r,o){const a=Mr(r),c=Mr(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),c=o.split("/");for(let h=0;h<a.length&&h<c.length;h++){const d=Ye(a[h],c[h]);if(d!==0)return d}return Ye(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const a=Ye(Ft(r.latitude),Ft(o.latitude));return a!==0?a:Ye(Ft(r.longitude),Ft(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RT(n.arrayValue,e.arrayValue);case 10:return function(r,o){var a,c,h,d;const p=r.fields||{},g=o.fields||{},y=(a=p[xd])===null||a===void 0?void 0:a.arrayValue,w=(c=g[xd])===null||c===void 0?void 0:c.arrayValue,N=Ye(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:RT(y,w)}(n.mapValue,e.mapValue);case 11:return function(r,o){if(r===bh.mapValue&&o===bh.mapValue)return 0;if(r===bh.mapValue)return 1;if(o===bh.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),h=o.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=Ye(c[p],d[p]);if(g!==0)return g;const y=rl(a[c[p]],h[d[p]]);if(y!==0)return y}return Ye(c.length,d.length)}(n.mapValue,e.mapValue);default:throw Pe()}}function ST(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);const t=Lr(n),s=Lr(e),i=Ye(t.seconds,s.seconds);return i!==0?i:Ye(t.nanos,s.nanos)}function RT(n,e){const t=n.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const r=rl(t[i],s[i]);if(r)return r}return Ye(t.length,s.length)}function ol(n){return q_(n)}function q_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Lr(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Mr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return be.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",i=!0;for(const r of t.values||[])i?i=!1:s+=",",s+=q_(r);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${q_(t.fields[o])}`;return i+"}"}(n.mapValue):Pe()}function Kh(n){switch(Vr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(n);return e?16+Kh(e):16;case 5:return 2*n.stringValue.length;case 6:return Mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+Kh(r),0)}(n.arrayValue);case 10:case 11:return function(s){let i=0;return Kr(s.fields,(r,o)=>{i+=r.length+Kh(o)}),i}(n.mapValue);default:throw Pe()}}function K_(n){return!!n&&"integerValue"in n}function Rg(n){return!!n&&"arrayValue"in n}function PT(n){return!!n&&"nullValue"in n}function NT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zh(n){return!!n&&"mapValue"in n}function X$(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[KC])===null||t===void 0?void 0:t.stringValue)===zC}function Dc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Kr(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Dc(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function J$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Y$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!zh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(t)}setAll(e){let t=on.emptyPath(),s={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,s,i),s={},i=[],t=a.popLast()}o?s[a.lastSegment()]=Dc(o):i.push(a.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,s,i)}delete(e){const t=this.field(e.popLast());zh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){Kr(t,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new $n(Dc(this.value))}}function GC(n){const e=[];return Kr(n.fields,(t,s)=>{const i=new on([t]);if(zh(s)){const r=GC(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t,s,i,r,o,a){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gn(e,0,ke.min(),ke.min(),ke.min(),$n.empty(),0)}static newFoundDocument(e,t,s,i){return new gn(e,1,t,ke.min(),s,i,0)}static newNoDocument(e,t){return new gn(e,2,t,ke.min(),ke.min(),$n.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,ke.min(),ke.min(),$n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.position=e,this.inclusive=t}}function OT(n,e,t){let s=0;for(let i=0;i<n.position.length;i++){const r=e[i],o=n.position[i];if(r.field.isKeyField()?s=be.comparator(be.fromName(o.referenceValue),t.key):s=rl(o,t.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function kT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!di(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t="asc"){this.field=e,this.dir=t}}function Z$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{}class Qt extends QC{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new tU(e,t,s):t==="array-contains"?new iU(e,s):t==="in"?new rU(e,s):t==="not-in"?new oU(e,s):t==="array-contains-any"?new aU(e,s):new Qt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new nU(e,s):new sU(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(rl(t,this.value)):t!==null&&Vr(this.value)===Vr(t)&&this.matchesComparison(rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends QC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new fi(e,t)}matches(e){return YC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function YC(n){return n.op==="and"}function XC(n){return eU(n)&&YC(n)}function eU(n){for(const e of n.filters)if(e instanceof fi)return!1;return!0}function z_(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+ol(n.value);if(XC(n))return n.filters.map(e=>z_(e)).join(",");{const e=n.filters.map(t=>z_(t)).join(",");return`${n.op}(${e})`}}function JC(n,e){return n instanceof Qt?function(s,i){return i instanceof Qt&&s.op===i.op&&s.field.isEqual(i.field)&&di(s.value,i.value)}(n,e):n instanceof fi?function(s,i){return i instanceof fi&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&JC(o,i.filters[a]),!0):!1}(n,e):void Pe()}function ZC(n){return n instanceof Qt?function(t){return`${t.field.canonicalString()} ${t.op} ${ol(t.value)}`}(n):n instanceof fi?function(t){return t.op.toString()+" {"+t.getFilters().map(ZC).join(" ,")+"}"}(n):"Filter"}class tU extends Qt{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class nU extends Qt{constructor(e,t){super(e,"in",t),this.keys=eS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sU extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=eS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>be.fromName(s.referenceValue))}class iU extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rg(t)&&cu(t.arrayValue,this.value)}}class rU extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cu(this.value.arrayValue,t)}}class oU extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!cu(this.value.arrayValue,t)}}class aU extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>cu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,t=null,s=[],i=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.le=null}}function DT(n,e=null,t=[],s=[],i=null,r=null,o=null){return new lU(n,e,t,s,i,r,o)}function Pg(n){const e=Me(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>z_(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Of(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ol(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ol(s)).join(",")),e.le=t}return e.le}function Ng(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Z$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kT(n.startAt,e.startAt)&&kT(n.endAt,e.endAt)}function G_(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t=null,s=[],i=[],r=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function cU(n,e,t,s,i,r,o,a){return new Df(n,e,t,s,i,r,o,a)}function xf(n){return new Df(n)}function xT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uU(n){return n.collectionGroup!==null}function xc(n){const e=Me(n);if(e.he===null){e.he=[];const t=new Set;for(const r of e.explicitOrderBy)e.he.push(r),t.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(on.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(r=>{t.has(r.canonicalString())||r.isKeyField()||e.he.push(new Md(r,s))}),t.has(on.keyField().canonicalString())||e.he.push(new Md(on.keyField(),s))}return e.he}function oi(n){const e=Me(n);return e.Pe||(e.Pe=hU(e,xc(n))),e.Pe}function hU(n,e){if(n.limitType==="F")return DT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Md(i.field,r)});const t=n.endAt?new Ld(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ld(n.startAt.position,n.startAt.inclusive):null;return DT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Q_(n,e,t){return new Df(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lf(n,e){return Ng(oi(n),oi(e))&&n.limitType===e.limitType}function tS(n){return`${Pg(oi(n))}|lt:${n.limitType}`}function Ra(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(i=>ZC(i)).join(", ")}]`),Of(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(i=>ol(i)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(i=>ol(i)).join(",")),`Target(${s})`}(oi(n))}; limitType=${n.limitType})`}function Mf(n,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):be.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(n,e)&&function(s,i){for(const r of xc(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(n,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(n,e)&&function(s,i){return!(s.startAt&&!function(o,a,c){const h=OT(o,a,c);return o.inclusive?h<=0:h<0}(s.startAt,xc(s),i)||s.endAt&&!function(o,a,c){const h=OT(o,a,c);return o.inclusive?h>=0:h>0}(s.endAt,xc(s),i))}(n,e)}function dU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nS(n){return(e,t)=>{let s=!1;for(const i of xc(n)){const r=fU(i,e,t);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function fU(n,e,t){const s=n.field.isKeyField()?be.comparator(e.key,t.key):function(r,o,a){const c=o.data.field(r),h=a.data.field(r);return c!==null&&h!==null?rl(c,h):Pe()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kr(this.inner,(t,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return UC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=new kt(be.comparator);function Bi(){return pU}const sS=new kt(be.comparator);function mc(...n){let e=sS;for(const t of n)e=e.insert(t.key,t);return e}function iS(n){let e=sS;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Co(){return Lc()}function rS(){return Lc()}function Lc(){return new Yo(n=>n.toString(),(n,e)=>n.isEqual(e))}const _U=new kt(be.comparator),mU=new Xt(be.comparator);function Ge(...n){let e=mU;for(const t of n)e=e.add(t);return e}const gU=new Xt(Ye);function vU(){return gU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function oS(n){return{integerValue:""+n}}function yU(n,e){return q$(e)?oS(e):Og(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function EU(n,e,t){return n instanceof Vd?function(i,r){const o={fields:{[HC]:{stringValue:BC},[qC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Sg(r)&&(r=kf(r)),r&&(o.fields[WC]=r),{mapValue:o}}(t,e):n instanceof uu?lS(n,e):n instanceof hu?cS(n,e):function(i,r){const o=aS(i,r),a=LT(o)+LT(i.Ie);return K_(o)&&K_(i.Ie)?oS(a):Og(i.serializer,a)}(n,e)}function TU(n,e,t){return n instanceof uu?lS(n,e):n instanceof hu?cS(n,e):t}function aS(n,e){return n instanceof Fd?function(s){return K_(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class Vd extends Vf{}class uu extends Vf{constructor(e){super(),this.elements=e}}function lS(n,e){const t=uS(e);for(const s of n.elements)t.some(i=>di(i,s))||t.push(s);return{arrayValue:{values:t}}}class hu extends Vf{constructor(e){super(),this.elements=e}}function cS(n,e){let t=uS(e);for(const s of n.elements)t=t.filter(i=>!di(i,s));return{arrayValue:{values:t}}}class Fd extends Vf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function LT(n){return Ft(n.integerValue||n.doubleValue)}function uS(n){return Rg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function wU(n,e){return n.field.isEqual(e.field)&&function(s,i){return s instanceof uu&&i instanceof uu||s instanceof hu&&i instanceof hu?il(s.elements,i.elements,di):s instanceof Fd&&i instanceof Fd?di(s.Ie,i.Ie):s instanceof Vd&&i instanceof Vd}(n.transform,e.transform)}class bU{constructor(e,t){this.version=e,this.transformResults=t}}class Ls{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ls}static exists(e){return new Ls(void 0,e)}static updateTime(e){return new Ls(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ff{}function hS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kg(n.key,Ls.none()):new Cu(n.key,n.data,Ls.none());{const t=n.data,s=$n.empty();let i=new Xt(on.comparator);for(let r of e.fields)if(!i.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new zr(n.key,s,new Jn(i.toArray()),Ls.none())}}function IU(n,e,t){n instanceof Cu?function(i,r,o){const a=i.value.clone(),c=VT(i.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof zr?function(i,r,o){if(!Gh(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=VT(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(dS(i)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Mc(n,e,t,s){return n instanceof Cu?function(r,o,a,c){if(!Gh(r.precondition,o))return a;const h=r.value.clone(),d=FT(r.fieldTransforms,c,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,s):n instanceof zr?function(r,o,a,c){if(!Gh(r.precondition,o))return a;const h=FT(r.fieldTransforms,c,o),d=o.data;return d.setAll(dS(r)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(n,e,t,s):function(r,o,a){return Gh(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function AU(n,e){let t=null;for(const s of n.fieldTransforms){const i=e.data.field(s.field),r=aS(s.transform,i||null);r!=null&&(t===null&&(t=$n.empty()),t.set(s.field,r))}return t||null}function MT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&il(s,i,(r,o)=>wU(r,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Cu extends Ff{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zr extends Ff{constructor(e,t,s,i,r=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function dS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function VT(n,e,t){const s=new Map;lt(n.length===t.length);for(let i=0;i<t.length;i++){const r=n[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,TU(o,a,t[i]))}return s}function FT(n,e,t){const s=new Map;for(const i of n){const r=i.transform,o=t.data.field(i.field);s.set(i.field,EU(r,o,e))}return s}class kg extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CU extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&IU(r,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Mc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Mc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=rS();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(i.key)?null:a;const c=hS(o,a);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ke.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ge())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,(t,s)=>MT(t,s))&&il(this.baseMutations,e.baseMutations,(t,s)=>MT(t,s))}}class Dg{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){lt(e.mutations.length===s.length);let i=function(){return _U}();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Dg(e,t,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Je;function NU(n){switch(n){case Z.OK:return Pe();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Pe()}}function fS(n){if(n===void 0)return ji("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Bt.OK:return Z.OK;case Bt.CANCELLED:return Z.CANCELLED;case Bt.UNKNOWN:return Z.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return Z.INTERNAL;case Bt.UNAVAILABLE:return Z.UNAVAILABLE;case Bt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Bt.NOT_FOUND:return Z.NOT_FOUND;case Bt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Bt.ABORTED:return Z.ABORTED;case Bt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Bt.DATA_LOSS:return Z.DATA_LOSS;default:return Pe()}}(Je=Bt||(Bt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=new Cr([4294967295,4294967295],0);function $T(n){const e=OU().encode(n),t=new OC;return t.update(e),new Uint8Array(t.digest())}function UT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Cr([t,s],0),new Cr([i,r],0)]}class xg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new gc(`Invalid padding: ${t}`);if(s<0)throw new gc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new gc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Cr.fromNumber(this.Ee)}Ae(e,t,s){let i=e.add(t.multiply(Cr.fromNumber(s)));return i.compare(kU)===1&&(i=new Cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=$T(e),[s,i]=UT(t);for(let r=0;r<this.hashCount;r++){const o=this.Ae(s,i,r);if(!this.Re(o))return!1}return!0}static create(e,t,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new xg(r,i,t);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=$T(e),[s,i]=UT(t);for(let r=0;r<this.hashCount;r++){const o=this.Ae(s,i,r);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t,s,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const i=new Map;return i.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new $f(ke.min(),i,new kt(Ye),Bi(),Ge())}}class Su{constructor(e,t,s,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Su(s,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t,s,i){this.me=e,this.removedTargetIds=t,this.key=s,this.fe=i}}class pS{constructor(e,t){this.targetId=e,this.ge=t}}class _S{constructor(e,t,s=an.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=i}}class jT{constructor(){this.pe=0,this.ye=BT(),this.we=an.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ge(),t=Ge(),s=Ge();return this.ye.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:s=s.add(i);break;default:Pe()}}),new Su(this.we,this.be,e,t,s)}Me(){this.Se=!1,this.ye=BT()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,lt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class DU{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Bi(),this.$e=Ih(),this.Ke=Ih(),this.Ue=new kt(Ye)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const s=this.He(t);switch(e.state){case 0:this.Je(t)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(t);break;case 3:this.Je(t)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),s.Ce(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((s,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,s=e.ge.count,i=this.Xe(t);if(i){const r=i.target;if(G_(r))if(s===0){const o=new be(r.path);this.ze(t,o,gn.newNoDocument(o,ke.min()))}else lt(s===1);else{const o=this.et(t);if(o!==s){const a=this.tt(e),c=a?this.nt(a,e,o):1;if(c!==0){this.Ye(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=t;let o,a;try{o=Mr(s).toUint8Array()}catch(c){if(c instanceof jC)return sl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new xg(o,i,r)}catch(c){return sl(c instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ee===0?null:a}nt(e,t,s){return t.ge.count===s-this.st(e,t.targetId)?0:2}st(e,t){const s=this.ke.getRemoteKeysForTarget(t);let i=0;return s.forEach(r=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,r,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((r,o)=>{const a=this.Xe(o);if(a){if(r.current&&G_(a.target)){const c=new be(a.target.path);this._t(c).has(o)||this.ut(o,c)||this.ze(o,c,gn.newNoDocument(c,e))}r.ve&&(t.set(o,r.Fe()),r.Me())}});let s=Ge();this.Ke.forEach((r,o)=>{let a=!0;o.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.Qe.forEach((r,o)=>o.setReadTime(e));const i=new $f(e,t,this.Ue,this.Qe,s);return this.Qe=Bi(),this.$e=Ih(),this.Ke=Ih(),this.Ue=new kt(Ye),i}Ge(e,t){if(!this.Je(e))return;const s=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,s),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,s){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),s&&(this.Qe=this.Qe.insert(t,s))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new jT,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Xt(Ye),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Xt(Ye),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new jT),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Ih(){return new kt(be.comparator)}function BT(){return new kt(be.comparator)}const xU={asc:"ASCENDING",desc:"DESCENDING"},LU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MU={and:"AND",or:"OR"};class VU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Y_(n,e){return n.useProto3Json||Of(e)?e:{value:e}}function $d(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FU(n,e){return $d(n,e.toTimestamp())}function ai(n){return lt(!!n),ke.fromTimestamp(function(t){const s=Lr(t);return new Yt(s.seconds,s.nanos)}(n))}function Lg(n,e){return X_(n,e).canonicalString()}function X_(n,e){const t=function(i){return new Pt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function gS(n){const e=Pt.fromString(n);return lt(wS(e)),e}function J_(n,e){return Lg(n.databaseId,e.path)}function Hp(n,e){const t=gS(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(yS(t))}function vS(n,e){return Lg(n.databaseId,e)}function $U(n){const e=gS(n);return e.length===4?Pt.emptyPath():yS(e)}function Z_(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return lt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function HT(n,e,t){return{name:J_(n,e),fields:t.value.mapValue.fields}}function UU(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(lt(d===void 0||typeof d=="string"),an.fromBase64String(d||"")):(lt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),an.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const d=h.code===void 0?Z.UNKNOWN:fS(h.code);return new Te(d,h.message||"")}(o);t=new _S(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Hp(n,s.document.name),r=ai(s.document.updateTime),o=s.document.createTime?ai(s.document.createTime):ke.min(),a=new $n({mapValue:{fields:s.document.fields}}),c=gn.newFoundDocument(i,r,o,a),h=s.targetIds||[],d=s.removedTargetIds||[];t=new Qh(h,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Hp(n,s.document),r=s.readTime?ai(s.readTime):ke.min(),o=gn.newNoDocument(i,r),a=s.removedTargetIds||[];t=new Qh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Hp(n,s.document),r=s.removedTargetIds||[];t=new Qh([],r,i,null)}else{if(!("filter"in e))return Pe();{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new PU(i,r),a=s.targetId;t=new pS(a,o)}}return t}function jU(n,e){let t;if(e instanceof Cu)t={update:HT(n,e.key,e.value)};else if(e instanceof kg)t={delete:J_(n,e.key)};else if(e instanceof zr)t={update:HT(n,e.key,e.data),updateMask:YU(e.fieldMask)};else{if(!(e instanceof CU))return Pe();t={verify:J_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fd)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Pe()}(0,s))),e.precondition.isNone||(t.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:FU(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Pe()}(n,e.precondition)),t}function BU(n,e){return n&&n.length>0?(lt(e!==void 0),n.map(t=>function(i,r){let o=i.updateTime?ai(i.updateTime):ai(r);return o.isEqual(ke.min())&&(o=ai(r)),new bU(o,i.transformResults||[])}(t,e))):[]}function HU(n,e){return{documents:[vS(n,e.path)]}}function WU(n,e){const t={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=vS(n,i);const r=function(h){if(h.length!==0)return TS(fi.create(h,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(h){if(h.length!==0)return h.map(d=>function(g){return{field:Pa(g.field),direction:zU(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Y_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:i}}function qU(n){let e=$U(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){lt(s===1);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let r=[];t.where&&(r=function(p){const g=ES(p);return g instanceof fi&&XC(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(w){return new Md(Na(w.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Of(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,y=p.values||[];return new Ld(y,g)}(t.startAt));let h=null;return t.endAt&&(h=function(p){const g=!p.before,y=p.values||[];return new Ld(y,g)}(t.endAt)),cU(e,i,o,r,a,"F",c,h)}function KU(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ES(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Na(t.unaryFilter.field);return Qt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Na(t.unaryFilter.field);return Qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Na(t.unaryFilter.field);return Qt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Na(t.unaryFilter.field);return Qt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(n):n.fieldFilter!==void 0?function(t){return Qt.create(Na(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fi.create(t.compositeFilter.filters.map(s=>ES(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(n):Pe()}function zU(n){return xU[n]}function GU(n){return LU[n]}function QU(n){return MU[n]}function Pa(n){return{fieldPath:n.canonicalString()}}function Na(n){return on.fromServerFormat(n.fieldPath)}function TS(n){return n instanceof Qt?function(t){if(t.op==="=="){if(NT(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NAN"}};if(PT(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NT(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NAN"}};if(PT(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(t.field),op:GU(t.op),value:t.value}}}(n):n instanceof fi?function(t){const s=t.getFilters().map(i=>TS(i));return s.length===1?s[0]:{compositeFilter:{op:QU(t.op),filters:s}}}(n):Pe()}function YU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t,s,i,r=ke.min(),o=ke.min(),a=an.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.Tt=e}}function JU(n){const e=qU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Q_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(){this.Tn=new e2}addToCollectionParentIndex(e,t){return this.Tn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(xr.min())}updateCollectionGroup(e,t,s){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class e2{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new Xt(Pt.comparator),r=!i.has(s);return this.index[t]=i.add(s),r}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Xt(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bS=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(bS,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new al(0)}static Un(){return new al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="LruGarbageCollector",t2=1048576;function KT([n,e],[t,s]){const i=Ye(n,t);return i===0?Ye(e,s):i}class n2{constructor(e){this.Hn=e,this.buffer=new Xt(KT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();KT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class s2{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(qT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Il(t)?de(qT,"Ignoring IndexedDB error during garbage collection: ",t):await bl(t)}await this.er(3e5)})}}class i2{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(Nf.ae);const s=new n2(t);return this.tr.forEachTarget(e,i=>s.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>s.Zn(i))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.tr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(WT)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WT):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let s,i,r,o,a,c,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(s=p,a=Date.now(),this.removeTargets(e,s,t))).next(p=>(r=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(h=Date.now(),Sa()<=Ke.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:p})))}}function r2(n,e){return new i2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.changes=new Yo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Y.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(s!==null&&Mc(s.mutation,i,Jn.empty(),Yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ge()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ge()){const i=Co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,s).next(r=>{let o=mc();return r.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const s=Co();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ge()))}populateOverlays(e,t,s){const i=[];return s.forEach(r=>{t.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,s,i){let r=Bi();const o=Lc(),a=function(){return Lc()}();return t.forEach((c,h)=>{const d=s.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof zr)?r=r.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Mc(d.mutation,h,d.mutation.getFieldMask(),Yt.now())):o.set(h.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((h,d)=>o.set(h,d)),t.forEach((h,d)=>{var p;return a.set(h,new a2(d,(p=o.get(h))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){const s=Lc();let i=new kt((o,a)=>o-a),r=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let d=s.get(c)||Jn.empty();d=a.applyToLocalView(h,d),s.set(c,d);const p=(i.get(a.batchId)||Ge()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),h=c.key,d=c.value,p=rS();d.forEach(g=>{if(!r.has(g)){const y=hS(t.get(g),s.get(g));y!==null&&p.set(g,y),r=r.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return Y.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,i){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-r.size):Y.resolve(Co());let a=ou,c=r;return o.next(h=>Y.forEach(h,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),r.get(d)?Y.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,h,r)).next(()=>this.computeViews(e,c,h,Ge())).next(d=>({batchId:a,changes:iS(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next(s=>{let i=mc();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const r=t.collectionGroup;let o=mc();return this.indexManager.getCollectionParents(e,r).next(a=>Y.forEach(a,c=>{const h=function(p,g){return new Df(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,s,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,r,i))).next(o=>{r.forEach((c,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,gn.newInvalidDocument(d)))});let a=mc();return o.forEach((c,h)=>{const d=r.get(c);d!==void 0&&Mc(d.mutation,h,Jn.empty(),Yt.now()),Mf(t,h)&&(a=a.insert(c,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Y.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ai(i.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:JU(i.bundledQuery),readTime:ai(i.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.overlays=new kt(be.comparator),this.Rr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Co();return Y.forEach(t,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((i,r)=>{this.Et(e,t,r)}),Y.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.Rr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(s)),Y.resolve()}getOverlaysForCollection(e,t,s){const i=Co(),r=t.length+1,o=new be(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let r=new kt((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>s){let d=r.get(h.largestBatchId);d===null&&(d=Co(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const a=Co(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>a.set(h,d)),!(a.size()>=i)););return Y.resolve(a)}Et(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(s.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new RU(t,s));let r=this.Rr.get(t);r===void 0&&(r=Ge(),this.Rr.set(t,r)),this.Rr.set(t,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.Vr=new Xt(tn.mr),this.gr=new Xt(tn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const s=new tn(e,t);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.wr(new tn(e,t))}br(e,t){e.forEach(s=>this.removeReference(s,t))}Sr(e){const t=new be(new Pt([])),s=new tn(t,e),i=new tn(t,e+1),r=[];return this.gr.forEachInRange([s,i],o=>{this.wr(o),r.push(o.key)}),r}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new be(new Pt([])),s=new tn(t,e),i=new tn(t,e+1);let r=Ge();return this.gr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new tn(e,0),s=this.Vr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class tn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return be.comparator(e.key,t.key)||Ye(e.Cr,t.Cr)}static pr(e,t){return Ye(e.Cr,t.Cr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Xt(tn.mr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new SU(r,t,s,i);this.mutationQueue.push(o);for(const a of i)this.Mr=this.Mr.add(new tn(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,t){return Y.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.Nr(s),r=i<0?0:i;return Y.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Cg:this.Fr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new tn(t,0),i=new tn(t,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([s,i],o=>{const a=this.Or(o.Cr);r.push(a)}),Y.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Xt(Ye);return t.forEach(i=>{const r=new tn(i,0),o=new tn(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,o],a=>{s=s.add(a.Cr)})}),Y.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let r=s;be.isDocumentKey(r)||(r=r.child(""));const o=new tn(new be(r),0);let a=new Xt(Ye);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===i&&(a=a.add(c.Cr)),!0)},o),Y.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(s=>{const i=this.Or(s);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){lt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return Y.forEach(t.mutations,i=>{const r=new tn(i.key,t.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,t){const s=new tn(t,0),i=this.Mr.firstAfterOrEqual(s);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.kr=e,this.docs=function(){return new kt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),r=i?i.size:0,o=this.kr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Y.resolve(s?s.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let s=Bi();return t.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():gn.newInvalidDocument(i))}),Y.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let r=Bi();const o=t.path,a=new be(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||j$(U$(d),s)<=0||(i.has(d.key)||Mf(t,d))&&(r=r.insert(d.key,d.mutableCopy()))}return Y.resolve(r)}getAllFromCollectionGroup(e,t,s,i){Pe()}qr(e,t){return Y.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new p2(this)}getSize(e){return Y.resolve(this.size)}}class p2 extends o2{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(s)}),Y.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.persistence=e,this.Qr=new Yo(t=>Pg(t),Ng),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Mg,this.targetCount=0,this.Ur=al.Kn()}forEachTarget(e,t){return this.Qr.forEach((s,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$r&&(this.$r=t),Y.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new al(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.zn(t),Y.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,s){let i=0;const r=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&s.get(a.targetId)===null&&(this.Qr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(r).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const s=this.Qr.get(t)||null;return Y.resolve(s)}addMatchingKeys(e,t,s){return this.Kr.yr(t,s),Y.resolve()}removeMatchingKeys(e,t,s){this.Kr.br(t,s);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(o=>{r.push(i.markPotentiallyOrphaned(e,o))}),Y.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Kr.vr(t);return Y.resolve(s)}containsKey(e,t){return Y.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Nf(0),this.zr=!1,this.zr=!0,this.jr=new h2,this.referenceDelegate=e(this),this.Hr=new _2(this),this.indexManager=new ZU,this.remoteDocumentCache=function(i){return new f2(i)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new XU(t),this.Yr=new c2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new u2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Wr[e.toKey()];return s||(s=new d2(t,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const i=new m2(this.Gr.next());return this.referenceDelegate.Zr(),s(i).next(r=>this.referenceDelegate.Xr(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}ei(e,t){return Y.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,t)))}}class m2 extends H${constructor(e){super(),this.currentSequenceNumber=e}}class Vg{constructor(e){this.persistence=e,this.ti=new Mg,this.ni=null}static ri(e){return new Vg(e)}get ii(){if(this.ni)return this.ni;throw Pe()}addReference(e,t,s){return this.ti.addReference(s,t),this.ii.delete(s.toString()),Y.resolve()}removeReference(e,t,s){return this.ti.removeReference(s,t),this.ii.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Y.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(r=>this.ii.add(r.toString()))}).next(()=>s.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.ii,s=>{const i=be.fromPath(s);return this.si(e,i).next(r=>{r||t.removeEntry(i,ke.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(s=>{s?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Y.or([()=>Y.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Ud{constructor(e,t){this.persistence=e,this.oi=new Yo(s=>K$(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=r2(this,t)}static ri(e,t){return new Ud(e,t)}Zr(){}Xr(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(i=>s+i))}sr(e){let t=0;return this.rr(e,s=>{t++}).next(()=>t)}rr(e,t){return Y.forEach(this.oi,(s,i)=>this.ar(e,s,i).next(r=>r?Y.resolve():t(i)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,t).next(a=>{a||(s++,r.removeEntry(o,ke.min()))})).next(()=>r.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Y.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kh(e.data.value)),t}ar(e,t,s){return Y.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return Y.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Hi=s,this.Ji=i}static Yi(e,t){let s=Ge(),i=Ge();for(const r of t.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Fg(e,t.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return ok()?8:W$(Tn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,s,i){const r={result:null};return this.rs(e,t).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ss(e,t,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new g2;return this._s(e,t,o).next(a=>{if(r.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>r.result)}us(e,t,s,i){return s.documentReadCount<this.es?(Sa()<=Ke.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Y.resolve()):(Sa()<=Ke.DEBUG&&de("QueryEngine","Query:",Ra(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ts*i?(Sa()<=Ke.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(t))):Y.resolve())}rs(e,t){if(xT(t))return Y.resolve(null);let s=oi(t);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Q_(t,null,"F"),s=oi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const o=Ge(...r);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const h=this.cs(t,a);return this.ls(t,h,o,c.readTime)?this.rs(e,Q_(t,null,"F")):this.hs(e,h,t,c)}))})))}ss(e,t,s,i){return xT(t)||i.isEqual(ke.min())?Y.resolve(null):this.ns.getDocuments(e,s).next(r=>{const o=this.cs(t,r);return this.ls(t,o,s,i)?Y.resolve(null):(Sa()<=Ke.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ra(t)),this.hs(e,o,t,$$(i,ou)).next(a=>a))})}cs(e,t){let s=new Xt(nS(e));return t.forEach((i,r)=>{Mf(e,r)&&(s=s.add(r))}),s}ls(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}_s(e,t,s){return Sa()<=Ke.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ra(t)),this.ns.getDocumentsMatchingQuery(e,t,xr.min(),s)}hs(e,t,s,i){return this.ns.getDocumentsMatchingQuery(e,s,i).next(r=>(t.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="LocalStore",y2=3e8;class E2{constructor(e,t,s,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new kt(Ye),this.Is=new Yo(r=>Pg(r),Ng),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new l2(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function T2(n,e,t,s){return new E2(n,e,t,s)}async function AS(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,t.As(e),t.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let c=Ge();for(const h of i){o.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of r){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(s,c).next(h=>({Rs:h,removedBatchIds:o,addedBatchIds:a}))})})}function w2(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,c,h,d){const p=h.batch,g=p.keys();let y=Y.resolve();return g.forEach(w=>{y=y.next(()=>d.getEntry(c,w)).next(N=>{const k=h.docVersions.get(w);lt(k!==null),N.version.compareTo(k)<0&&(p.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),d.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,s,e,r).next(()=>r.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=Ge();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(c=c.add(a.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(s,i))})}function CS(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function b2(n,e){const t=Me(n),s=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const a=[];e.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;a.push(t.Hr.removeMatchingKeys(r,d.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(r,d.addedDocuments,p)));let y=g.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(an.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,s)),i=i.insert(p,y),function(N,k,F){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=y2?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,d)&&a.push(t.Hr.updateTargetData(r,y))});let c=Bi(),h=Ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(r,d))}),a.push(I2(r,o,e.documentUpdates).next(d=>{c=d.Vs,h=d.fs})),!s.isEqual(ke.min())){const d=t.Hr.getLastRemoteSnapshotVersion(r).next(p=>t.Hr.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(d)}return Y.waitFor(a).next(()=>o.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,c,h)).next(()=>c)}).then(r=>(t.Ts=i,r))}function I2(n,e,t){let s=Ge(),i=Ge();return t.forEach(r=>s=s.add(r)),e.getEntries(n,s).next(r=>{let o=Bi();return t.forEach((a,c)=>{const h=r.get(a);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):de($g,"Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version)}),{Vs:o,fs:i}})}function A2(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Cg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function C2(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return t.Hr.getTargetData(s,e).next(r=>r?(i=r,Y.resolve(i)):t.Hr.allocateTargetId(s).next(o=>(i=new Er(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Hr.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=t.Ts.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(s.targetId,s),t.Is.set(e,s.targetId)),s})}async function em(n,e,t){const s=Me(n),i=s.Ts.get(e),r=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Il(o))throw o;de($g,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ts=s.Ts.remove(e),s.Is.delete(i.target)}function zT(n,e,t){const s=Me(n);let i=ke.min(),r=Ge();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,d){const p=Me(c),g=p.Is.get(d);return g!==void 0?Y.resolve(p.Ts.get(g)):p.Hr.getTargetData(h,d)}(s,o,oi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{r=c})}).next(()=>s.Ps.getDocumentsMatchingQuery(o,e,t?i:ke.min(),t?r:Ge())).next(a=>(S2(s,dU(e),a),{documents:a,gs:r})))}function S2(n,e,t){let s=n.Es.get(e)||ke.min();t.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),n.Es.set(e,s)}class GT{constructor(){this.activeTargetIds=vU()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R2{constructor(){this.ho=new GT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,s){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new GT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="ConnectivityMonitor";class YT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(QT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(QT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=null;function tm(){return Ah===null?Ah=function(){return 268435456+Math.round(2147483648*Math.random())}():Ah++,"0x"+Ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="RestConnection",N2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O2{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${s}/databases/${i}`,this.wo=this.databaseId.database===Dd?`project_id=${s}`:`project_id=${s}&database_id=${i}`}bo(e,t,s,i,r){const o=tm(),a=this.So(e,t.toUriEncodedString());de(Wp,`Sending RPC '${e}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,i,r),this.vo(e,a,c,s).then(h=>(de(Wp,`Received RPC '${e}' ${o}: `,h),h),h=>{throw sl(Wp,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",s),h})}Co(e,t,s,i,r,o){return this.bo(e,t,s,i,r)}Do(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,r)=>e[r]=i),s&&s.headers.forEach((i,r)=>e[r]=i)}So(e,t){const s=N2[e];return`${this.po}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class D2 extends O2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,s,i){const r=tm();return new Promise((o,a)=>{const c=new kC;c.setWithCredentials(!0),c.listenOnce(DC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qh.NO_ERROR:const d=c.getResponseJson();de(hn,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(d)),o(d);break;case qh.TIMEOUT:de(hn,`RPC '${e}' ${r} timed out`),a(new Te(Z.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const p=c.getStatus();if(de(hn,`RPC '${e}' ${r} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const w=function(k){const F=k.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(F)>=0?F:Z.UNKNOWN}(y.status);a(new Te(w,y.message))}else a(new Te(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Te(Z.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{de(hn,`RPC '${e}' ${r} completed.`)}});const h=JSON.stringify(i);de(hn,`RPC '${e}' ${r} sending request:`,i),c.send(t,"POST",h,s,15)})}Wo(e,t,s){const i=tm(),r=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=MC(),a=LC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,s),c.encodeInitMessageHeaders=!0;const d=r.join("");de(hn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=o.createWebChannel(d,c);let g=!1,y=!1;const w=new k2({Fo:k=>{y?de(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(de(hn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),de(hn,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Mo:()=>p.close()}),N=(k,F,$)=>{k.listen(F,K=>{try{$(K)}catch(H){setTimeout(()=>{throw H},0)}})};return N(p,_c.EventType.OPEN,()=>{y||(de(hn,`RPC '${e}' stream ${i} transport opened.`),w.Qo())}),N(p,_c.EventType.CLOSE,()=>{y||(y=!0,de(hn,`RPC '${e}' stream ${i} transport closed`),w.Ko())}),N(p,_c.EventType.ERROR,k=>{y||(y=!0,sl(hn,`RPC '${e}' stream ${i} transport errored:`,k),w.Ko(new Te(Z.UNAVAILABLE,"The operation could not be completed")))}),N(p,_c.EventType.MESSAGE,k=>{var F;if(!y){const $=k.data[0];lt(!!$);const K=$,H=(K==null?void 0:K.error)||((F=K[0])===null||F===void 0?void 0:F.error);if(H){de(hn,`RPC '${e}' stream ${i} received error:`,H);const ce=H.status;let ae=function(A){const P=Bt[A];if(P!==void 0)return fS(P)}(ce),R=H.message;ae===void 0&&(ae=Z.INTERNAL,R="Unknown error status: "+ce+" with message "+H.message),y=!0,w.Ko(new Te(ae,R)),p.close()}else de(hn,`RPC '${e}' stream ${i} received:`,$),w.Uo($)}}),N(a,xC.STAT_EVENT,k=>{k.stat===W_.PROXY?de(hn,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===W_.NOPROXY&&de(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.$o()},0),w}}function qp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(n){return new VU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t,s=1e3,i=1.5,r=6e4){this.Ti=e,this.timerId=t,this.Go=s,this.zo=i,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-s);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="PersistentStream";class RS{constructor(e,t,s,i,r,o,a,c){this.Ti=e,this.n_=s,this.r_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new SS(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(ji(t.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.i_===t&&this.V_(s,i)},s=>{e(()=>{const i=new Te(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(i)})})}V_(e,t){const s=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{s(()=>this.m_(i))}),this.stream.onMessage(i=>{s(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(XT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(de(XT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x2 extends RS{constructor(e,t,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,i,o),this.serializer=r}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=UU(this.serializer,e),s=function(r){if(!("targetChange"in r))return ke.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?ai(o.readTime):ke.min()}(e);return this.listener.p_(t,s)}y_(e){const t={};t.database=Z_(this.serializer),t.addTarget=function(r,o){let a;const c=o.target;if(a=G_(c)?{documents:HU(r,c)}:{query:WU(r,c).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=mS(r,o.resumeToken);const h=Y_(r,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=$d(r,o.snapshotVersion.toTimestamp());const h=Y_(r,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const s=KU(this.serializer,e);s&&(t.labels=s),this.I_(t)}w_(e){const t={};t.database=Z_(this.serializer),t.removeTarget=e,this.I_(t)}}class L2 extends RS{constructor(e,t,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,o),this.serializer=r}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return lt(!!e.streamToken),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=BU(e.writeResults,e.commitTime),s=ai(e.commitTime);return this.listener.v_(s,t)}C_(){const e={};e.database=Z_(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>jU(this.serializer,s))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{}class V2 extends M2{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Te(Z.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.bo(e,X_(t,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Te(Z.UNKNOWN,r.toString())})}Co(e,t,s,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,X_(t,s),i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(Z.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class F2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ji(t),this.N_=!1):de("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="RemoteStore";class $2{constructor(e,t,s,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(o=>{s.enqueueAndForget(async()=>{Xo(this)&&(de(Uo,"Restarting streams for network reachability change."),await async function(c){const h=Me(c);h.W_.add(4),await Ru(h),h.j_.set("Unknown"),h.W_.delete(4),await jf(h)}(this))})}),this.j_=new F2(s,i)}}async function jf(n){if(Xo(n))for(const e of n.G_)await e(!0)}async function Ru(n){for(const e of n.G_)await e(!1)}function PS(n,e){const t=Me(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Hg(t)?Bg(t):Al(t).c_()&&jg(t,e))}function Ug(n,e){const t=Me(n),s=Al(t);t.U_.delete(e),s.c_()&&NS(t,e),t.U_.size===0&&(s.c_()?s.P_():Xo(t)&&t.j_.set("Unknown"))}function jg(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Al(n).y_(e)}function NS(n,e){n.H_.Ne(e),Al(n).w_(e)}function Bg(n){n.H_=new DU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Al(n).start(),n.j_.B_()}function Hg(n){return Xo(n)&&!Al(n).u_()&&n.U_.size>0}function Xo(n){return Me(n).W_.size===0}function OS(n){n.H_=void 0}async function U2(n){n.j_.set("Online")}async function j2(n){n.U_.forEach((e,t)=>{jg(n,e)})}async function B2(n,e){OS(n),Hg(n)?(n.j_.q_(e),Bg(n)):n.j_.set("Unknown")}async function H2(n,e,t){if(n.j_.set("Online"),e instanceof _S&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.U_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.U_.delete(a),i.H_.removeTarget(a))}(n,e)}catch(s){de(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await jd(n,s)}else if(e instanceof Qh?n.H_.We(e):e instanceof pS?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ke.min()))try{const s=await CS(n.localStore);t.compareTo(s)>=0&&await function(r,o){const a=r.H_.ot(o);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=r.U_.get(h);d&&r.U_.set(h,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,h)=>{const d=r.U_.get(c);if(!d)return;r.U_.set(c,d.withResumeToken(an.EMPTY_BYTE_STRING,d.snapshotVersion)),NS(r,c);const p=new Er(d.target,c,h,d.sequenceNumber);jg(r,p)}),r.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(s){de(Uo,"Failed to raise snapshot:",s),await jd(n,s)}}async function jd(n,e,t){if(!Il(e))throw e;n.W_.add(1),await Ru(n),n.j_.set("Offline"),t||(t=()=>CS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de(Uo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await jf(n)})}function kS(n,e){return e().catch(t=>jd(n,t,e))}async function Bf(n){const e=Me(n),t=Fr(e);let s=e.K_.length>0?e.K_[e.K_.length-1].batchId:Cg;for(;W2(e);)try{const i=await A2(e.localStore,s);if(i===null){e.K_.length===0&&t.P_();break}s=i.batchId,q2(e,i)}catch(i){await jd(e,i)}DS(e)&&xS(e)}function W2(n){return Xo(n)&&n.K_.length<10}function q2(n,e){n.K_.push(e);const t=Fr(n);t.c_()&&t.b_&&t.S_(e.mutations)}function DS(n){return Xo(n)&&!Fr(n).u_()&&n.K_.length>0}function xS(n){Fr(n).start()}async function K2(n){Fr(n).C_()}async function z2(n){const e=Fr(n);for(const t of n.K_)e.S_(t.mutations)}async function G2(n,e,t){const s=n.K_.shift(),i=Dg.from(s,e,t);await kS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Bf(n)}async function Q2(n,e){e&&Fr(n).b_&&await async function(s,i){if(function(o){return NU(o)&&o!==Z.ABORTED}(i.code)){const r=s.K_.shift();Fr(s).h_(),await kS(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Bf(s)}}(n,e),DS(n)&&xS(n)}async function JT(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),de(Uo,"RemoteStore received new credentials");const s=Xo(t);t.W_.add(3),await Ru(t),s&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await jf(t)}async function Y2(n,e){const t=Me(n);e?(t.W_.delete(2),await jf(t)):e||(t.W_.add(2),await Ru(t),t.j_.set("Unknown"))}function Al(n){return n.J_||(n.J_=function(t,s,i){const r=Me(t);return r.M_(),new x2(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{xo:U2.bind(null,n),No:j2.bind(null,n),Lo:B2.bind(null,n),p_:H2.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Hg(n)?Bg(n):n.j_.set("Unknown")):(await n.J_.stop(),OS(n))})),n.J_}function Fr(n){return n.Y_||(n.Y_=function(t,s,i){const r=Me(t);return r.M_(),new L2(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:K2.bind(null,n),Lo:Q2.bind(null,n),D_:z2.bind(null,n),v_:G2.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Bf(n)):(await n.Y_.stop(),n.K_.length>0&&(de(Uo,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t,s,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,r){const o=Date.now()+s,a=new Wg(e,t,o,i,r);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(n,e){if(ji("AsyncQueue",`${e}: ${n}`),Il(n))return new Te(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(e){return new Qa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=mc(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Qa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.Z_=new kt(be.comparator)}track(e){const t=e.doc.key,s=this.Z_.get(t);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(t):e.type===1&&s.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Pe():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class ll{constructor(e,t,s,i,r,o,a,c,h){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,s,i,r){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ll(e,t,Qa.emptySet(t),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==s[i].type||!t[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class J2{constructor(){this.queries=ew(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,s){const i=Me(t),r=i.queries;i.queries=ew(),r.forEach((o,a)=>{for(const c of a.ta)c.onError(s)})})(this,new Te(Z.ABORTED,"Firestore shutting down"))}}function ew(){return new Yo(n=>tS(n),Lf)}async function LS(n,e){const t=Me(n);let s=3;const i=e.query;let r=t.queries.get(i);r?!r.na()&&e.ra()&&(s=2):(r=new X2,s=e.ra()?0:1);try{switch(s){case 0:r.ea=await t.onListen(i,!0);break;case 1:r.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=qg(o,`Initialization of query '${Ra(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,r),r.ta.push(e),e.sa(t.onlineState),r.ea&&e.oa(r.ea)&&Kg(t)}async function MS(n,e){const t=Me(n),s=e.query;let i=3;const r=t.queries.get(s);if(r){const o=r.ta.indexOf(e);o>=0&&(r.ta.splice(o,1),r.ta.length===0?i=e.ra()?0:1:!r.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Z2(n,e){const t=Me(n);let s=!1;for(const i of e){const r=i.query,o=t.queries.get(r);if(o){for(const a of o.ta)a.oa(i)&&(s=!0);o.ea=i}}s&&Kg(t)}function ej(n,e,t){const s=Me(n),i=s.queries.get(e);if(i)for(const r of i.ta)r.onError(t);s.queries.delete(e)}function Kg(n){n.ia.forEach(e=>{e.next()})}var nm,tw;(tw=nm||(nm={}))._a="default",tw.Cache="cache";class VS{constructor(e,t,s){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new ll(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const s=t!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.key=e}}class $S{constructor(e){this.key=e}}class tj{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ge(),this.mutatedKeys=Ge(),this.ya=nS(e),this.wa=new Qa(this.ya)}get ba(){return this.fa}Sa(e,t){const s=t?t.Da:new ZT,i=t?t.wa:this.wa;let r=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const g=i.get(d),y=Mf(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let k=!1;g&&y?g.data.isEqual(y.data)?w!==N&&(s.track({type:3,doc:y}),k=!0):this.va(g,y)||(s.track({type:2,doc:y}),k=!0,(c&&this.ya(y,c)>0||h&&this.ya(y,h)<0)&&(a=!0)):!g&&y?(s.track({type:0,doc:y}),k=!0):g&&!y&&(s.track({type:1,doc:g}),k=!0,(c||h)&&(a=!0)),k&&(y?(o=o.add(y),r=N?r.add(d):r.delete(d)):(o=o.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),r=r.delete(d.key),s.track({type:1,doc:d})}return{wa:o,Da:s,ls:a,mutatedKeys:r}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,i){const r=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((d,p)=>function(y,w){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return N(y)-N(w)}(d.type,p.type)||this.ya(d.doc,p.doc)),this.Ca(s),i=i!=null&&i;const a=t&&!i?this.Fa():[],c=this.pa.size===0&&this.current&&!i?1:0,h=c!==this.ga;return this.ga=c,o.length!==0||h?{snapshot:new ll(this.query,e.wa,r,o,e.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ZT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ge(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const t=[];return e.forEach(s=>{this.pa.has(s)||t.push(new $S(s))}),this.pa.forEach(s=>{e.has(s)||t.push(new FS(s))}),t}Oa(e){this.fa=e.gs,this.pa=Ge();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return ll.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const zg="SyncEngine";class nj{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class sj{constructor(e){this.key=e,this.Ba=!1}}class ij{constructor(e,t,s,i,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Yo(a=>tS(a),Lf),this.qa=new Map,this.Qa=new Set,this.$a=new kt(be.comparator),this.Ka=new Map,this.Ua=new Mg,this.Wa={},this.Ga=new Map,this.za=al.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function rj(n,e,t=!0){const s=qS(n);let i;const r=s.ka.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.Na()):i=await US(s,e,t,!0),i}async function oj(n,e){const t=qS(n);await US(t,e,!0,!1)}async function US(n,e,t,s){const i=await C2(n.localStore,oi(e)),r=i.targetId,o=n.sharedClientState.addLocalQueryTarget(r,t);let a;return s&&(a=await aj(n,e,r,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&PS(n.remoteStore,i),a}async function aj(n,e,t,s,i){n.Ha=(p,g,y)=>async function(N,k,F,$){let K=k.view.Sa(F);K.ls&&(K=await zT(N.localStore,k.query,!1).then(({documents:R})=>k.view.Sa(R,K)));const H=$&&$.targetChanges.get(k.targetId),ce=$&&$.targetMismatches.get(k.targetId)!=null,ae=k.view.applyChanges(K,N.isPrimaryClient,H,ce);return sw(N,k.targetId,ae.Ma),ae.snapshot}(n,p,g,y);const r=await zT(n.localStore,e,!0),o=new tj(e,r.gs),a=o.Sa(r.documents),c=Su.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",i),h=o.applyChanges(a,n.isPrimaryClient,c);sw(n,t,h.Ma);const d=new nj(e,t,o);return n.ka.set(e,d),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),h.snapshot}async function lj(n,e,t){const s=Me(n),i=s.ka.get(e),r=s.qa.get(i.targetId);if(r.length>1)return s.qa.set(i.targetId,r.filter(o=>!Lf(o,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await em(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),t&&Ug(s.remoteStore,i.targetId),sm(s,i.targetId)}).catch(bl)):(sm(s,i.targetId),await em(s.localStore,i.targetId,!0))}async function cj(n,e){const t=Me(n),s=t.ka.get(e),i=t.qa.get(s.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Ug(t.remoteStore,s.targetId))}async function uj(n,e,t){const s=gj(n);try{const i=await function(o,a){const c=Me(o),h=Yt.now(),d=a.reduce((y,w)=>y.add(w.key),Ge());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Bi(),N=Ge();return c.ds.getEntries(y,d).next(k=>{w=k,w.forEach((F,$)=>{$.isValidDocument()||(N=N.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(k=>{p=k;const F=[];for(const $ of a){const K=AU($,p.get($.key).overlayedDocument);K!=null&&F.push(new zr($.key,K,GC(K.value.mapValue),Ls.exists(!0)))}return c.mutationQueue.addMutationBatch(y,h,F,a)}).next(k=>{g=k;const F=k.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(y,k.batchId,F)})}).then(()=>({batchId:g.batchId,changes:iS(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let h=o.Wa[o.currentUser.toKey()];h||(h=new kt(Ye)),h=h.insert(a,c),o.Wa[o.currentUser.toKey()]=h}(s,i.batchId,t),await Pu(s,i.changes),await Bf(s.remoteStore)}catch(i){const r=qg(i,"Failed to persist write");t.reject(r)}}async function jS(n,e){const t=Me(n);try{const s=await b2(t.localStore,e);e.targetChanges.forEach((i,r)=>{const o=t.Ka.get(r);o&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?lt(o.Ba):i.removedDocuments.size>0&&(lt(o.Ba),o.Ba=!1))}),await Pu(t,s,e)}catch(s){await bl(s)}}function nw(n,e,t){const s=Me(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.ka.forEach((r,o)=>{const a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Me(o);c.onlineState=a;let h=!1;c.queries.forEach((d,p)=>{for(const g of p.ta)g.sa(a)&&(h=!0)}),h&&Kg(c)}(s.eventManager,e),i.length&&s.La.p_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function hj(n,e,t){const s=Me(n);s.sharedClientState.updateQueryState(e,"rejected",t);const i=s.Ka.get(e),r=i&&i.key;if(r){let o=new kt(be.comparator);o=o.insert(r,gn.newNoDocument(r,ke.min()));const a=Ge().add(r),c=new $f(ke.min(),new Map,new kt(Ye),o,a);await jS(s,c),s.$a=s.$a.remove(r),s.Ka.delete(e),Gg(s)}else await em(s.localStore,e,!1).then(()=>sm(s,e,t)).catch(bl)}async function dj(n,e){const t=Me(n),s=e.batch.batchId;try{const i=await w2(t.localStore,e);HS(t,s,null),BS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Pu(t,i)}catch(i){await bl(i)}}async function fj(n,e,t){const s=Me(n);try{const i=await function(o,a){const c=Me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,a).next(p=>(lt(p!==null),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(s.localStore,e);HS(s,e,t),BS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Pu(s,i)}catch(i){await bl(i)}}function BS(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function HS(n,e,t){const s=Me(n);let i=s.Wa[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(t?r.reject(t):r.resolve(),i=i.remove(e)),s.Wa[s.currentUser.toKey()]=i}}function sm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.qa.get(e))n.ka.delete(s),t&&n.La.Ja(s,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(s=>{n.Ua.containsKey(s)||WS(n,s)})}function WS(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Ug(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Gg(n))}function sw(n,e,t){for(const s of t)s instanceof FS?(n.Ua.addReference(s.key,e),pj(n,s)):s instanceof $S?(de(zg,"Document no longer in limbo: "+s.key),n.Ua.removeReference(s.key,e),n.Ua.containsKey(s.key)||WS(n,s.key)):Pe()}function pj(n,e){const t=e.key,s=t.path.canonicalString();n.$a.get(t)||n.Qa.has(s)||(de(zg,"New document in limbo: "+t),n.Qa.add(s),Gg(n))}function Gg(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new be(Pt.fromString(e)),s=n.za.next();n.Ka.set(s,new sj(t)),n.$a=n.$a.insert(t,s),PS(n.remoteStore,new Er(oi(xf(t.path)),s,"TargetPurposeLimboResolution",Nf.ae))}}async function Pu(n,e,t){const s=Me(n),i=[],r=[],o=[];s.ka.isEmpty()||(s.ka.forEach((a,c)=>{o.push(s.Ha(c,e,t).then(h=>{var d;if((h||t)&&s.isPrimaryClient){const p=h?!h.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Fg.Yi(c.targetId,h);r.push(p)}}))}),await Promise.all(o),s.La.p_(i),await async function(c,h){const d=Me(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Y.forEach(h,g=>Y.forEach(g.Hi,y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>Y.forEach(g.Ji,y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Il(p))throw p;de($g,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const y=d.Ts.get(g),w=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(w);d.Ts=d.Ts.insert(g,N)}}}(s.localStore,r))}async function _j(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){de(zg,"User change. New user:",e.toKey());const s=await AS(t.localStore,e);t.currentUser=e,function(r,o){r.Ga.forEach(a=>{a.forEach(c=>{c.reject(new Te(Z.CANCELLED,o))})}),r.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Pu(t,s.Rs)}}function mj(n,e){const t=Me(n),s=t.Ka.get(e);if(s&&s.Ba)return Ge().add(s.key);{let i=Ge();const r=t.qa.get(e);if(!r)return i;for(const o of r){const a=t.ka.get(o);i=i.unionWith(a.view.ba)}return i}}function qS(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hj.bind(null,e),e.La.p_=Z2.bind(null,e.eventManager),e.La.Ja=ej.bind(null,e.eventManager),e}function gj(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fj.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return T2(this.persistence,new v2,e.initialUser,this.serializer)}Xa(e){return new IS(Vg.ri,this.serializer)}Za(e){return new R2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class vj extends Bd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){lt(this.persistence.referenceDelegate instanceof Ud);const s=this.persistence.referenceDelegate.garbageCollector;return new s2(s,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new IS(s=>Ud.ri(s,t),this.serializer)}}class im{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>nw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_j.bind(null,this.syncEngine),await Y2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new J2}()}createDatastore(e){const t=Uf(e.databaseInfo.databaseId),s=function(r){return new D2(r)}(e.databaseInfo);return function(r,o,a,c){return new V2(r,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,i,r,o,a){return new $2(s,i,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>nw(this.syncEngine,t,0),function(){return YT.D()?new YT:new P2}())}createSyncEngine(e,t){return function(i,r,o,a,c,h,d){const p=new ij(i,r,o,a,c,h);return d&&(p.ja=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const r=Me(i);de(Uo,"RemoteStore shutting down."),r.W_.add(5),await Ru(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}im.provider={build:()=>new im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class yj{constructor(e,t,s,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=i,this.user=fn.UNAUTHENTICATED,this.clientId=FC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async o=>{de($r,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(de($r,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=qg(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Kp(n,e){n.asyncQueue.verifyOperationInProgress(),de($r,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async i=>{s.isEqual(i)||(await AS(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function iw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ej(n);de($r,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>JT(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,i)=>JT(e.remoteStore,i)),n._onlineComponents=e}async function Ej(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de($r,"Using user provided OfflineComponentProvider");try{await Kp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;sl("Error using user provided cache. Falling back to memory cache: "+t),await Kp(n,new Bd)}}else de($r,"Using default OfflineComponentProvider"),await Kp(n,new vj(void 0));return n._offlineComponents}async function zS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de($r,"Using user provided OnlineComponentProvider"),await iw(n,n._uninitializedComponentsProvider._online)):(de($r,"Using default OnlineComponentProvider"),await iw(n,new im))),n._onlineComponents}function Tj(n){return zS(n).then(e=>e.syncEngine)}async function rm(n){const e=await zS(n),t=e.eventManager;return t.onListen=rj.bind(null,e.syncEngine),t.onUnlisten=lj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cj.bind(null,e.syncEngine),t}function wj(n,e,t={}){const s=new Sr;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,h){const d=new KS({next:g=>{d.su(),o.enqueueAndForget(()=>MS(r,p));const y=g.docs.has(a);!y&&g.fromCache?h.reject(new Te(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?h.reject(new Te(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new VS(xf(a.path),d,{includeMetadataChanges:!0,Ta:!0});return LS(r,p)}(await rm(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(n,e,t){if(!t)throw new Te(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bj(n,e,t,s){if(e===!0&&s===!0)throw new Te(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ow(n){if(!be.isDocumentKey(n))throw new Te(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aw(n){if(be.isDocumentKey(n))throw new Te(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe()}function Ms(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qg(n);throw new Te(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firestore.googleapis.com",lw=!0;class cw{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YS,this.ssl=lw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:lw;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<t2)throw new Te(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new O$;switch(s.type){case"firstParty":return new L$(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Te(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=rw.get(t);s&&(de("ComponentProvider","Removing Datastore"),rw.delete(t),s.terminate())}(this),Promise.resolve()}}function Ij(n,e,t,s={}){var i;const r=(n=Ms(n,Hf))._getSettings(),o=Object.assign(Object.assign({},r),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;r.host!==YS&&r.host!==a&&sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},r),{host:a,ssl:!1,emulatorOptions:s});if(!Pr(c,o)&&(n._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=fn.MOCK_USER;else{h=cI(s.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new Te(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new fn(p)}n._authCredentials=new k$(new VC(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wf(this.firestore,e,this._query)}}class Rn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class Rr extends Wf{constructor(e,t,s){super(e,t,xf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new be(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function yq(n,e,...t){if(n=St(n),QS("collection","path",e),n instanceof Hf){const s=Pt.fromString(e,...t);return aw(s),new Rr(n,null,s)}{if(!(n instanceof Rn||n instanceof Rr))throw new Te(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Pt.fromString(e,...t));return aw(s),new Rr(n.firestore,null,s)}}function uw(n,e,...t){if(n=St(n),arguments.length===1&&(e=FC.newId()),QS("doc","path",e),n instanceof Hf){const s=Pt.fromString(e,...t);return ow(s),new Rn(n,null,new be(s))}{if(!(n instanceof Rn||n instanceof Rr))throw new Te(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Pt.fromString(e,...t));return ow(s),new Rn(n.firestore,n instanceof Rr?n.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="AsyncQueue";class dw{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new SS(this,"async_queue_retry"),this.bu=()=>{const s=qp();s&&de(hw,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=e;const t=qp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=qp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Sr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Il(e))throw e;de(hw,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(s);throw ji("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.pu=!1,s))));return this.Su=t,t}enqueueAfterDelay(e,t,s){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Wg.createAndSchedule(this,e,t,s,r=>this.Fu(r));return this.fu.push(i),i}Du(){this.gu&&Pe()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function fw(n){return function(t,s){if(typeof t!="object"||t===null)return!1;const i=t;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(n,["next","error","complete"])}class jo extends Hf{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new dw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dw(e),this._firestoreClient=void 0,await e}}}function Aj(n,e){const t=typeof n=="object"?n:Mm(),s=typeof n=="string"?n:Dd,i=pf(t,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=oI("firestore");r&&Ij(i,...r)}return i}function Yg(n){if(n._terminated)throw new Te(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Cj(n),n._firestoreClient}function Cj(n){var e,t,s;const i=n._freezeSettings(),r=function(a,c,h,d){return new Q$(a,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GS(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new yj(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cl(an.fromBase64String(e))}catch(t){throw new Te(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cl(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=/^__.*__$/;class Rj{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cu(e,this.data,t,this.fieldTransforms)}}class XS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new zr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class ev{constructor(e,t,s,i,r,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new ev(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:s,Qu:!1});return i.$u(e),i}Ku(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:s,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Hd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(JS(this.Lu)&&Sj.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Pj{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Uf(e)}ju(e,t,s,i=!1){return new ev({Lu:e,methodName:t,zu:s,path:on.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZS(n){const e=n._freezeSettings(),t=Uf(n._databaseId);return new Pj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nj(n,e,t,s,i,r={}){const o=n.ju(r.merge||r.mergeFields?2:0,e,t,i);tv("Data must be an object, but it was:",o,s);const a=eR(s,o);let c,h;if(r.merge)c=new Jn(o.fieldMask),h=o.fieldTransforms;else if(r.mergeFields){const d=[];for(const p of r.mergeFields){const g=om(e,p,t);if(!o.contains(g))throw new Te(Z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);nR(d,g)||d.push(g)}c=new Jn(d),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new Rj(new $n(a),c,h)}class Kf extends Xg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kf}}function Oj(n,e,t,s){const i=n.ju(1,e,t);tv("Data must be an object, but it was:",i,s);const r=[],o=$n.empty();Kr(s,(c,h)=>{const d=nv(e,c,t);h=St(h);const p=i.Ku(d);if(h instanceof Kf)r.push(d);else{const g=zf(h,p);g!=null&&(r.push(d),o.set(d,g))}});const a=new Jn(r);return new XS(o,a,i.fieldTransforms)}function kj(n,e,t,s,i,r){const o=n.ju(1,e,t),a=[om(e,s,t)],c=[i];if(r.length%2!=0)throw new Te(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<r.length;g+=2)a.push(om(e,r[g])),c.push(r[g+1]);const h=[],d=$n.empty();for(let g=a.length-1;g>=0;--g)if(!nR(h,a[g])){const y=a[g];let w=c[g];w=St(w);const N=o.Ku(y);if(w instanceof Kf)h.push(y);else{const k=zf(w,N);k!=null&&(h.push(y),d.set(y,k))}}const p=new Jn(h);return new XS(d,p,o.fieldTransforms)}function zf(n,e){if(tR(n=St(n)))return tv("Unsupported field value:",e,n),eR(n,e);if(n instanceof Xg)return function(s,i){if(!JS(i.Lu))throw i.Wu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let c=zf(a,i.Uu(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(n,e)}return function(s,i){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return yU(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Yt.fromDate(s);return{timestampValue:$d(i.serializer,r)}}if(s instanceof Yt){const r=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$d(i.serializer,r)}}if(s instanceof Jg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof cl)return{bytesValue:mS(i.serializer,s._byteString)};if(s instanceof Rn){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Lg(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Zg)return function(o,a){return{mapValue:{fields:{[KC]:{stringValue:zC},[xd]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw a.Wu("VectorValues must only contain numeric values.");return Og(a.serializer,h)})}}}}}}(s,i);throw i.Wu(`Unsupported field value: ${Qg(s)}`)}(n,e)}function eR(n,e){const t={};return UC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kr(n,(s,i)=>{const r=zf(i,e.qu(s));r!=null&&(t[s]=r)}),{mapValue:{fields:t}}}function tR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yt||n instanceof Jg||n instanceof cl||n instanceof Rn||n instanceof Xg||n instanceof Zg)}function tv(n,e,t){if(!tR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const s=Qg(t);throw s==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+s)}}function om(n,e,t){if((e=St(e))instanceof qf)return e._internalPath;if(typeof e=="string")return nv(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const Dj=new RegExp("[~\\*/\\[\\]]");function nv(n,e,t){if(e.search(Dj)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qf(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hd(n,e,t,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new Te(Z.INVALID_ARGUMENT,a+n+c)}function nR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,s,i,r){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xj extends sR{data(){return super.data()}}function iR(n,e){return typeof e=="string"?nv(n,e):e instanceof qf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mj{convertValue(e,t="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Kr(e,(i,r)=>{s[i]=this.convertValue(r,t)}),s}convertVectorValue(e){var t,s,i;const r=(i=(s=(t=e.fields)===null||t===void 0?void 0:t[xd].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(o=>Ft(o.doubleValue));return new Zg(r)}convertGeoPoint(e){return new Jg(Ft(e.latitude),Ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=kf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const t=Lr(e);return new Yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Pt.fromString(e);lt(wS(s));const i=new lu(s.get(1),s.get(3)),r=new be(s.popFirst(5));return i.isEqual(t)||ji(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(n,e,t){let s;return s=n?n.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rR extends sR{constructor(e,t,s,i,r,o){super(e,t,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(iR("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Yh extends rR{data(e={}){return super.data(e)}}class Fj{constructor(e,t,s,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vc(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Yh(this._firestore,this._userDataWriter,s.key,s,new vc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new Yh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const c=new Yh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:$j(a.type),doc:c,oldIndex:h,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $j(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(n){n=Ms(n,Rn);const e=Ms(n.firestore,jo);return wj(Yg(e),n._key).then(t=>aR(e,n,t))}class oR extends Mj{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}function Eq(n,e,t){n=Ms(n,Rn);const s=Ms(n.firestore,jo),i=Vj(n.converter,e);return sv(s,[Nj(ZS(s),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ls.none())])}function jj(n,e,t,...s){n=Ms(n,Rn);const i=Ms(n.firestore,jo),r=ZS(i);let o;return o=typeof(e=St(e))=="string"||e instanceof qf?kj(r,"updateDoc",n._key,e,t,s):Oj(r,"updateDoc",n._key,e),sv(i,[o.toMutation(n._key,Ls.exists(!0))])}function Tq(n){return sv(Ms(n.firestore,jo),[new kg(n._key,Ls.none())])}function Bj(n,...e){var t,s,i;n=St(n);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fw(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(fw(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(s=p.error)===null||s===void 0?void 0:s.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,h,d;if(n instanceof Rn)h=Ms(n.firestore,jo),d=xf(n._key.path),c={next:p=>{e[o]&&e[o](aR(h,n,p))},error:e[o+1],complete:e[o+2]};else{const p=Ms(n,Wf);h=Ms(p.firestore,jo),d=p._query;const g=new oR(h);c={next:y=>{e[o]&&e[o](new Fj(h,g,p,y))},error:e[o+1],complete:e[o+2]},Lj(n._query)}return function(g,y,w,N){const k=new KS(N),F=new VS(y,k,w);return g.asyncQueue.enqueueAndForget(async()=>LS(await rm(g),F)),()=>{k.su(),g.asyncQueue.enqueueAndForget(async()=>MS(await rm(g),F))}}(Yg(h),d,a,c)}function sv(n,e){return function(s,i){const r=new Sr;return s.asyncQueue.enqueueAndForget(async()=>uj(await Tj(s),i,r)),r.promise}(Yg(n),e)}function aR(n,e,t){const s=t.docs.get(e._key),i=new oR(n);return new rR(n,i,e._key,s,new vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){wl=i})(zo),Do(new Nr("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new jo(new D$(s.getProvider("auth-internal")),new M$(o,s.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Te(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(h.options.projectId,d)}(o,i),o);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),si(vT,yT,e),si(vT,yT,"esm2017")})();const Hj={apiKey:"AIzaSyDjdEDogtnyU8YlhMOKV2k_f8XdcRblweA",authDomain:"minidnf-2626f.firebaseapp.com",projectId:"minidnf-2626f",storageBucket:"minidnf-2626f.firebasestorage.app",messagingSenderId:"736415077058",appId:"1:736415077058:web:f7dd041a5e2f850e56a15b",measurementId:"G-NVHCKJMK5L",databaseURL:"https://minidnf-2626f-default-rtdb.firebaseio.com"},iv=pI(Hj);Gc(iv);R$(iv);const pw=Aj(iv),Wj={class:"game-container"},qj={class:"status-bar"},Kj={class:"d-flex justify-content-between align-items-center p-2 bg-dark text-light"},zj={class:"d-flex gap-3"},Gj={class:"badge bg-primary"},Qj={class:"badge bg-info"},Yj={class:"badge bg-secondary"},Xj={class:"badge bg-warning text-dark"},Jj={class:"badge bg-warning text-dark"},Zj={class:"game-main"},eB={class:"battle-area"},tB={class:"battle-log"},nB={class:"log-content"},sB={class:"function-bar"},iB={class:"d-flex justify-content-between align-items-center p-2 bg-light"},rB=["onClick"],oB={__name:"Game",setup(n){const e=uA(),t=BM(),s=t.query.character?JSON.parse(t.query.character):{},i=dn(s.name||""),r=dn(s.level||1),o=dn(0),a=dn(1e3),c=dn(s.class||""),h=dn(["DNF"]);let d=null;const p=async k=>{k.preventDefault();try{await N()}catch(F){console.error(":",F)}delete k.returnValue};of(()=>{var K;const F=(K=Gc().currentUser)==null?void 0:K.uid,$=s.id;if(F&&$){h.value.push("...");const H=uw(pw,`users/${F}/characters/${$}`);d=Bj(H,ce=>{if(ce.exists()){const ae=ce.data();if(i.value=ae.name||i.value,r.value=ae.level||r.value,c.value=ae.class||c.value,ae.currency){const R=o.value,b=a.value;o.value=ae.currency.points||0,a.value=ae.currency.gold||1e3,R!==o.value&&h.value.push(`: ${R}  ${o.value}`),b!==a.value&&h.value.push(`: ${b}  ${a.value}`)}h.value.push(`: ${new Date().toLocaleTimeString()}`)}else h.value.push(": !")},ce=>{console.error(":",ce),h.value.push(`:  - ${ce.message}`)}),window.addEventListener("beforeunload",p)}else h.value.push(": ID")}),Pm(()=>{N(),window.removeEventListener("beforeunload",p),d&&d()});const g=[{label:"",icon:"bi-person",action:"character"},{label:"",icon:"bi-bag",action:"inventory"},{label:"",icon:"bi-lightning",action:"skills"},{label:"",icon:"bi-journal-text",action:"quests"},{label:"",icon:"bi-door-open",action:"dungeon"},{label:"",icon:"bi-calendar-event",action:"events"},{label:"",icon:"bi-shop",action:"shop"},{label:"",icon:"bi-stars",action:"enhance"},{label:"",icon:"bi-envelope",action:"mail"},{label:"",icon:"bi-hammer",action:"auction"},{label:"",icon:"bi-gear",action:"settings"}],y=async k=>{console.log(":",k)},w=async()=>{await N(),e.push("/characters")},N=async()=>{var K;const F=(K=Gc().currentUser)==null?void 0:K.uid,$=s.id;if(F&&$)try{const H=new Date,ae=new Date(H.getTime()+8*60*60*1e3).toISOString(),R=uw(pw,`users/${F}/characters/${$}`);(await Uj(R)).exists()?(await jj(R,{lastPlayTime:ae}),console.log(":",ae)):console.error("")}catch(H){console.error(":",H)}};return(k,F)=>(Fn(),Ss("div",Wj,[ge("div",qj,[ge("div",Kj,[ge("div",zj,[ge("span",Gj,As(i.value),1),ge("span",Qj,"Lv."+As(r.value),1),ge("span",Yj,As(c.value),1),ge("span",Xj,[F[0]||(F[0]=ge("i",{class:"bi bi-cash"},null,-1)),bo(" "+As(o.value),1)]),ge("span",Jj,[F[1]||(F[1]=ge("i",{class:"bi bi-coin"},null,-1)),bo(" "+As(a.value),1)])]),ge("button",{class:"btn btn-outline-light btn-sm",onClick:w},F[2]||(F[2]=[ge("i",{class:"bi bi-arrow-left-circle me-1"},null,-1),bo(" ")]))])]),ge("div",Zj,[ge("div",eB,[F[4]||(F[4]=ge("div",{class:"battle-display"},[ge("h5",{class:"text-center"},"")],-1)),ge("div",tB,[F[3]||(F[3]=ge("h5",{class:"mb-2"},"",-1)),ge("div",nB,[(Fn(!0),Ss(Cs,null,my(h.value,($,K)=>(Fn(),Ss("div",{key:K,class:"log-item"},As($),1))),128))])])])]),ge("div",sB,[ge("div",iB,[(Fn(),Ss(Cs,null,my(g,($,K)=>ge("button",{key:K,class:"btn btn-outline-primary",onClick:H=>y($.action)},[ge("i",{class:Zd(`bi ${$.icon} me-1`)},null,2),bo(" "+As($.label),1)],8,rB)),64))])])]))}},aB=hA(oB,[["__scopeId","data-v-82d3400a"]]),lB=UM({history:_M("./"),routes:[{path:"/",redirect:"/characters"},{path:"/game",name:"game",component:aB,props:n=>({character:JSON.parse(n.query.character||"{}")})},{path:"/characters",name:"characters",component:()=>EV(()=>import("./CharacterList-CwNjEGsI.js"),__vite__mapDeps([0,1]),import.meta.url)}]});var Pn="top",Zn="bottom",es="right",Nn="left",Gf="auto",Cl=[Pn,Zn,es,Nn],Bo="start",ul="end",lR="clippingParents",rv="viewport",Oa="popper",cR="reference",am=Cl.reduce(function(n,e){return n.concat([e+"-"+Bo,e+"-"+ul])},[]),ov=[].concat(Cl,[Gf]).reduce(function(n,e){return n.concat([e,e+"-"+Bo,e+"-"+ul])},[]),uR="beforeRead",hR="read",dR="afterRead",fR="beforeMain",pR="main",_R="afterMain",mR="beforeWrite",gR="write",vR="afterWrite",yR=[uR,hR,dR,fR,pR,_R,mR,gR,vR];function pi(n){return n?(n.nodeName||"").toLowerCase():null}function ts(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ho(n){var e=ts(n).Element;return n instanceof e||n instanceof Element}function ds(n){var e=ts(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function av(n){if(typeof ShadowRoot>"u")return!1;var e=ts(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function cB(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var s=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];!ds(r)||!pi(r)||(Object.assign(r.style,s),Object.keys(i).forEach(function(o){var a=i[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function uB(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(s){var i=e.elements[s],r=e.attributes[s]||{},o=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:t[s]),a=o.reduce(function(c,h){return c[h]="",c},{});!ds(i)||!pi(i)||(Object.assign(i.style,a),Object.keys(r).forEach(function(c){i.removeAttribute(c)}))})}}const lv={name:"applyStyles",enabled:!0,phase:"write",fn:cB,effect:uB,requires:["computeStyles"]};function li(n){return n.split("-")[0]}var No=Math.max,Wd=Math.min,hl=Math.round;function lm(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ER(){return!/^((?!chrome|android).)*safari/i.test(lm())}function dl(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var s=n.getBoundingClientRect(),i=1,r=1;e&&ds(n)&&(i=n.offsetWidth>0&&hl(s.width)/n.offsetWidth||1,r=n.offsetHeight>0&&hl(s.height)/n.offsetHeight||1);var o=Ho(n)?ts(n):window,a=o.visualViewport,c=!ER()&&t,h=(s.left+(c&&a?a.offsetLeft:0))/i,d=(s.top+(c&&a?a.offsetTop:0))/r,p=s.width/i,g=s.height/r;return{width:p,height:g,top:d,right:h+p,bottom:d+g,left:h,x:h,y:d}}function cv(n){var e=dl(n),t=n.offsetWidth,s=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:s}}function TR(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&av(t)){var s=e;do{if(s&&n.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Hi(n){return ts(n).getComputedStyle(n)}function hB(n){return["table","td","th"].indexOf(pi(n))>=0}function Gr(n){return((Ho(n)?n.ownerDocument:n.document)||window.document).documentElement}function Qf(n){return pi(n)==="html"?n:n.assignedSlot||n.parentNode||(av(n)?n.host:null)||Gr(n)}function _w(n){return!ds(n)||Hi(n).position==="fixed"?null:n.offsetParent}function dB(n){var e=/firefox/i.test(lm()),t=/Trident/i.test(lm());if(t&&ds(n)){var s=Hi(n);if(s.position==="fixed")return null}var i=Qf(n);for(av(i)&&(i=i.host);ds(i)&&["html","body"].indexOf(pi(i))<0;){var r=Hi(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function Nu(n){for(var e=ts(n),t=_w(n);t&&hB(t)&&Hi(t).position==="static";)t=_w(t);return t&&(pi(t)==="html"||pi(t)==="body"&&Hi(t).position==="static")?e:t||dB(n)||e}function uv(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Vc(n,e,t){return No(n,Wd(e,t))}function fB(n,e,t){var s=Vc(n,e,t);return s>t?t:s}function wR(){return{top:0,right:0,bottom:0,left:0}}function bR(n){return Object.assign({},wR(),n)}function IR(n,e){return e.reduce(function(t,s){return t[s]=n,t},{})}var pB=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,bR(typeof e!="number"?e:IR(e,Cl))};function _B(n){var e,t=n.state,s=n.name,i=n.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=li(t.placement),c=uv(a),h=[Nn,es].indexOf(a)>=0,d=h?"height":"width";if(!(!r||!o)){var p=pB(i.padding,t),g=cv(r),y=c==="y"?Pn:Nn,w=c==="y"?Zn:es,N=t.rects.reference[d]+t.rects.reference[c]-o[c]-t.rects.popper[d],k=o[c]-t.rects.reference[c],F=Nu(r),$=F?c==="y"?F.clientHeight||0:F.clientWidth||0:0,K=N/2-k/2,H=p[y],ce=$-g[d]-p[w],ae=$/2-g[d]/2+K,R=Vc(H,ae,ce),b=c;t.modifiersData[s]=(e={},e[b]=R,e.centerOffset=R-ae,e)}}function mB(n){var e=n.state,t=n.options,s=t.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||TR(e.elements.popper,i)&&(e.elements.arrow=i))}const AR={name:"arrow",enabled:!0,phase:"main",fn:_B,effect:mB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fl(n){return n.split("-")[1]}var gB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function vB(n,e){var t=n.x,s=n.y,i=e.devicePixelRatio||1;return{x:hl(t*i)/i||0,y:hl(s*i)/i||0}}function mw(n){var e,t=n.popper,s=n.popperRect,i=n.placement,r=n.variation,o=n.offsets,a=n.position,c=n.gpuAcceleration,h=n.adaptive,d=n.roundOffsets,p=n.isFixed,g=o.x,y=g===void 0?0:g,w=o.y,N=w===void 0?0:w,k=typeof d=="function"?d({x:y,y:N}):{x:y,y:N};y=k.x,N=k.y;var F=o.hasOwnProperty("x"),$=o.hasOwnProperty("y"),K=Nn,H=Pn,ce=window;if(h){var ae=Nu(t),R="clientHeight",b="clientWidth";if(ae===ts(t)&&(ae=Gr(t),Hi(ae).position!=="static"&&a==="absolute"&&(R="scrollHeight",b="scrollWidth")),ae=ae,i===Pn||(i===Nn||i===es)&&r===ul){H=Zn;var A=p&&ae===ce&&ce.visualViewport?ce.visualViewport.height:ae[R];N-=A-s.height,N*=c?1:-1}if(i===Nn||(i===Pn||i===Zn)&&r===ul){K=es;var P=p&&ae===ce&&ce.visualViewport?ce.visualViewport.width:ae[b];y-=P-s.width,y*=c?1:-1}}var O=Object.assign({position:a},h&&gB),x=d===!0?vB({x:y,y:N},ts(t)):{x:y,y:N};if(y=x.x,N=x.y,c){var C;return Object.assign({},O,(C={},C[H]=$?"0":"",C[K]=F?"0":"",C.transform=(ce.devicePixelRatio||1)<=1?"translate("+y+"px, "+N+"px)":"translate3d("+y+"px, "+N+"px, 0)",C))}return Object.assign({},O,(e={},e[H]=$?N+"px":"",e[K]=F?y+"px":"",e.transform="",e))}function yB(n){var e=n.state,t=n.options,s=t.gpuAcceleration,i=s===void 0?!0:s,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,c=a===void 0?!0:a,h={placement:li(e.placement),variation:fl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mw(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mw(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const hv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:yB,data:{}};var Ch={passive:!0};function EB(n){var e=n.state,t=n.instance,s=n.options,i=s.scroll,r=i===void 0?!0:i,o=s.resize,a=o===void 0?!0:o,c=ts(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&h.forEach(function(d){d.addEventListener("scroll",t.update,Ch)}),a&&c.addEventListener("resize",t.update,Ch),function(){r&&h.forEach(function(d){d.removeEventListener("scroll",t.update,Ch)}),a&&c.removeEventListener("resize",t.update,Ch)}}const dv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:EB,data:{}};var TB={left:"right",right:"left",bottom:"top",top:"bottom"};function Xh(n){return n.replace(/left|right|bottom|top/g,function(e){return TB[e]})}var wB={start:"end",end:"start"};function gw(n){return n.replace(/start|end/g,function(e){return wB[e]})}function fv(n){var e=ts(n),t=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:t,scrollTop:s}}function pv(n){return dl(Gr(n)).left+fv(n).scrollLeft}function bB(n,e){var t=ts(n),s=Gr(n),i=t.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,c=0;if(i){r=i.width,o=i.height;var h=ER();(h||!h&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:r,height:o,x:a+pv(n),y:c}}function IB(n){var e,t=Gr(n),s=fv(n),i=(e=n.ownerDocument)==null?void 0:e.body,r=No(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=No(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-s.scrollLeft+pv(n),c=-s.scrollTop;return Hi(i||t).direction==="rtl"&&(a+=No(t.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:c}}function _v(n){var e=Hi(n),t=e.overflow,s=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+s)}function CR(n){return["html","body","#document"].indexOf(pi(n))>=0?n.ownerDocument.body:ds(n)&&_v(n)?n:CR(Qf(n))}function Fc(n,e){var t;e===void 0&&(e=[]);var s=CR(n),i=s===((t=n.ownerDocument)==null?void 0:t.body),r=ts(s),o=i?[r].concat(r.visualViewport||[],_v(s)?s:[]):s,a=e.concat(o);return i?a:a.concat(Fc(Qf(o)))}function cm(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function AB(n,e){var t=dl(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function vw(n,e,t){return e===rv?cm(bB(n,t)):Ho(e)?AB(e,t):cm(IB(Gr(n)))}function CB(n){var e=Fc(Qf(n)),t=["absolute","fixed"].indexOf(Hi(n).position)>=0,s=t&&ds(n)?Nu(n):n;return Ho(s)?e.filter(function(i){return Ho(i)&&TR(i,s)&&pi(i)!=="body"}):[]}function SB(n,e,t,s){var i=e==="clippingParents"?CB(n):[].concat(e),r=[].concat(i,[t]),o=r[0],a=r.reduce(function(c,h){var d=vw(n,h,s);return c.top=No(d.top,c.top),c.right=Wd(d.right,c.right),c.bottom=Wd(d.bottom,c.bottom),c.left=No(d.left,c.left),c},vw(n,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function SR(n){var e=n.reference,t=n.element,s=n.placement,i=s?li(s):null,r=s?fl(s):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,c;switch(i){case Pn:c={x:o,y:e.y-t.height};break;case Zn:c={x:o,y:e.y+e.height};break;case es:c={x:e.x+e.width,y:a};break;case Nn:c={x:e.x-t.width,y:a};break;default:c={x:e.x,y:e.y}}var h=i?uv(i):null;if(h!=null){var d=h==="y"?"height":"width";switch(r){case Bo:c[h]=c[h]-(e[d]/2-t[d]/2);break;case ul:c[h]=c[h]+(e[d]/2-t[d]/2);break}}return c}function pl(n,e){e===void 0&&(e={});var t=e,s=t.placement,i=s===void 0?n.placement:s,r=t.strategy,o=r===void 0?n.strategy:r,a=t.boundary,c=a===void 0?lR:a,h=t.rootBoundary,d=h===void 0?rv:h,p=t.elementContext,g=p===void 0?Oa:p,y=t.altBoundary,w=y===void 0?!1:y,N=t.padding,k=N===void 0?0:N,F=bR(typeof k!="number"?k:IR(k,Cl)),$=g===Oa?cR:Oa,K=n.rects.popper,H=n.elements[w?$:g],ce=SB(Ho(H)?H:H.contextElement||Gr(n.elements.popper),c,d,o),ae=dl(n.elements.reference),R=SR({reference:ae,element:K,placement:i}),b=cm(Object.assign({},K,R)),A=g===Oa?b:ae,P={top:ce.top-A.top+F.top,bottom:A.bottom-ce.bottom+F.bottom,left:ce.left-A.left+F.left,right:A.right-ce.right+F.right},O=n.modifiersData.offset;if(g===Oa&&O){var x=O[i];Object.keys(P).forEach(function(C){var vt=[es,Zn].indexOf(C)>=0?1:-1,Nt=[Pn,Zn].indexOf(C)>=0?"y":"x";P[C]+=x[Nt]*vt})}return P}function RB(n,e){e===void 0&&(e={});var t=e,s=t.placement,i=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,c=t.allowedAutoPlacements,h=c===void 0?ov:c,d=fl(s),p=d?a?am:am.filter(function(w){return fl(w)===d}):Cl,g=p.filter(function(w){return h.indexOf(w)>=0});g.length===0&&(g=p);var y=g.reduce(function(w,N){return w[N]=pl(n,{placement:N,boundary:i,rootBoundary:r,padding:o})[li(N)],w},{});return Object.keys(y).sort(function(w,N){return y[w]-y[N]})}function PB(n){if(li(n)===Gf)return[];var e=Xh(n);return[gw(n),e,gw(e)]}function NB(n){var e=n.state,t=n.options,s=n.name;if(!e.modifiersData[s]._skip){for(var i=t.mainAxis,r=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!0:o,c=t.fallbackPlacements,h=t.padding,d=t.boundary,p=t.rootBoundary,g=t.altBoundary,y=t.flipVariations,w=y===void 0?!0:y,N=t.allowedAutoPlacements,k=e.options.placement,F=li(k),$=F===k,K=c||($||!w?[Xh(k)]:PB(k)),H=[k].concat(K).reduce(function(It,At){return It.concat(li(At)===Gf?RB(e,{placement:At,boundary:d,rootBoundary:p,padding:h,flipVariations:w,allowedAutoPlacements:N}):At)},[]),ce=e.rects.reference,ae=e.rects.popper,R=new Map,b=!0,A=H[0],P=0;P<H.length;P++){var O=H[P],x=li(O),C=fl(O)===Bo,vt=[Pn,Zn].indexOf(x)>=0,Nt=vt?"width":"height",qe=pl(e,{placement:O,boundary:d,rootBoundary:p,altBoundary:g,padding:h}),Ae=vt?C?es:Nn:C?Zn:Pn;ce[Nt]>ae[Nt]&&(Ae=Xh(Ae));var Ve=Xh(Ae),Rt=[];if(r&&Rt.push(qe[x]<=0),a&&Rt.push(qe[Ae]<=0,qe[Ve]<=0),Rt.every(function(It){return It})){A=O,b=!1;break}R.set(O,Rt)}if(b)for(var G=w?3:1,$t=function(At){var tt=H.find(function(W){var B=R.get(W);if(B)return B.slice(0,At).every(function(ie){return ie})});if(tt)return A=tt,"break"},Ze=G;Ze>0;Ze--){var et=$t(Ze);if(et==="break")break}e.placement!==A&&(e.modifiersData[s]._skip=!0,e.placement=A,e.reset=!0)}}const RR={name:"flip",enabled:!0,phase:"main",fn:NB,requiresIfExists:["offset"],data:{_skip:!1}};function yw(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function Ew(n){return[Pn,es,Zn,Nn].some(function(e){return n[e]>=0})}function OB(n){var e=n.state,t=n.name,s=e.rects.reference,i=e.rects.popper,r=e.modifiersData.preventOverflow,o=pl(e,{elementContext:"reference"}),a=pl(e,{altBoundary:!0}),c=yw(o,s),h=yw(a,i,r),d=Ew(c),p=Ew(h);e.modifiersData[t]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:d,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const PR={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:OB};function kB(n,e,t){var s=li(n),i=[Nn,Pn].indexOf(s)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[Nn,es].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function DB(n){var e=n.state,t=n.options,s=n.name,i=t.offset,r=i===void 0?[0,0]:i,o=ov.reduce(function(d,p){return d[p]=kB(p,e.rects,r),d},{}),a=o[e.placement],c=a.x,h=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=h),e.modifiersData[s]=o}const NR={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:DB};function xB(n){var e=n.state,t=n.name;e.modifiersData[t]=SR({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const mv={name:"popperOffsets",enabled:!0,phase:"read",fn:xB,data:{}};function LB(n){return n==="x"?"y":"x"}function MB(n){var e=n.state,t=n.options,s=n.name,i=t.mainAxis,r=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!1:o,c=t.boundary,h=t.rootBoundary,d=t.altBoundary,p=t.padding,g=t.tether,y=g===void 0?!0:g,w=t.tetherOffset,N=w===void 0?0:w,k=pl(e,{boundary:c,rootBoundary:h,padding:p,altBoundary:d}),F=li(e.placement),$=fl(e.placement),K=!$,H=uv(F),ce=LB(H),ae=e.modifiersData.popperOffsets,R=e.rects.reference,b=e.rects.popper,A=typeof N=="function"?N(Object.assign({},e.rects,{placement:e.placement})):N,P=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,x={x:0,y:0};if(ae){if(r){var C,vt=H==="y"?Pn:Nn,Nt=H==="y"?Zn:es,qe=H==="y"?"height":"width",Ae=ae[H],Ve=Ae+k[vt],Rt=Ae-k[Nt],G=y?-b[qe]/2:0,$t=$===Bo?R[qe]:b[qe],Ze=$===Bo?-b[qe]:-R[qe],et=e.elements.arrow,It=y&&et?cv(et):{width:0,height:0},At=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:wR(),tt=At[vt],W=At[Nt],B=Vc(0,R[qe],It[qe]),ie=K?R[qe]/2-G-B-tt-P.mainAxis:$t-B-tt-P.mainAxis,fe=K?-R[qe]/2+G+B+W+P.mainAxis:Ze+B+W+P.mainAxis,je=e.elements.arrow&&Nu(e.elements.arrow),I=je?H==="y"?je.clientTop||0:je.clientLeft||0:0,S=(C=O==null?void 0:O[H])!=null?C:0,M=Ae+ie-S-I,q=Ae+fe-S,z=Vc(y?Wd(Ve,M):Ve,Ae,y?No(Rt,q):Rt);ae[H]=z,x[H]=z-Ae}if(a){var Q,le=H==="x"?Pn:Nn,se=H==="x"?Zn:es,te=ae[ce],J=ce==="y"?"height":"width",Ee=te+k[le],ue=te-k[se],_e=[Pn,Nn].indexOf(F)!==-1,ve=(Q=O==null?void 0:O[ce])!=null?Q:0,ye=_e?Ee:te-R[J]-b[J]-ve+P.altAxis,Ie=_e?te+R[J]+b[J]-ve-P.altAxis:ue,De=y&&_e?fB(ye,te,Ie):Vc(y?ye:Ee,te,y?Ie:ue);ae[ce]=De,x[ce]=De-te}e.modifiersData[s]=x}}const OR={name:"preventOverflow",enabled:!0,phase:"main",fn:MB,requiresIfExists:["offset"]};function VB(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function FB(n){return n===ts(n)||!ds(n)?fv(n):VB(n)}function $B(n){var e=n.getBoundingClientRect(),t=hl(e.width)/n.offsetWidth||1,s=hl(e.height)/n.offsetHeight||1;return t!==1||s!==1}function UB(n,e,t){t===void 0&&(t=!1);var s=ds(e),i=ds(e)&&$B(e),r=Gr(e),o=dl(n,i,t),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!t)&&((pi(e)!=="body"||_v(r))&&(a=FB(e)),ds(e)?(c=dl(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):r&&(c.x=pv(r))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function jB(n){var e=new Map,t=new Set,s=[];n.forEach(function(r){e.set(r.name,r)});function i(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var c=e.get(a);c&&i(c)}}),s.push(r)}return n.forEach(function(r){t.has(r.name)||i(r)}),s}function BB(n){var e=jB(n);return yR.reduce(function(t,s){return t.concat(e.filter(function(i){return i.phase===s}))},[])}function HB(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function WB(n){var e=n.reduce(function(t,s){var i=t[s.name];return t[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,t},{});return Object.keys(e).map(function(t){return e[t]})}var Tw={placement:"bottom",modifiers:[],strategy:"absolute"};function ww(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Yf(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,s=t===void 0?[]:t,i=e.defaultOptions,r=i===void 0?Tw:i;return function(a,c,h){h===void 0&&(h=r);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Tw,r),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},p=[],g=!1,y={state:d,setOptions:function(F){var $=typeof F=="function"?F(d.options):F;N(),d.options=Object.assign({},r,d.options,$),d.scrollParents={reference:Ho(a)?Fc(a):a.contextElement?Fc(a.contextElement):[],popper:Fc(c)};var K=BB(WB([].concat(s,d.options.modifiers)));return d.orderedModifiers=K.filter(function(H){return H.enabled}),w(),y.update()},forceUpdate:function(){if(!g){var F=d.elements,$=F.reference,K=F.popper;if(ww($,K)){d.rects={reference:UB($,Nu(K),d.options.strategy==="fixed"),popper:cv(K)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(P){return d.modifiersData[P.name]=Object.assign({},P.data)});for(var H=0;H<d.orderedModifiers.length;H++){if(d.reset===!0){d.reset=!1,H=-1;continue}var ce=d.orderedModifiers[H],ae=ce.fn,R=ce.options,b=R===void 0?{}:R,A=ce.name;typeof ae=="function"&&(d=ae({state:d,options:b,name:A,instance:y})||d)}}}},update:HB(function(){return new Promise(function(k){y.forceUpdate(),k(d)})}),destroy:function(){N(),g=!0}};if(!ww(a,c))return y;y.setOptions(h).then(function(k){!g&&h.onFirstUpdate&&h.onFirstUpdate(k)});function w(){d.orderedModifiers.forEach(function(k){var F=k.name,$=k.options,K=$===void 0?{}:$,H=k.effect;if(typeof H=="function"){var ce=H({state:d,name:F,instance:y,options:K}),ae=function(){};p.push(ce||ae)}})}function N(){p.forEach(function(k){return k()}),p=[]}return y}}var qB=Yf(),KB=[dv,mv,hv,lv],zB=Yf({defaultModifiers:KB}),GB=[dv,mv,hv,lv,NR,RR,OR,AR,PR],gv=Yf({defaultModifiers:GB});const kR=Object.freeze(Object.defineProperty({__proto__:null,afterMain:_R,afterRead:dR,afterWrite:vR,applyStyles:lv,arrow:AR,auto:Gf,basePlacements:Cl,beforeMain:fR,beforeRead:uR,beforeWrite:mR,bottom:Zn,clippingParents:lR,computeStyles:hv,createPopper:gv,createPopperBase:qB,createPopperLite:zB,detectOverflow:pl,end:ul,eventListeners:dv,flip:RR,hide:PR,left:Nn,main:pR,modifierPhases:yR,offset:NR,placements:ov,popper:Oa,popperGenerator:Yf,popperOffsets:mv,preventOverflow:OR,read:hR,reference:cR,right:es,start:Bo,top:Pn,variationPlacements:am,viewport:rv,write:gR},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const dr=new Map,zp={set(n,e,t){dr.has(n)||dr.set(n,new Map);const s=dr.get(n);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,t)},get(n,e){return dr.has(n)&&dr.get(n).get(e)||null},remove(n,e){if(!dr.has(n))return;const t=dr.get(n);t.delete(e),t.size===0&&dr.delete(n)}},QB=1e6,YB=1e3,um="transitionend",DR=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),n),XB=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),JB=n=>{do n+=Math.floor(Math.random()*QB);while(document.getElementById(n));return n},ZB=n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const s=Number.parseFloat(e),i=Number.parseFloat(t);return!s&&!i?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*YB)},xR=n=>{n.dispatchEvent(new Event(um))},Mi=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Ur=n=>Mi(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(DR(n)):null,Sl=n=>{if(!Mi(n)||n.getClientRects().length===0)return!1;const e=getComputedStyle(n).getPropertyValue("visibility")==="visible",t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const s=n.closest("summary");if(s&&s.parentNode!==t||s===null)return!1}return e},jr=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",LR=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?LR(n.parentNode):null},qd=()=>{},Ou=n=>{n.offsetHeight},MR=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Gp=[],eH=n=>{document.readyState==="loading"?(Gp.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Gp)e()}),Gp.push(n)):n()},ps=()=>document.documentElement.dir==="rtl",ms=n=>{eH(()=>{const e=MR();if(e){const t=n.NAME,s=e.fn[t];e.fn[t]=n.jQueryInterface,e.fn[t].Constructor=n,e.fn[t].noConflict=()=>(e.fn[t]=s,n.jQueryInterface)}})},Un=(n,e=[],t=n)=>typeof n=="function"?n(...e):t,VR=(n,e,t=!0)=>{if(!t){Un(n);return}const i=ZB(e)+5;let r=!1;const o=({target:a})=>{a===e&&(r=!0,e.removeEventListener(um,o),Un(n))};e.addEventListener(um,o),setTimeout(()=>{r||xR(e)},i)},vv=(n,e,t,s)=>{const i=n.length;let r=n.indexOf(e);return r===-1?!t&&s?n[i-1]:n[0]:(r+=t?1:-1,s&&(r=(r+i)%i),n[Math.max(0,Math.min(r,i-1))])},tH=/[^.]*(?=\..*)\.|.*/,nH=/\..*/,sH=/::\d+$/,Qp={};let bw=1;const FR={mouseenter:"mouseover",mouseleave:"mouseout"},iH=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function $R(n,e){return e&&`${e}::${bw++}`||n.uidEvent||bw++}function UR(n){const e=$R(n);return n.uidEvent=e,Qp[e]=Qp[e]||{},Qp[e]}function rH(n,e){return function t(s){return yv(s,{delegateTarget:n}),t.oneOff&&ee.off(n,s.type,e),e.apply(n,[s])}}function oH(n,e,t){return function s(i){const r=n.querySelectorAll(e);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return yv(i,{delegateTarget:o}),s.oneOff&&ee.off(n,i.type,e,t),t.apply(o,[i])}}function jR(n,e,t=null){return Object.values(n).find(s=>s.callable===e&&s.delegationSelector===t)}function BR(n,e,t){const s=typeof e=="string",i=s?t:e||t;let r=HR(n);return iH.has(r)||(r=n),[s,i,r]}function Iw(n,e,t,s,i){if(typeof e!="string"||!n)return;let[r,o,a]=BR(e,t,s);e in FR&&(o=(w=>function(N){if(!N.relatedTarget||N.relatedTarget!==N.delegateTarget&&!N.delegateTarget.contains(N.relatedTarget))return w.call(this,N)})(o));const c=UR(n),h=c[a]||(c[a]={}),d=jR(h,o,r?t:null);if(d){d.oneOff=d.oneOff&&i;return}const p=$R(o,e.replace(tH,"")),g=r?oH(n,t,o):rH(n,o);g.delegationSelector=r?t:null,g.callable=o,g.oneOff=i,g.uidEvent=p,h[p]=g,n.addEventListener(a,g,r)}function hm(n,e,t,s,i){const r=jR(e[t],s,i);r&&(n.removeEventListener(t,r,!!i),delete e[t][r.uidEvent])}function aH(n,e,t,s){const i=e[t]||{};for(const[r,o]of Object.entries(i))r.includes(s)&&hm(n,e,t,o.callable,o.delegationSelector)}function HR(n){return n=n.replace(nH,""),FR[n]||n}const ee={on(n,e,t,s){Iw(n,e,t,s,!1)},one(n,e,t,s){Iw(n,e,t,s,!0)},off(n,e,t,s){if(typeof e!="string"||!n)return;const[i,r,o]=BR(e,t,s),a=o!==e,c=UR(n),h=c[o]||{},d=e.startsWith(".");if(typeof r<"u"){if(!Object.keys(h).length)return;hm(n,c,o,r,i?t:null);return}if(d)for(const p of Object.keys(c))aH(n,c,p,e.slice(1));for(const[p,g]of Object.entries(h)){const y=p.replace(sH,"");(!a||e.includes(y))&&hm(n,c,o,g.callable,g.delegationSelector)}},trigger(n,e,t){if(typeof e!="string"||!n)return null;const s=MR(),i=HR(e),r=e!==i;let o=null,a=!0,c=!0,h=!1;r&&s&&(o=s.Event(e,t),s(n).trigger(o),a=!o.isPropagationStopped(),c=!o.isImmediatePropagationStopped(),h=o.isDefaultPrevented());const d=yv(new Event(e,{bubbles:a,cancelable:!0}),t);return h&&d.preventDefault(),c&&n.dispatchEvent(d),d.defaultPrevented&&o&&o.preventDefault(),d}};function yv(n,e={}){for(const[t,s]of Object.entries(e))try{n[t]=s}catch{Object.defineProperty(n,t,{configurable:!0,get(){return s}})}return n}function Aw(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function Yp(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Vi={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${Yp(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${Yp(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of t){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=Aw(n.dataset[s])}return e},getDataAttribute(n,e){return Aw(n.getAttribute(`data-bs-${Yp(e)}`))}};class ku{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const s=Mi(t)?Vi.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...Mi(t)?Vi.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,i]of Object.entries(t)){const r=e[s],o=Mi(r)?"element":XB(r);if(!new RegExp(i).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${i}".`)}}}const lH="5.3.3";class Us extends ku{constructor(e,t){super(),e=Ur(e),e&&(this._element=e,this._config=this._getConfig(t),zp.set(this._element,this.constructor.DATA_KEY,this))}dispose(){zp.remove(this._element,this.constructor.DATA_KEY),ee.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,s=!0){VR(e,t,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return zp.get(Ur(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return lH}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Xp=n=>{let e=n.getAttribute("data-bs-target");if(!e||e==="#"){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e?e.split(",").map(t=>DR(t)).join(","):null},we={find(n,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,n))},findOne(n,e=document.documentElement){return Element.prototype.querySelector.call(e,n)},children(n,e){return[].concat(...n.children).filter(t=>t.matches(e))},parents(n,e){const t=[];let s=n.parentNode.closest(e);for(;s;)t.push(s),s=s.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!jr(t)&&Sl(t))},getSelectorFromElement(n){const e=Xp(n);return e&&we.findOne(e)?e:null},getElementFromSelector(n){const e=Xp(n);return e?we.findOne(e):null},getMultipleElementsFromSelector(n){const e=Xp(n);return e?we.find(e):[]}},Xf=(n,e="hide")=>{const t=`click.dismiss${n.EVENT_KEY}`,s=n.NAME;ee.on(document,t,`[data-bs-dismiss="${s}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),jr(this))return;const r=we.getElementFromSelector(this)||this.closest(`.${s}`);n.getOrCreateInstance(r)[e]()})},cH="alert",uH="bs.alert",WR=`.${uH}`,hH=`close${WR}`,dH=`closed${WR}`,fH="fade",pH="show";class Du extends Us{static get NAME(){return cH}close(){if(ee.trigger(this._element,hH).defaultPrevented)return;this._element.classList.remove(pH);const t=this._element.classList.contains(fH);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),ee.trigger(this._element,dH),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=Du.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Xf(Du,"close");ms(Du);const _H="button",mH="bs.button",gH=`.${mH}`,vH=".data-api",yH="active",Cw='[data-bs-toggle="button"]',EH=`click${gH}${vH}`;class xu extends Us{static get NAME(){return _H}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(yH))}static jQueryInterface(e){return this.each(function(){const t=xu.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}ee.on(document,EH,Cw,n=>{n.preventDefault();const e=n.target.closest(Cw);xu.getOrCreateInstance(e).toggle()});ms(xu);const TH="swipe",Rl=".bs.swipe",wH=`touchstart${Rl}`,bH=`touchmove${Rl}`,IH=`touchend${Rl}`,AH=`pointerdown${Rl}`,CH=`pointerup${Rl}`,SH="touch",RH="pen",PH="pointer-event",NH=40,OH={endCallback:null,leftCallback:null,rightCallback:null},kH={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Kd extends ku{constructor(e,t){super(),this._element=e,!(!e||!Kd.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return OH}static get DefaultType(){return kH}static get NAME(){return TH}dispose(){ee.off(this._element,Rl)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Un(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=NH)return;const t=e/this._deltaX;this._deltaX=0,t&&Un(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ee.on(this._element,AH,e=>this._start(e)),ee.on(this._element,CH,e=>this._end(e)),this._element.classList.add(PH)):(ee.on(this._element,wH,e=>this._start(e)),ee.on(this._element,bH,e=>this._move(e)),ee.on(this._element,IH,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===RH||e.pointerType===SH)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const DH="carousel",xH="bs.carousel",Qr=`.${xH}`,qR=".data-api",LH="ArrowLeft",MH="ArrowRight",VH=500,cc="next",ba="prev",ka="left",Jh="right",FH=`slide${Qr}`,Jp=`slid${Qr}`,$H=`keydown${Qr}`,UH=`mouseenter${Qr}`,jH=`mouseleave${Qr}`,BH=`dragstart${Qr}`,HH=`load${Qr}${qR}`,WH=`click${Qr}${qR}`,KR="carousel",Sh="active",qH="slide",KH="carousel-item-end",zH="carousel-item-start",GH="carousel-item-next",QH="carousel-item-prev",zR=".active",GR=".carousel-item",YH=zR+GR,XH=".carousel-item img",JH=".carousel-indicators",ZH="[data-bs-slide], [data-bs-slide-to]",eW='[data-bs-ride="carousel"]',tW={[LH]:Jh,[MH]:ka},nW={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},sW={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Pl extends Us{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=we.findOne(JH,this._element),this._addEventListeners(),this._config.ride===KR&&this.cycle()}static get Default(){return nW}static get DefaultType(){return sW}static get NAME(){return DH}next(){this._slide(cc)}nextWhenVisible(){!document.hidden&&Sl(this._element)&&this.next()}prev(){this._slide(ba)}pause(){this._isSliding&&xR(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){ee.one(this._element,Jp,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){ee.one(this._element,Jp,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const i=e>s?cc:ba;this._slide(i,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&ee.on(this._element,$H,e=>this._keydown(e)),this._config.pause==="hover"&&(ee.on(this._element,UH,()=>this.pause()),ee.on(this._element,jH,()=>this._maybeEnableCycle())),this._config.touch&&Kd.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of we.find(XH,this._element))ee.on(s,BH,i=>i.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(ka)),rightCallback:()=>this._slide(this._directionToOrder(Jh)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),VH+this._config.interval))}};this._swipeHelper=new Kd(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=tW[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=we.findOne(zR,this._indicatorsElement);t.classList.remove(Sh),t.removeAttribute("aria-current");const s=we.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(Sh),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const s=this._getActive(),i=e===cc,r=t||vv(this._getItems(),s,i,this._config.wrap);if(r===s)return;const o=this._getItemIndex(r),a=y=>ee.trigger(this._element,y,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:o});if(a(FH).defaultPrevented||!s||!r)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const d=i?zH:KH,p=i?GH:QH;r.classList.add(p),Ou(r),s.classList.add(d),r.classList.add(d);const g=()=>{r.classList.remove(d,p),r.classList.add(Sh),s.classList.remove(Sh,p,d),this._isSliding=!1,a(Jp)};this._queueCallback(g,s,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(qH)}_getActive(){return we.findOne(YH,this._element)}_getItems(){return we.find(GR,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return ps()?e===ka?ba:cc:e===ka?cc:ba}_orderToDirection(e){return ps()?e===ba?ka:Jh:e===ba?Jh:ka}static jQueryInterface(e){return this.each(function(){const t=Pl.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}ee.on(document,WH,ZH,function(n){const e=we.getElementFromSelector(this);if(!e||!e.classList.contains(KR))return;n.preventDefault();const t=Pl.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){t.to(s),t._maybeEnableCycle();return}if(Vi.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});ee.on(window,HH,()=>{const n=we.find(eW);for(const e of n)Pl.getOrCreateInstance(e)});ms(Pl);const iW="collapse",rW="bs.collapse",Lu=`.${rW}`,oW=".data-api",aW=`show${Lu}`,lW=`shown${Lu}`,cW=`hide${Lu}`,uW=`hidden${Lu}`,hW=`click${Lu}${oW}`,Zp="show",Ma="collapse",Rh="collapsing",dW="collapsed",fW=`:scope .${Ma} .${Ma}`,pW="collapse-horizontal",_W="width",mW="height",gW=".collapse.show, .collapse.collapsing",dm='[data-bs-toggle="collapse"]',vW={parent:null,toggle:!0},yW={parent:"(null|element)",toggle:"boolean"};class _l extends Us{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const s=we.find(dm);for(const i of s){const r=we.getSelectorFromElement(i),o=we.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return vW}static get DefaultType(){return yW}static get NAME(){return iW}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(gW).filter(a=>a!==this._element).map(a=>_l.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||ee.trigger(this._element,aW).defaultPrevented)return;for(const a of e)a.hide();const s=this._getDimension();this._element.classList.remove(Ma),this._element.classList.add(Rh),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Rh),this._element.classList.add(Ma,Zp),this._element.style[s]="",ee.trigger(this._element,lW)},o=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[s]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||ee.trigger(this._element,cW).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Ou(this._element),this._element.classList.add(Rh),this._element.classList.remove(Ma,Zp);for(const i of this._triggerArray){const r=we.getElementFromSelector(i);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Rh),this._element.classList.add(Ma),ee.trigger(this._element,uW)};this._element.style[t]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Zp)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Ur(e.parent),e}_getDimension(){return this._element.classList.contains(pW)?_W:mW}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(dm);for(const t of e){const s=we.getElementFromSelector(t);s&&this._addAriaAndCollapsedClass([t],this._isShown(s))}}_getFirstLevelChildren(e){const t=we.find(fW,this._config.parent);return we.find(e,this._config.parent).filter(s=>!t.includes(s))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const s of e)s.classList.toggle(dW,!t),s.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const s=_l.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}ee.on(document,hW,dm,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const e of we.getMultipleElementsFromSelector(this))_l.getOrCreateInstance(e,{toggle:!1}).toggle()});ms(_l);const Sw="dropdown",EW="bs.dropdown",Jo=`.${EW}`,Ev=".data-api",TW="Escape",Rw="Tab",wW="ArrowUp",Pw="ArrowDown",bW=2,IW=`hide${Jo}`,AW=`hidden${Jo}`,CW=`show${Jo}`,SW=`shown${Jo}`,QR=`click${Jo}${Ev}`,YR=`keydown${Jo}${Ev}`,RW=`keyup${Jo}${Ev}`,Da="show",PW="dropup",NW="dropend",OW="dropstart",kW="dropup-center",DW="dropdown-center",So='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',xW=`${So}.${Da}`,Zh=".dropdown-menu",LW=".navbar",MW=".navbar-nav",VW=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",FW=ps()?"top-end":"top-start",$W=ps()?"top-start":"top-end",UW=ps()?"bottom-end":"bottom-start",jW=ps()?"bottom-start":"bottom-end",BW=ps()?"left-start":"right-start",HW=ps()?"right-start":"left-start",WW="top",qW="bottom",KW={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},zW={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Vs extends Us{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=we.next(this._element,Zh)[0]||we.prev(this._element,Zh)[0]||we.findOne(Zh,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return KW}static get DefaultType(){return zW}static get NAME(){return Sw}toggle(){return this._isShown()?this.hide():this.show()}show(){if(jr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!ee.trigger(this._element,CW,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(MW))for(const s of[].concat(...document.body.children))ee.on(s,"mouseover",qd);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Da),this._element.classList.add(Da),ee.trigger(this._element,SW,e)}}hide(){if(jr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!ee.trigger(this._element,IW,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))ee.off(s,"mouseover",qd);this._popper&&this._popper.destroy(),this._menu.classList.remove(Da),this._element.classList.remove(Da),this._element.setAttribute("aria-expanded","false"),Vi.removeDataAttribute(this._menu,"popper"),ee.trigger(this._element,AW,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Mi(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Sw.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof kR>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Mi(this._config.reference)?e=Ur(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=gv(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Da)}_getPlacement(){const e=this._parent;if(e.classList.contains(NW))return BW;if(e.classList.contains(OW))return HW;if(e.classList.contains(kW))return WW;if(e.classList.contains(DW))return qW;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(PW)?t?$W:FW:t?jW:UW}_detectNavbar(){return this._element.closest(LW)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Vi.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Un(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const s=we.find(VW,this._menu).filter(i=>Sl(i));s.length&&vv(s,t,e===Pw,!s.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=Vs.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===bW||e.type==="keyup"&&e.key!==Rw)return;const t=we.find(xW);for(const s of t){const i=Vs.getInstance(s);if(!i||i._config.autoClose===!1)continue;const r=e.composedPath(),o=r.includes(i._menu);if(r.includes(i._element)||i._config.autoClose==="inside"&&!o||i._config.autoClose==="outside"&&o||i._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Rw||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:i._element};e.type==="click"&&(a.clickEvent=e),i._completeHide(a)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),s=e.key===TW,i=[wW,Pw].includes(e.key);if(!i&&!s||t&&!s)return;e.preventDefault();const r=this.matches(So)?this:we.prev(this,So)[0]||we.next(this,So)[0]||we.findOne(So,e.delegateTarget.parentNode),o=Vs.getOrCreateInstance(r);if(i){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),r.focus())}}ee.on(document,YR,So,Vs.dataApiKeydownHandler);ee.on(document,YR,Zh,Vs.dataApiKeydownHandler);ee.on(document,QR,Vs.clearMenus);ee.on(document,RW,Vs.clearMenus);ee.on(document,QR,So,function(n){n.preventDefault(),Vs.getOrCreateInstance(this).toggle()});ms(Vs);const XR="backdrop",GW="fade",Nw="show",Ow=`mousedown.bs.${XR}`,QW={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},YW={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class JR extends ku{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return QW}static get DefaultType(){return YW}static get NAME(){return XR}show(e){if(!this._config.isVisible){Un(e);return}this._append();const t=this._getElement();this._config.isAnimated&&Ou(t),t.classList.add(Nw),this._emulateAnimation(()=>{Un(e)})}hide(e){if(!this._config.isVisible){Un(e);return}this._getElement().classList.remove(Nw),this._emulateAnimation(()=>{this.dispose(),Un(e)})}dispose(){this._isAppended&&(ee.off(this._element,Ow),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(GW),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ur(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),ee.on(e,Ow,()=>{Un(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){VR(e,this._getElement(),this._config.isAnimated)}}const XW="focustrap",JW="bs.focustrap",zd=`.${JW}`,ZW=`focusin${zd}`,e4=`keydown.tab${zd}`,t4="Tab",n4="forward",kw="backward",s4={autofocus:!0,trapElement:null},i4={autofocus:"boolean",trapElement:"element"};class ZR extends ku{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return s4}static get DefaultType(){return i4}static get NAME(){return XW}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ee.off(document,zd),ee.on(document,ZW,e=>this._handleFocusin(e)),ee.on(document,e4,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ee.off(document,zd))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const s=we.focusableChildren(t);s.length===0?t.focus():this._lastTabNavDirection===kw?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===t4&&(this._lastTabNavDirection=e.shiftKey?kw:n4)}}const Dw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",xw=".sticky-top",Ph="padding-right",Lw="margin-right";class fm{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ph,t=>t+e),this._setElementAttributes(Dw,Ph,t=>t+e),this._setElementAttributes(xw,Lw,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ph),this._resetElementAttributes(Dw,Ph),this._resetElementAttributes(xw,Lw)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,s){const i=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+i)return;this._saveInitialAttribute(o,t);const a=window.getComputedStyle(o).getPropertyValue(t);o.style.setProperty(t,`${s(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,t){const s=e.style.getPropertyValue(t);s&&Vi.setDataAttribute(e,t,s)}_resetElementAttributes(e,t){const s=i=>{const r=Vi.getDataAttribute(i,t);if(r===null){i.style.removeProperty(t);return}Vi.removeDataAttribute(i,t),i.style.setProperty(t,r)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,t){if(Mi(e)){t(e);return}for(const s of we.find(e,this._element))t(s)}}const r4="modal",o4="bs.modal",_s=`.${o4}`,a4=".data-api",l4="Escape",c4=`hide${_s}`,u4=`hidePrevented${_s}`,e0=`hidden${_s}`,t0=`show${_s}`,h4=`shown${_s}`,d4=`resize${_s}`,f4=`click.dismiss${_s}`,p4=`mousedown.dismiss${_s}`,_4=`keydown.dismiss${_s}`,m4=`click${_s}${a4}`,Mw="modal-open",g4="fade",Vw="show",e_="modal-static",v4=".modal.show",y4=".modal-dialog",E4=".modal-body",T4='[data-bs-toggle="modal"]',w4={backdrop:!0,focus:!0,keyboard:!0},b4={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Wo extends Us{constructor(e,t){super(e,t),this._dialog=we.findOne(y4,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new fm,this._addEventListeners()}static get Default(){return w4}static get DefaultType(){return b4}static get NAME(){return r4}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||ee.trigger(this._element,t0,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Mw),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||ee.trigger(this._element,c4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Vw),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){ee.off(window,_s),ee.off(this._dialog,_s),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new JR({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ZR({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=we.findOne(E4,this._dialog);t&&(t.scrollTop=0),Ou(this._element),this._element.classList.add(Vw);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ee.trigger(this._element,h4,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){ee.on(this._element,_4,e=>{if(e.key===l4){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),ee.on(window,d4,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ee.on(this._element,p4,e=>{ee.one(this._element,f4,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Mw),this._resetAdjustments(),this._scrollBar.reset(),ee.trigger(this._element,e0)})}_isAnimated(){return this._element.classList.contains(g4)}_triggerBackdropTransition(){if(ee.trigger(this._element,u4).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(e_)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(e_),this._queueCallback(()=>{this._element.classList.remove(e_),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),s=t>0;if(s&&!e){const i=ps()?"paddingLeft":"paddingRight";this._element.style[i]=`${t}px`}if(!s&&e){const i=ps()?"paddingRight":"paddingLeft";this._element.style[i]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const s=Wo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](t)}})}}ee.on(document,m4,T4,function(n){const e=we.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),ee.one(e,t0,i=>{i.defaultPrevented||ee.one(e,e0,()=>{Sl(this)&&this.focus()})});const t=we.findOne(v4);t&&Wo.getInstance(t).hide(),Wo.getOrCreateInstance(e).toggle(this)});Xf(Wo);ms(Wo);const I4="offcanvas",A4="bs.offcanvas",Qi=`.${A4}`,n0=".data-api",C4=`load${Qi}${n0}`,S4="Escape",Fw="show",$w="showing",Uw="hiding",R4="offcanvas-backdrop",s0=".offcanvas.show",P4=`show${Qi}`,N4=`shown${Qi}`,O4=`hide${Qi}`,jw=`hidePrevented${Qi}`,i0=`hidden${Qi}`,k4=`resize${Qi}`,D4=`click${Qi}${n0}`,x4=`keydown.dismiss${Qi}`,L4='[data-bs-toggle="offcanvas"]',M4={backdrop:!0,keyboard:!0,scroll:!1},V4={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Wi extends Us{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return M4}static get DefaultType(){return V4}static get NAME(){return I4}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||ee.trigger(this._element,P4,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new fm().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add($w);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Fw),this._element.classList.remove($w),ee.trigger(this._element,N4,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||ee.trigger(this._element,O4).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Uw),this._backdrop.hide();const t=()=>{this._element.classList.remove(Fw,Uw),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new fm().reset(),ee.trigger(this._element,i0)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){ee.trigger(this._element,jw);return}this.hide()},t=!!this._config.backdrop;return new JR({className:R4,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new ZR({trapElement:this._element})}_addEventListeners(){ee.on(this._element,x4,e=>{if(e.key===S4){if(this._config.keyboard){this.hide();return}ee.trigger(this._element,jw)}})}static jQueryInterface(e){return this.each(function(){const t=Wi.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ee.on(document,D4,L4,function(n){const e=we.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),jr(this))return;ee.one(e,i0,()=>{Sl(this)&&this.focus()});const t=we.findOne(s0);t&&t!==e&&Wi.getInstance(t).hide(),Wi.getOrCreateInstance(e).toggle(this)});ee.on(window,C4,()=>{for(const n of we.find(s0))Wi.getOrCreateInstance(n).show()});ee.on(window,k4,()=>{for(const n of we.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&Wi.getOrCreateInstance(n).hide()});Xf(Wi);ms(Wi);const F4=/^aria-[\w-]*$/i,r0={"*":["class","dir","id","lang","role",F4],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},$4=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),U4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,j4=(n,e)=>{const t=n.nodeName.toLowerCase();return e.includes(t)?$4.has(t)?!!U4.test(n.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(t))};function B4(n,e,t){if(!n.length)return n;if(t&&typeof t=="function")return t(n);const i=new window.DOMParser().parseFromString(n,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const c=[].concat(...o.attributes),h=[].concat(e["*"]||[],e[a]||[]);for(const d of c)j4(d,h)||o.removeAttribute(d.nodeName)}return i.body.innerHTML}const H4="TemplateFactory",W4={allowList:r0,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},q4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},K4={entry:"(string|element|function|null)",selector:"(string|element)"};class z4 extends ku{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return W4}static get DefaultType(){return q4}static get NAME(){return H4}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,r]of Object.entries(this._config.content))this._setContent(e,r,i);const t=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&t.classList.add(...s.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,s]of Object.entries(e))super._typeCheckConfig({selector:t,entry:s},K4)}_setContent(e,t,s){const i=we.findOne(s,e);if(i){if(t=this._resolvePossibleFunction(t),!t){i.remove();return}if(Mi(t)){this._putElementInTemplate(Ur(t),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(t);return}i.textContent=t}}_maybeSanitize(e){return this._config.sanitize?B4(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Un(e,[this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const G4="tooltip",Q4=new Set(["sanitize","allowList","sanitizeFn"]),t_="fade",Y4="modal",Nh="show",X4=".tooltip-inner",Bw=`.${Y4}`,Hw="hide.bs.modal",uc="hover",n_="focus",J4="click",Z4="manual",e9="hide",t9="hidden",n9="show",s9="shown",i9="inserted",r9="click",o9="focusin",a9="focusout",l9="mouseenter",c9="mouseleave",u9={AUTO:"auto",TOP:"top",RIGHT:ps()?"left":"right",BOTTOM:"bottom",LEFT:ps()?"right":"left"},h9={allowList:r0,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},d9={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Zo extends Us{constructor(e,t){if(typeof kR>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return h9}static get DefaultType(){return d9}static get NAME(){return G4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),ee.off(this._element.closest(Bw),Hw,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=ee.trigger(this._element,this.constructor.eventName(n9)),s=(LR(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(i),ee.trigger(this._element,this.constructor.eventName(i9))),this._popper=this._createPopper(i),i.classList.add(Nh),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))ee.on(a,"mouseover",qd);const o=()=>{ee.trigger(this._element,this.constructor.eventName(s9)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||ee.trigger(this._element,this.constructor.eventName(e9)).defaultPrevented)return;if(this._getTipElement().classList.remove(Nh),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))ee.off(i,"mouseover",qd);this._activeTrigger[J4]=!1,this._activeTrigger[n_]=!1,this._activeTrigger[uc]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ee.trigger(this._element,this.constructor.eventName(t9)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(t_,Nh),t.classList.add(`bs-${this.constructor.NAME}-auto`);const s=JB(this.constructor.NAME).toString();return t.setAttribute("id",s),this._isAnimated()&&t.classList.add(t_),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new z4({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[X4]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(t_)}_isShown(){return this.tip&&this.tip.classList.contains(Nh)}_createPopper(e){const t=Un(this._config.placement,[this,e,this._element]),s=u9[t.toUpperCase()];return gv(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Un(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...t,...Un(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")ee.on(this._element,this.constructor.eventName(r9),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(t!==Z4){const s=t===uc?this.constructor.eventName(l9):this.constructor.eventName(o9),i=t===uc?this.constructor.eventName(c9):this.constructor.eventName(a9);ee.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?n_:uc]=!0,o._enter()}),ee.on(this._element,i,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?n_:uc]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ee.on(this._element.closest(Bw),Hw,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=Vi.getDataAttributes(this._element);for(const s of Object.keys(t))Q4.has(s)&&delete t[s];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Ur(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,s]of Object.entries(this._config))this.constructor.Default[t]!==s&&(e[t]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=Zo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}ms(Zo);const f9="popover",p9=".popover-header",_9=".popover-body",m9={...Zo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},g9={...Zo.DefaultType,content:"(null|string|element|function)"};class Jf extends Zo{static get Default(){return m9}static get DefaultType(){return g9}static get NAME(){return f9}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[p9]:this._getTitle(),[_9]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=Jf.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}ms(Jf);const v9="scrollspy",y9="bs.scrollspy",Tv=`.${y9}`,E9=".data-api",T9=`activate${Tv}`,Ww=`click${Tv}`,w9=`load${Tv}${E9}`,b9="dropdown-item",Ia="active",I9='[data-bs-spy="scroll"]',s_="[href]",A9=".nav, .list-group",qw=".nav-link",C9=".nav-item",S9=".list-group-item",R9=`${qw}, ${C9} > ${qw}, ${S9}`,P9=".dropdown",N9=".dropdown-toggle",O9={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},k9={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Mu extends Us{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return O9}static get DefaultType(){return k9}static get NAME(){return v9}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ur(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ee.off(this._config.target,Ww),ee.on(this._config.target,Ww,s_,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const s=this._rootElement||window,i=t.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:i,behavior:"smooth"});return}s.scrollTop=i}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=o=>this._targetLinks.get(`#${o.target.id}`),s=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(t(o))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(s(o),!i)return;continue}!r&&!a&&s(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=we.find(s_,this._config.target);for(const t of e){if(!t.hash||jr(t))continue;const s=we.findOne(decodeURI(t.hash),this._element);Sl(s)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Ia),this._activateParents(e),ee.trigger(this._element,T9,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(b9)){we.findOne(N9,e.closest(P9)).classList.add(Ia);return}for(const t of we.parents(e,A9))for(const s of we.prev(t,R9))s.classList.add(Ia)}_clearActiveClass(e){e.classList.remove(Ia);const t=we.find(`${s_}.${Ia}`,e);for(const s of t)s.classList.remove(Ia)}static jQueryInterface(e){return this.each(function(){const t=Mu.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}ee.on(window,w9,()=>{for(const n of we.find(I9))Mu.getOrCreateInstance(n)});ms(Mu);const D9="tab",x9="bs.tab",ea=`.${x9}`,L9=`hide${ea}`,M9=`hidden${ea}`,V9=`show${ea}`,F9=`shown${ea}`,$9=`click${ea}`,U9=`keydown${ea}`,j9=`load${ea}`,B9="ArrowLeft",Kw="ArrowRight",H9="ArrowUp",zw="ArrowDown",i_="Home",Gw="End",Ro="active",Qw="fade",r_="show",W9="dropdown",o0=".dropdown-toggle",q9=".dropdown-menu",o_=`:not(${o0})`,K9='.list-group, .nav, [role="tablist"]',z9=".nav-item, .list-group-item",G9=`.nav-link${o_}, .list-group-item${o_}, [role="tab"]${o_}`,a0='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',a_=`${G9}, ${a0}`,Q9=`.${Ro}[data-bs-toggle="tab"], .${Ro}[data-bs-toggle="pill"], .${Ro}[data-bs-toggle="list"]`;class qo extends Us{constructor(e){super(e),this._parent=this._element.closest(K9),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ee.on(this._element,U9,t=>this._keydown(t)))}static get NAME(){return D9}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),s=t?ee.trigger(t,L9,{relatedTarget:e}):null;ee.trigger(e,V9,{relatedTarget:t}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Ro),this._activate(we.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(r_);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),ee.trigger(e,F9,{relatedTarget:t})};this._queueCallback(s,e,e.classList.contains(Qw))}_deactivate(e,t){if(!e)return;e.classList.remove(Ro),e.blur(),this._deactivate(we.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(r_);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),ee.trigger(e,M9,{relatedTarget:t})};this._queueCallback(s,e,e.classList.contains(Qw))}_keydown(e){if(![B9,Kw,H9,zw,i_,Gw].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(i=>!jr(i));let s;if([i_,Gw].includes(e.key))s=t[e.key===i_?0:t.length-1];else{const i=[Kw,zw].includes(e.key);s=vv(t,e.target,i,!0)}s&&(s.focus({preventScroll:!0}),qo.getOrCreateInstance(s).show())}_getChildren(){return we.find(a_,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const s of t)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",t),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=we.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const s=this._getOuterElement(e);if(!s.classList.contains(W9))return;const i=(r,o)=>{const a=we.findOne(r,s);a&&a.classList.toggle(o,t)};i(o0,Ro),i(q9,r_),s.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,s){e.hasAttribute(t)||e.setAttribute(t,s)}_elemIsActive(e){return e.classList.contains(Ro)}_getInnerElement(e){return e.matches(a_)?e:we.findOne(a_,e)}_getOuterElement(e){return e.closest(z9)||e}static jQueryInterface(e){return this.each(function(){const t=qo.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}ee.on(document,$9,a0,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!jr(this)&&qo.getOrCreateInstance(this).show()});ee.on(window,j9,()=>{for(const n of we.find(Q9))qo.getOrCreateInstance(n)});ms(qo);const Y9="toast",X9="bs.toast",Yr=`.${X9}`,J9=`mouseover${Yr}`,Z9=`mouseout${Yr}`,eq=`focusin${Yr}`,tq=`focusout${Yr}`,nq=`hide${Yr}`,sq=`hidden${Yr}`,iq=`show${Yr}`,rq=`shown${Yr}`,oq="fade",Yw="hide",Oh="show",kh="showing",aq={animation:"boolean",autohide:"boolean",delay:"number"},lq={animation:!0,autohide:!0,delay:5e3};class Vu extends Us{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return lq}static get DefaultType(){return aq}static get NAME(){return Y9}show(){if(ee.trigger(this._element,iq).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(oq);const t=()=>{this._element.classList.remove(kh),ee.trigger(this._element,rq),this._maybeScheduleHide()};this._element.classList.remove(Yw),Ou(this._element),this._element.classList.add(Oh,kh),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||ee.trigger(this._element,nq).defaultPrevented)return;const t=()=>{this._element.classList.add(Yw),this._element.classList.remove(kh,Oh),ee.trigger(this._element,sq)};this._element.classList.add(kh),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Oh),super.dispose()}isShown(){return this._element.classList.contains(Oh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){ee.on(this._element,J9,e=>this._onInteraction(e,!0)),ee.on(this._element,Z9,e=>this._onInteraction(e,!1)),ee.on(this._element,eq,e=>this._onInteraction(e,!0)),ee.on(this._element,tq,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=Vu.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Xf(Vu);ms(Vu);const cq=Object.freeze(Object.defineProperty({__proto__:null,Alert:Du,Button:xu,Carousel:Pl,Collapse:_l,Dropdown:Vs,Modal:Wo,Offcanvas:Wi,Popover:Jf,ScrollSpy:Mu,Tab:qo,Toast:Vu,Tooltip:Zo},Symbol.toStringTag,{value:"Module"})),wv=HO(gV);wv.config.globalProperties.$bootstrap=cq;wv.use(lB);wv.mount("#app");export{Eq as A,_q as B,Tq as C,Uj as D,uA as E,Cs as F,Fn as G,jj as H,hA as _,Pm as a,qM as b,R$ as c,fq as d,gq as e,yq as f,Gc as g,Bj as h,Ss as i,ge as j,bo as k,my as l,bp as m,tc as n,of as o,uq as p,mq as q,dn as r,y$ as s,As as t,hq as u,sc as v,gh as w,pq as x,uw as y,pw as z};
